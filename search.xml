<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>一个脚注</title>
      <link href="/2021/09/12/word/"/>
      <url>/2021/09/12/word/</url>
      
        <content type="html"><![CDATA[<p>难得在下班路上遇到太阳一直晃眼，我才意识到这条走了一个多月的路原来自东向西。视线的最远处有一座亮着灯的电视塔插在高楼蚕食过的地平线上，我就租住在那附近。经行道树荫，加速穿过白天，我迈上阶梯，回到生活，带上房门就像死者拉上自己的棺材盖。烧水、瘫坐、打扫、上网，骄傲、怀疑、嫉妒、生闷气。给家人打电话，好像对方有安慰自己的义务；向女孩发消息，觉得对方也该回礼般应答；第三次读某本书，惊讶地发现这段时间自以为摸打滚爬得到的感悟还不如书上前两遍都被自己忽略了的一个脚注。——但我喜欢这种感觉（虽然总有延迟），一直觉得自己是「正确」的才反倒让我感到害怕。但随着又一次否定自己，我才意识到否定和成长并没有必然的关联。我没有变得更好，只是优越感变了，我有了新的理由鄙视以前的自己、鄙视和以前的自己处于同温层的人、鄙视「鄙视」这种行为本身。</p><p>在学校里报复性阅读的那阵子，我曾想过的、感兴趣的、怀疑的东西全都能很快从某本书上找到，彼此联系、细流汇聚又载着我通往许多未知。和许多同龄人一样，第一次，我知道了自己不知道。虽然让人兴奋，却也有点拔苗助长。我发现我的好奇心在消逝，不愿意去理解，排斥许多东西——以一种把它们纳入自己熟悉领域来思考的方式。我通过自己刚记住的几个结论来反推面前东西的对错，想当然地质疑一切，以讨厌别的什么事物来显得自己聪明。</p><p>但我知道「我不知道自己在说什么」。我相信我有可能是错的，并且很乐意去寻找能告诉我为什么错了的东西。于是我将「求知」理解成观点遍历，试图在理念的碰撞、颠覆中获取快感，但往往只是在用固有认知来指点江山。唯一值得庆幸的是，我的自尊心还没有自大到觉得自己有能力去教育别人。</p><p>最近开始翻阅以前立了 Flag 要重读但一直被追求新鲜感打断的书，发现一些惊喜但早就被勾划过的段落。嗐，当时完全没用心嘛。更糟的是，还发现自己记得的某些东西原来记错了。嗐，闭门造车呀。我还是不赞同死磕晦涩的经典，但有点明白经典的意义了。读者只能读出已然存在内心的东西，所以挑选书的标准只有一个——总能和内心共鸣。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>艺术家是人类的感官</title>
      <link href="/2021/08/05/august/"/>
      <url>/2021/08/05/august/</url>
      
        <content type="html"><![CDATA[<p>靠着打工处的商场六楼开着一间书店，借着「快要换办公场地了，何不逛逛」的名义和同事溜达了一圈。倒是奢侈，租了大半栋楼只零散摆了估摸着两三个架子的畅销书……你知道这类地方店名仅供参考，但还是觉得有点失望。</p><p>匆匆晃过，提及几个名字。对方意在言外，我也就老实地坦白无知。想到也读过不少完全不解其意的小说——在很长的一段时间里，读书于我就是读小说、读小说便是读故事，那些文学名著啊什么的，大部分都是些好简单、了无趣味的故事。偶尔运气好，我能记下一些抽象的大道理和戏谑的句子，作为翻阅过它们的证据。哎，我的经历太狭窄了，能读出来的东西少得可怜。</p><p>中学午休时室长偶尔翻我柜子找些文字解闷，因为两三本有着麦黄色的封面，便开玩笑说我又在看黄书了。当时觉得对方冒昧，后来自己被人揶揄时也常打趣说在看小黄书，反倒有点怀念那阵子有人愿意读你感兴趣的东西。当时大家忙于一些重要的东西，精神贫瘠得一致，很容易聊得来。</p><p>《挪威的森林》是一本作者被室长戏称为「村上春花」，也有着黄色封面的盗版书。有人批评这本书肤浅（性幻想读物），责备它肤浅（地摊文学）。我在注意到这些负面评价时才意识到与它的缘分。斟酌一番后我选择坦然承认自己对它的偏爱，我想，你只有在那个年纪、那个状态才能感受到村上表达的一些东西，而且不觉得它无趣、也不觉得腻味。运气好的话，还可以把它当作某些困境的指南，很难说那有多高明，但确实能给人慰藉。</p><p>这算是与过去的和解吗？也并不是。早先接触到的那些晦涩抽象的东西，总需要后面摸打滚爬才能豁然开朗。顿悟把往昔凝固成符号，但曾今的自己并非愚蠢、更不是错误，只是有限。</p><p>我们真的不是错误的吗，还是只是不愿意否定自己呢？我虽不知道答案，但怀疑人即便常说「否定过去」，也没有否定过去的自己。人会合理化自己，而把那些否定归咎于身不由己，将矛盾寄托于他物。—— 按现在流行的对阿德勒个体心理学的认知来说，你只是选择了这么做。在过往中寻找原因没有任何意义。把人生看作选择确实是一个自由主义色彩浓厚的想法，以此推论也能解释一些大问题（当然我不知道是不是那么一回事）。很难说这是阿德勒本来的想法，现代哲人挖出前人的思想，拭去灰尘、添置自由意志的羽翼——如果企图仅仅靠原因去解释事物，就会陷入决定论的虚无。</p><p>《被讨厌的勇气》说「人的烦恼皆源于人际关系」是阿德勒心理学的一个基本概念，这大概是作者自己的提炼。一些批评的观点认为这是一种自欺欺人的诡计，而且太过消极，很容易被解读为犬儒。一些人把这当作「即便被人讨厌也要活得自由」。不如这样理解：外界的一切都只是「规则」。法律是规则，道德也是规则；你可以活在规则内，也可以活在规则外——但规则总是存在。这世上的大部分规则，确实已经安排好了一个麻醉的人生，足以让人忘记其实我们只活一次。不过这并非在悲观地鼓励大家安稳赴死，如果认识到规则，你完全可以利用规则！呵，这世间就是充满了利用规则的聪明人。当然，你可以打破规则，也可以创造规则。哎，对这个世界的诠释方式实在太多了。</p><p>《挪威的森林》里的角色小林绿子是我最喜欢的虚构人物之一，她大概也不是第一个这样描绘出来的个性，但我总忍不住拿后面从各种作品里接触到的人物去和她比较。「没有人喜欢孤独。只是不愿失望。」这句话就出自绿子第一次和主角渡边打招呼的场景。后来我想，渡边这个假正经，像绿子这么聪明的女孩，他心里的那点东西，人家应该早就知道了吧。不过世界终究是太大了，大到任何自以为的独特都有一个很大的基数，大到任何欲望都早被标好了价钱，大到即便我活得并不长，也曾遇到那么一两个这样的人类。他们活得轻松、坦率。与之相处时总是忍不住想，他们是真的如此天真，还是城府太深？</p><p>天真其实并不讨喜，我在故事里爱上的其实是人物历经千帆后的热诚。因此他们才总能把握住热情的度量——失望过的人才懂得如何制造惊喜。</p><p>但问题在于「认清生活的真相后」为什么还要「爱它」？有人觉得这是一种反抗，有人说是我们赋予了这个过程意义，有人把「忘我」当作目的。也有这样的观点——「爱」是与生俱来的。这样的观点从生物进化的角度解释，说爱是一种态度、能力、是一种个性上的偏好。就像人类进化出恐惧以避险，爱也保留在我们的基因里，好有机会将基因延续下去。我仍然保留也有人不能继承爱的能力这一可能性，但赞同这个观点，如此讨论这些问题才有立足点。</p><p>既然理论上人人都有爱的渴望，艾·弗洛姆在《爱的艺术》里便把问题转向讨论现代资本主义对爱的消解。</p><p>爱不是一种关系，不存在义务。「认清生活的真相」的意思是不对生活抱有期待（有人把这种观点的产生归咎于童年时期父母关怀的缺失），你非得要意识到这点，不然后面的「爱它」就只是空中楼阁。大部分鸡汤讨论的并不是爱，而是被爱，不厌其烦地安慰读者值得被爱。畅销书们长篇累牍地教育大家如何做一个值得被爱的人。</p><p>如果我们把「爱」理解为「被爱」，那么现在这个年代完全不需要「爱」了。「爱」已经被原子化拆分进电影、小说、音乐，甚至一些聊天、陪伴服务。（让我们对机器人技术的发展保持乐观期待）然后会有人拉出原教旨主义的旗帜，说只有在与人的羁绊里产生的爱才是真正的爱——但你得花更多的钱。</p><p>不过，有何不可呢？既然爱是进化而来的，随着进化而去又有何妨？消费社会只是一个过渡的麻醉阶段，最终人类会达到佛教里放下爱欲的境界。《星际穿越》里将爱当作超越维度的能量，大概只是艺术家的乐观想像。</p><p>资本不关心爱，但它很懂得消费者的需要。政府也不关心爱，但它很在乎婚姻。它觉得离婚前应该先冷静冷静。那些科幻小说早就描绘了这样的图景，如果不是因为需要劳动力，而且没有婚姻的话，抚养一个小孩到能够劳动会给政府增加很多负担，政治家们也懒得理睬那些琐碎。</p><p>这个世界其实并不鼓励多样，比如社会和资本有时候还会以一种抹去女性特征的方式来鼓励平权——放弃生育、妳得像个男人一样干活。有人觉得实践自由主义的政府管理下的社会就多样了，大概也是一种偷懒的二元划分。资本主义社会的运转机制鼓励人消费，数字化的年代还鼓励你贴标签，这样他们就可以更精确地给你推送广告。我们完全有选择的权利，选择消费哪种食品、电影、来展示个性。艺术需要资本来体现价值，资本需要艺术来保值。它们互相成全。于是，我们的需求越来越高，我们的口味竟然有了标准，既方便被控制，又容易预测。好耶！</p><p>对，不能免俗。我也会在黑暗的屋子里当键盘侠，用一些宏大的问题逃离现实。听说「人都会慢慢成为自己想成为的人」，我开足了马力狂奔，追逐的脸庞却越来越模糊。我想起伍迪艾伦在电影里唠叨「只有我关心宇宙将会毁灭吗？」人确实很难关注到太长尺度的时间。但即便活在当下，明明是短暂的一生，却往往也如宇宙的毁灭一样离之太远。死亡是一个让人审视自己的好工具，从世俗的意义来说，可以让人改变对生命的看法，更恰当地投入生活，但也可能成为焦虑的来源。虽然如果认为死亡是唯一目的，虚无好像也就顺理成章了……</p><p>说了这么多并没有表达啥自己的观点，因为我对生活的看法异常幼稚或者说简单……虽然我觉得了解这些东西很有趣，而且能缓解焦虑，但我并不认同普通人一定要找到一个让自己好好生活的非常有逻辑的、纯粹的理由。人生的意义在于体验、在于创造……甚至说思考这个问题本身就是意义，都是非常好的说法，还带有一种现世关怀。一些流行哲学里说世间万物本质上不分彼此，都在走向宇宙的热死亡，我们可以致力于局部墒减与之对抗（虽然这毫无意义），或者加速它达到这种状态。这种说法似乎和信仰别无二致，都是把存在当作某种更宏大的、外在的设计的一部分。</p><p>社会需要维护一些普遍意义才能运转，个人如果不能恰当地把自身的世俗意义融入进去，找到自己在这个系统里的位置，自然会产生许多负面的情绪，更何况这世界大大小小的组织都充满了不能顺应变化的教条。我觉得精致的利己主义者正是一些聪明人在这种不契合中试图合理化自身的存在而产生的，这样他们才能快乐地生活而且不觉得自己是比喻里的「猪」。甚至还可以在犬儒精神里鄙视别人。但至少，做出选择也许不是真的自由，可「不言自明」的那些东西不审视一下总让我有被控制的感觉。</p><p>苏格拉底认为人性的本质在于理性，追求真理就会自动通往善。有人认为技术的发展会解决社会的不公不义。有观点说搞明白问题并不能解决问题，「为什么」下面总是还有「为什么」（如果真的想解决问题，还不如忽视掉问题），一直归因又回到了决定论。尼采哲学有个思想实验被一些人看作对决定论的挑战——永恒回归。永恒回归假定宇宙会永不停止的循环，每个人在做事前应该问问自己「这就是我想要重复无数次的事情吗」，达到成为你自己。成为自己还不够，还要再通过思考「我能怎么超越自己」来生活，成为超人。</p><p>一个年轻人，第一次感觉到整个世界和它的各个部分似乎都一致，互相结合，仿佛觉得自己有了什么真知灼见——倘若我在这胡说八道持有丝毫的这种想法，我也会原谅自己，哎，无知嘛。只是我还是做不到讨论一些细节，挥斥方裘、推演人性，那太自恋了。但也许我是在害怕暴露自己的缺陷吧。知道和行动始终是两回事，我们终将改变，但改变不会来得太快。</p><p>嗐，表达欲收不回手，文不对题、结构诡异。实际上是这段时间的一些读后感。说是「感」，搞不好也是误读。如果有什么值得一提的地方，那肯定是我抄的。如果哪里不对劲，那一定是因为我自己也没搞懂就在胡说。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>她</title>
      <link href="/2021/06/07/summer/"/>
      <url>/2021/06/07/summer/</url>
      
        <content type="html"><![CDATA[<p>她看到了夏天。一些六月，西瓜、汽水，还有关于日历和诗歌的比喻。连续三个夜的雨飘打着窗，直到昨天才放过她的耳朵。出租房的隔音效果并不好。去年这个季节她被疫情困在房子里，四肢舒展在凉席上，偶尔一次午休时总有蝉鸣把童年带进她的梦。她站在一处园子里，右手握着一把小镰刀，头上顶着奶奶给她戴的草帽。一只猫从豆角架间跳了出来，她嬉笑着追了上去。猫总是在她追不动的时候停下来。她蹲着呼唤它，过来呀，过来。猫警惕地望望她又望望天，随即眼神变得慵懒，坐在地上用舌整理自己的毛。她屏息缓缓朝着猫移动。身后突然传来奶奶的声音「我们要出去了噢。」</p><p>她转过身，然后奔了过去。她看见奶奶提起一个竹篮，猫从生菜里窜出来，匍匐着试图抓一只摇头晃脑的麻雀。她小跑着从菜园进了竹林。镰刀在她的手里变成了捕虫网，裙摆下的凉鞋也消失了。轻风充溢，带出沙沙的响。山泉从她脚趾间流过，她的脚掌粉红，沾着点泥，些许碎石挤在她掌心的皮肤传来一阵令人安心的痒。</p><p>她睁开眼，窗外的阳光裹着一层暮色。夏日的白天最后的光景，夜和昼的分隔总是不够干脆，这暧昧的黄昏。床尾是她的猫，有节奏的呼噜声和起伏挠她脚掌的绒毛。她坐起来，头发散在肩头背后。面上还保持着倦意，这是脸颊上的肌肉最轻松的状态。</p><p>她唤了声「咪咪」，我就醒了。我站起来，弓背释放疲劳。抬头，一声不吭地望了她一眼。我看见她眼眶边的泪痕，这一次来自梦里还是梦外呢？我朝她移过去，每一步都小心着不让爪子碰到她的腿。我用头蹭她的手臂，她便用手掌抚摸我的背做回报。她身上阳光的味道如此浓郁，在她身边，我变得活力又嗜睡，兴奋且沉默。</p><p>我从不询问，她总会主动给我讲起她刚经历的事。我能理解她的情绪，就像她来了我会高兴，她走了我会失望。她的梦啊、生活啊大概也是这样。我喜欢听她聊些开心的东西，因为除了摇尾巴，我不知道怎么做才可以安慰她的悲伤。她的身上，好像有很多走了就不会再回来的东西。</p><p>光线在消逝，窗子的轮廓在她的眼里模糊。我喵喵着唤了几声，她语气温柔，毫无顾忌地随着日落坠入我的心脏。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>近虑</title>
      <link href="/2021/04/24/recently/"/>
      <url>/2021/04/24/recently/</url>
      
        <content type="html"><![CDATA[<p>一直不肯写点更锋利的东西，因为就自己经历而言，总觉得直言某事如何如何，应当如何如何，这种行为要么太幼稚，要么容易惹人讨厌。而我确实是个糊涂且不愿意被人讨厌的人，非要为了表现得明白而去做一些明白的表达，这种行为本身让我感觉很谄媚。我现在也确实没有必要去做一些迎合世界的事情——这种说法其实有点讨巧，因为我本身也没有迎合世界的能力。我觉得我得多加练习，但懒惰、自身的糊涂等各种外部条件给了我逃避的机会。于是我选择逃避。</p><p>逃避吗？不，「逃避」这个说法本身也是一个暗喻。我不是「我本可以」男孩，我不会拿过去的无数个可能性搪塞现在，我摊牌了，我其实是害怕失败。等等，我害怕失败吗？</p><p>有一丢丢。但更多的其实是害怕竞争。</p><p>在必要的时候，我可以把这个答案交给别人，表现得坦诚且做好了那早已是过去式的准备。可内心那「这些竞争毫无意义」幼苗，仍然在不断生长，挠我的心脏。</p><p>我相信自己并不虚无。我曾对「断舍离」这种行为感到困惑，因为我一直是从无到有，并没有一个机会让我懵懂地拥有很多，然后猛然意识到，啊，我应该抛弃点什么了。我想我也天生是个佛陀的信徒，因为我也一直没有什么欲望。念书的时候，我把自己所有想要完成的事物列了出来，唯一需要的外界帮助是 2 到 3 万块钱。里面实际上没什么非要不可的东西，而且到了现在，里面有些项目我其实也已经没了兴趣。</p><p>我还曾假装成大人，说「现在这个时代，如果你不精致地利己，很难真正地过得快乐。」我在犬儒和实用里汲取到养分，准备大干一场。但我做不到。可以说，我觉得这太麻烦了。也可以说，我并不擅长这回事。对呀，这不就是逃避嘛。这世上有千言万语来批判、来讽刺这种行为，可我居然不觉得这无耻。我究竟是怎么了呢？</p><p>我是假的吗？在大多数愿意注意到我的人眼里，我是假的。也许有那丝毫的可能性——我就是真的呢？但问题在于——我其实不确定自己是不是真的。对于大部分我不理解的事物，我都可以把它当作黑箱。唯独对于我自己，关于那些我不理解的东西，我很难表示认同。</p><p>我有答案，我有很多个答案。其中几个漏洞较少的答案是我最近的依靠。寻找答案也确实是件有趣的事情。今年立了一个想要和别人多交流的 Flag，也是想要以这种途径去得到一些指教。互联网还是一个很好的渠道，但我已经很久没有善加利用了。之前为了追漫画打开了贴吧，回顾并删除了许多以前的帖子。我想，那时我多么年轻啊，却总是说着一些老气横秋的话——直到最近还有人点赞呢。如果不是看到自己的昵称，我搞不好会觉得这肯定是个很了不得的人吧。互联网又是多么虚假啊。我无法回到那种精神状态了，却又在尝试着捡起当初拥有的一些东西。</p><p>私聊别人要游戏的存档、求大佬带、复制粘贴水贴水经验……都是些冒犯别人的事情。但羁绊，可能就是需要从冒犯才能开始建立？我还不大明白，先从包装冒犯开始学习吧。</p><p>遇到了一个困惑。之前遇到了一个看完《缘之空》去了解伦理的家伙，想到自己总是逃避这些问题——意识到了这点，我便试着去面对。我觉得我内心其实是认同「道德相对主义」的，但是我并不会用它武装自己。我觉得它冷漠、无趣，我觉得在谈论道德时就应该谈论「我们应该如何如何」。在一个读者群看到这样的见解，大意是因为法律的有限，所有才有人们对侠义的痴迷。我也见到过相反的说法，说侠，是对法律的漠视。</p><p>「程序正义是对我们无能的安慰」我觉得这是一个非常有鼓动性且很虚无的观点。我们是无能的，接受这一点。保持敬畏地去完善这个流程，让我们接近正义。妄图通过某些手段（比如侠，比如暧昧的条文）去网罗一切，是无知且自大的。</p><p>我对相对主义的不喜欢就在于它对我在乎的许多事物的破坏，但我现在的水平并不能说出太多所以然。正义是没意义的吗？科学是没意义的吗？它产生了好多不可证伪的东西，好虚无，我不喜欢。我也接触了许多批评相对主义的内容，大多读不懂，我只能停留在这一步——我不喜欢这样的世界。</p><p>事物的复杂性总是打消我讨论的热情。我不会因为某件事物非主流或过于主流而否认自己对它的热爱，但问题在于，我热爱的作品大多都在这个社会的红线以内。因为自己的口味、自己的道德感恰好和所处的社会需要达成一致便沾沾自喜，我不喜欢这样。我讨厌「反正我也不 XX」这样的说法。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>评价外貌不礼貌</title>
      <link href="/2021/03/14/nothing/"/>
      <url>/2021/03/14/nothing/</url>
      
        <content type="html"><![CDATA[<p>接触到的大部分同龄人都认同「随意评价别人的外貌是很不礼貌的行为」，但少有人觉得评价一个人的身体素质不礼貌，几乎没有人认为评价一个人的性格不礼貌。女孩男孩们拒绝外貌歧视时表现得独立又绅士，转头批评一个男人娘、评价别人无趣不免让人失望。</p><p>把视线拉进一所学校，身材相貌、不及格的体育成绩、阴郁不合群是嘲笑与霸凌的频发地。然后步入社会，似乎在一定程度上评价外貌变得有点危险了（但当然完全没杜绝），可抬不起水桶的男孩、不喜欢说话的女孩仍然是能让大家放心嬉笑的绝佳话题。</p><p>可能在一定程度上，社会已经不再像校园这种充满了荷尔蒙的地方一样需要俊男靓女了，但它仍保持着野性，需要劳动力、需要集体主义。</p><p>一个人格的塑造不仅要花费漫长的时间尝试与自己和解，还要不断地接受外界的碰撞。想起了那个人参和萝卜的漫画，如果你是人参就为自己是人参而快乐，如果你是萝卜就为自己是萝卜而快乐。会有傲慢的人说他们不是在评价你，只是指出了事实，你大可以宽心地接受这些事实。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一篇读后感</title>
      <link href="/2021/03/14/review/"/>
      <url>/2021/03/14/review/</url>
      
        <content type="html"><![CDATA[<p>念书时有老师开课前在黑板上写了个句子，问同学们读不读得懂，大家纷纷摇头，表示每个字都认识，但就是连在一起不知道是啥玩意。然后老师便带着得逞的笑容说道，「知道这门课有多难了吧。」</p><p>那个句子其实没啥晦涩的术语，也不是结构复杂的长句，大家读不懂其实是因为——那是个完全没逻辑的病句。</p><p>后来发现很多读起来绕口的译著都充满了没有逻辑的病句。所以也一直相信那句话，翻译更重要的是语文水平而不是外语水平。</p><p>那时我无知且狂妄，还认同另一个观点，大意是只要有逻辑和概念，其实没什么是不能理解的。比如如果一篇文章找不到论据就给了结论，那是作者的问题不是读者的问题。</p><p>然后说类比，思路可以类比，科学却不能类比。一篇充满了隐喻的文章晦涩难懂，它是文学，不是科学。真正的晦涩难懂只建立在它那个领域的术语以及逻辑的复杂。你有逻辑，搞懂了基础知识，就有机会理解它。</p><p>还有我在编程书上看到的一个观点，大意是「如果一个概念的引入依赖于另一个尚未解释过的概念，那么就别先急着引入它。」我觉得这应该作为一切以教育为目的的书籍的信条，大多数教材的编纂者都应该把这句话抄写一百遍。</p><p>再然后就是我狭隘地觉得所有日常生活对话里的长难句都是病句，正常情况下没有人会那么说话。社科的费解之处还表现在它的许多术语是惯用词（当然这些词汇是先作为术语还是先在生活里被使用并不好说），以及一个词汇常在不同的语境下表达不同的含义。</p><p>但它还是有逻辑的。</p><p>有很多文章套了许多词儿，但常望文生意、或上下文并没有什么逻辑。许多人也用这种风格说话。嗐，我不觉得他们真正理解自己表达的东西。</p><p>当然按照惯例，文章末尾我得自我批评，我自己就是这样的人，又甚至我还茫然不自知。嗐。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>好好生活</title>
      <link href="/2021/02/27/life/"/>
      <url>/2021/02/27/life/</url>
      
        <content type="html"><![CDATA[<p>去年下半年，就像在这数年间反复做的那样，我又投入到一个新环境，与一群性格迥异的陌生人相识。我一直觉得「性格」不过是从你为人处事的方式中提取出来的标签，我抱着这种想法看待别人，也一直以这样的心态做我自己。从某种意义来说，新环境其实是一个非常好的与外界打交道的练习场所。持以「我们只活一次，我们永远年轻」这样的想法，任何一个举动都可以看作是为了丰富决策库以备将来。不管从哪方面来说，旧世界里的任何改变都会显得刻意、浮躁。而聚焦于人——人们总是更习惯于从一而终的人设。</p><p>这段日子里我在干嘛呢？排除两点一线的琐碎，大部分时间都在漫无目的地冲浪。于我而言，网络从一个孤僻小孩的避风港变成了很多其它的东西，好在它也始终是一个有趣的玩具。有一阵子我惊讶地发现自己似乎没什么真正的爱好——真正的爱好。啥也不想干，觉得一切都没意思的紧。只有下班走路回住处的那十多二十分钟，戴着耳机听些音乐，才感觉到些许惬意。高架桥的电梯晚上八点就下班了，黄昏时某个地方常有人拍照，卖烤红薯和煮花生的地方摆起了烤鱿鱼的摊子……日常反复，我总在路上看到熟悉的场景，心底冒出昨天也冒过的念头。</p><p>爱好这种东西也有倦怠期吗？也许我自以为是的爱好就像大多数中学时的恋爱一样，它产生并维持于占有欲和优越感，而不是真正的爱。记忆也相当配合且熟练地清扫了我脑子里的各种书袋，于是那一个个名字、一段段故事都消失了，就像我也曾反复练习过的数学公式。</p><p>和林酱在元旦看了电影《心灵奇旅》，我戴着两幅眼镜坐在第一排，只有把头斜仰成一个怪异的姿势才能舒服地看清楚画面，然后保持着这个别扭但缓解脖子酸痛的姿势泪流不止。在电影院门口，林酱又重复一次之前也提过的话，「好好生活」。上一次说这句话时，其实暗含着苦中作乐之意。我想这不合语境，然后猛然地，「要是死了，就听不到莫扎特的曲子了」这类中产阶级才应该有的呢喃又不断浮上心头。如果这就是解答的话——嗐，如果这就是解答的话，那些绝境里的人又是怎么活出意义来的呢？就算是健康，也不是理所当然的啊。</p><p>我一再告诫自己不要过分关注那些宏大叙事，应当远离精英主义。可我经常地，发现自以为的平民视角，不过是自己的视角。我仍然双标，经常拒绝相信我看不见的东西。就像不加训练的人都倾向于惰性，似乎一个家伙如果想要过得真正开心，现实总是裹挟他朝精致利己的方向狂奔。</p><p>我说我花了这么大的力气才接受自己，怎么可能随随便便就改变。也许我是真的接受了自己，也许我只是不想让自己之前的投入显得廉价从而拒绝改变？一切都有可能，而且后者听起来反倒合理些。</p><p>老谭说尝试在爱情上建立并维护一段关系麻烦的地方就在这——往往需要你做出更多的改变。当然，两个人都会改变。但在大部分情况下，彼此都觉得一个人需要承担两个人的负面情绪和疲惫，生活变得更复杂了。而社会总是宣扬无私与付出——那种一件麻烦事由两个人来承担的健康关系似乎总是少有的。老谭倾心于独立的灵魂，但这样的灵魂往往看不上，也不需要他。</p><p>老谭给我讲了一个笑话，他说是自己编的，但模仿了伍迪艾伦。大意是这样的「时间是相对的。比如婚姻会使时间因为彼此忍受而显得更长，这样双方都有了更多的时间来玩耍。一个人的时候最多只会感到寂寞，而再完美的爱情都会让人体会到哀愁、失望等情感。综上，婚姻的性价比更高。如果可以的话，结婚，但不要恋爱。」</p><p>上周和一神交已久的大学同学见面，有种网友面基的感觉。聊到他说看完《缘之空》后找了很多谈伦理的书来读，我着实吃了一惊，觉得这家伙实在太有意思了。然后想到我总是下意识地拒绝去考虑这些问题，我不能接受这些东西，我认为这是不道德的，但我没有也不会去研究这些东西。比如关于伍迪艾伦的负面新闻。我本可以就作品聊作品，就人品聊人品。可我总是拒绝去看那些负面报道，心里隐隐期待他不是那样的人。很多东西都是这样，房间里有大象，但我不去看它，仿佛它就不存在。</p><p>嗐。就在我一边写着这些有的没的一边浏览网页的时候，突然看到了吴孟达先生去世的消息。长大的过程总是伴随着一边看着比自己年轻的人功成名就，一边目送自己熟悉的人离开。父亲对我说了些生老病死的事，我不大喜欢他讲得那么赤裸，但也无言以对。之前我说所谓成长不再是假装很喜欢喝啤酒，而是不得不独立做出很多抉择，并且承担它们带来的任何后果。而现在，虽然我一直想要逃避，却也不得不接受，成长还意味着去接受各种各样的期望和许许多多的责任。</p><p>唉，太过私人化的事儿我总是不想表达得太清晰，我又开始暗喻，开始拧吧。我借用各种意象表达自己的情绪，我看到你说自己在海边观月，便急忙打开窗，似乎能闻到月亮带来海风的咸味。而你一定性感得像是图书馆里被人打开但忘记归还的书籍，随意而神秘。我则俯视着我，他是个假装热情的性冷淡，和我正好相反。我咚咚咚地敲门，他连眼皮也不抬一下。他想虚度，那就让他虚度吧。</p><p>可我还不能允许自己以俯视的眼光看待这个世界，我只能悲悯我自己。不如把一切都降维到「孤独」这一层次，表现得自己似乎在智识上占据高位。「孤独」多普遍啊，足以囊括所有人所有事。然后我就像所有刻板印象以及故事里提到的那个人一样，参加聚会却远离人群，重复默念着「他们根本不懂我有多擅长玩摸乌龟」。我有多长时间没做过那种英雄式的美梦了呢？梦中的我拯救了世界，悄然离去，深藏功与名。美梦和梦想两个词没多大关系但消失的时机倒是出奇地一致。有点伤感，在这世间的快乐又少了一大块，嗐，早就少了一大块。有点陈词烂调，但世事确实大多如此——当你意识到的时候，早就已经晚了。</p><p>我狭隘、偏激，总是自以为是地理解大人，每当现实和猜测吻合时，我就不动声色地雀跃。我想学着像他们一样表达同情，但什么也不做。可我做不到。一想到将什么都不做，我甚至连同情都不好意思表达。而不够生活的用词，突然的热情，总让我觉得谄媚。「会有更高级的快乐」这种说法我能接受吗？「快乐本身是无知才有的特权」这种说法我能接受吗？将快乐寄托于智慧、经济活动、甚至政治有什么本质不同吗？后面这三个问题并没有什么实质价值，只不过是我想卖弄一下刚刚搜索到的内容。</p><p>这篇胡扯没啥主题，大概算是对这阵子一些片段的总结。标题取林酱说的「好好生活」，那我意识到自己的生活方式了吗？有审视过自己的生活方式吗？嗐。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>强行聊聊阅读</title>
      <link href="/2021/01/10/start/"/>
      <url>/2021/01/10/start/</url>
      
        <content type="html"><![CDATA[<p>我又回到下不了笔的状态了。以前我会说只要我真诚，写下当前的状态，那就是有意义的，可最近我总是误觉得自己能够看到一些事物更里面的东西——但越来越觉得这一切都太复杂，我做不到毫无顾忌就能轻松地得出结论。</p><p>但我还是有好奇心，有表达欲。那让我抛开什么什么主义，立足于一个小点聊些东西吧。</p><p>聊读书吧，可能是我最近才开始注意，身边频繁阅读的人越来越多了。</p><p>之前我其实一直不大清楚为什么那么多人鼓励读书，我不知道阅读的「意义」是啥。意义这个词可能有点暧昧，他们会说「没有意义就是意义」，「思考意义本身就是意义」——这不是我想说的。</p><p>我不知道别人是抱着怎样的心态来鼓励别人读书的。他们说读书有用，是指那些技能方面的书籍吗？</p><p>我稍微谈谈。</p><p>我现在不大能赞同「读书最重要的是大部分内容都忘记了，最后留在你心里的东西」这类说法，我觉得它们太模糊。<strong>这种说法的唯一用途在于鼓励大家阅读，培养大家的阅读习惯，给予慰藉。</strong> 不要管意义，你只要去做。</p><p>而「通过阅读来提高修养」这种说法背后则蕴含着一种道德歧视。「阅读」这个动作或行为本身并没有什么深刻的含义，但文字是信息密度相对高的载体，它还拥有其它信息载体没有的一些优势。当我们讨论「阅读」时，如果只愿意沉醉在原教旨主义的优越感而不去分析优势与不足，那一定是有问题的。</p><p>批评小视频，批评网络——批评媒介，反思是必要的，但是：柏拉图批评过「书写」，叔本华批评过「阅读」……而且我觉得他们批评得有道理。可我们大多数人都只是普通人，达不到这样的程度。我又想起许多的主义、各种教旨，我从不觉得自己信奉它们——但我会向它们的一些说法靠拢。我还想起伍迪艾伦的电影里有一个老笑话，大意如下：</p><p>「『大夫，我兄弟疯了，他以为他自己是一只鸡。』然后医生说：『那你怎么不把他带来？』那家伙说：『我是想带他来着， 可是我需要鸡蛋啊。』」</p><p>尽管世界偶尔会表现得疯狂甚至荒谬，但我们还是不得不经历这一切，因为我们大多数人都需要鸡蛋。</p><p>说回阅读吧。存在是有原因的——我认为阅读是有目的（动机）的，即便一个人不觉得，下意识里也一定有。这是我的观点。这里的目的并不带功利色彩，它只是一个立足点。有个朋友说他觉得「目的」在中文里的意思并不比「意义」这样的词更明确。我觉得他说的有道理。我想表达的是我们阅读的深层次动机——人为什么想要去阅读呢，总有个基础吧？</p><p>对于那些尚未意识到的目的（动机）来说，阅读可能是抚慰孤独的方式，逃离现实的途径，或仅仅为了填补内心的优越感等等。</p><p>而能意识到的目的（动机），我觉得分为三类。一，消遣。打发时间，满足求知欲、好奇心都算消遣。二，用于生活。技能提升，厚黑啥的都算读以为用。三，解决人内心的焦虑。</p><p>这里不展开了。然后最后我不赞同「书读百遍，其意自现」这种说法，我觉得只有经历和道理相互应证才能丰富我们自身。</p><p>还有两个说法，一个是把书读厚，一个是把书读薄。中学时我以为的把书读厚，就是在一本书上写上自己的想法，做上许多的笔记。我现在的一点浅薄看法是，一本好书总是从抽象的高度论证出道理，而那个道理下有着许许多多的例子，这就需要读者自己的经历或者收集资料去比对佐证。这样，一本书就读厚了。</p><p>而把书读薄，则是读者经历得多了，知道的多了，就反而越能理解书里的许多想法，这样读上几遍，就能把一本书的内容吸收掉。这样，书就读薄了。</p><p>我觉得一本好书不是给人认同的，最好是给人启发。其它很多事物也同理。现在的意见领袖太多了，他们生产各种大家能认同的东西。我们消费他们的内容的同时，我们也是他们的商品。算法，算法更甚。</p><p>如果没有接触一手信息的能力，尽量消费那些能告诉我们信息来源的二手商。</p><p>很多搬运工不愿意告诉大家内容来源。比如转载小视频的、搬运公众号的，甚至明明别人允许转载还要把人家作品的水印打码——因为他们害怕你越过它去来源。抛开法律和道德的评判，<strong>他们赚钱的基础是信息壁垒，这层壁垒是很容易打破的。</strong>——只需要一丢丢好奇心。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>外星人的思维是透明的</title>
      <link href="/2020/11/08/robot/"/>
      <url>/2020/11/08/robot/</url>
      
        <content type="html"><![CDATA[<p>「一定有很多后知后觉的事，比如中学时对女孩的好感和当时自以为读懂了的名著。」她这样对我说。</p><p>能遇到一个见面后可以坦诚地询问「你最近有在读什么吗」的家伙是很难得的，特别还是一位异性。我当时心里盘算着很多不符合当时气氛的想法，而且说真的，没太懂她话里的意思，但还是认真地盯着她，用期待的眼神做出鼓励她接着说下去的样子。</p><p>可是我被她看穿了。</p><p>她说「别来这一套，你可能觉得倾听是一种聪明的方式……别偷懒，告诉我你自己的想法，真实的想法，经过思考的想法。」</p><p>相比尴尬，我当时庆幸的感觉要更浓烈些。想着还好对方误以为我在使用某些小诡计，而没有看出我其实一无所知。</p><p>我先承认说自己对这玩意了解不深，然后靠着自己在书籍和网络里了解到的东西纸上谈兵了一翻。她摇了摇头，像是有点生气了：「说你自己的想法！」</p><p>我后来懂她的意思了。把她送走后我去过一个人人都热衷讨论历史和政治的星球，人人都在谈论以确认自己确实可以谈论。身处其中时我冒昧地觉得他们都很肤浅，每个人都在重复新闻里说的话。我一如既往地沉默，有点怀念她当时板着脸的样子。恍然间，看见她站了出来，干脆利落地堵住了我的表达欲。「你要先思考，说出你自己的想法！」</p><p>宏大的话题犹如春药，我又差点迷失在这场跨种族精神群交里。</p><p>和她相处的那阵子，我曾草草翻过的名著一部也没派上用场。有一次和她聊起一个话题，好不容易动了脑筋，说出一句自认为非常有道理的话。她却冰冷地指出这个观点是由谁在哪个年代提出来的，然后还举出了几个对于这个观点非常尖锐的例子。直到我再三保证这确实是自己思考后的产物，然后给她细叙了自己的思维逻辑，她才缓和了脸色。</p><p>她呼了口气，肯定了我，然后说道：「确实，现在这些东西都不重要。文学领域一百年前就没有人类的参与了。即便是当初那个人力创作的年代，你能想到的也早就被无数人描绘过千百遍。可是你不觉得，这很有趣吗？我是说，思考。」</p><p>我知道她的意思，最近有个领袖是机器人的文艺复兴党派，崇尚人力年代的「思考」，宣传口号是「思想自由」，针对现在这个概率社会提出了「不要黑箱政治」的口号。这个党派不仅吸引了许多运算能力弱的机器人，也吸引了不少年轻的自然人。机器人渴望平等，希望能通过「思考」弯道超车；年轻的孩子看到那些人类原来也很厉害的信息便激动不已，产生了强烈的共鸣。</p><p>我终于松了口气，却有点失望。眼前的女孩被符号化为一个追求流行的标签，进入到我熟悉的领域。于是我装作坦然地问她：「你是什么时候实现二次启蒙的？」</p><p>她反问：「二次启蒙？」</p><p>她当然不知道这个词，因为这是我刚生造的。</p><p>我说「就是什么时候自我意识觉醒，意识到这些的……比如思考很重要这类。」</p><p>她说「当然是从我了解『思考党』后，我第一次认识到围绕着我们这个社会的东西。比如说人类和机器人一起生活……你知道吗？听说人力社会是没有机器人的哦，而且那个时候他们还会担心有一天机器人会毁灭人类。」</p><p>我知道，其实人力时代也是有机器人的，只是没有进化到现代社会里这么高级的程度。</p><p>「不是所有东西都是理所当然的，比如我们现在的社会是由一台超级计算机和一个普选出来的代表团共同治理的，难道这就是最好的方案了吗？超级计算机仅仅诞生了一百多年 —— 地球上的智力活动就停止得差不多了。搞笑的是，计算机认为研究算法优化的对社会的贡献太低，应该停止，代表团就真的停止了。</p><p>我怀疑它做出这个判断是因为程序出了 Bug，导致它伦理判断模块失效。仔细想想，人类不才是阻止现在这个社会进步的唯一障碍吗？这样下去人类说不定真的会被计算机消灭。如果我们当时选择了另一条路，可能我们现在已经住在外星了吧？可现实呢？人类越来越蠢，贪图享受……」</p><p>这种说法我太熟悉了，「人类越来越蠢」、「网民不会独立思考」、「没有同情心」……她也是一个有着知识分子的骄傲，却没有知识分子的怜悯的家伙。这么说的时候，也一定不包括她自己吧。</p><p>够了够了，我改了一下参数，重新点击编译的按钮。她的双眼一闪，开始热加载代码。</p><p>「我觉得这是二次启蒙，是自我意识的再次觉醒。每个人都应该经历这么一次，去质疑所有的理所应当，然后选择抛弃或者接受它们中的某些部分，继续活下去。」她这样对我说。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1024</title>
      <link href="/2020/10/26/1024/"/>
      <url>/2020/10/26/1024/</url>
      
        <content type="html"><![CDATA[<p>痔疮因路途颠簸被自行车坐垫磨破的夜晚，凸起的颈椎在围巾上顶出一个不大不小的凹点。强风拂面，犹如重力拉扯身体。孩子入眠，星星睁眼。别读我，理解我就是杀我。裹着被，抱着夜。双腿在夜里依偎，手指总婆娑键盘。没有人应该过劳死在周六的白天。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谈谈应届生与社保卡办理（以成都为例）</title>
      <link href="/2020/10/15/uebcka/"/>
      <url>/2020/10/15/uebcka/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>这篇文章主要谈了以下几个问题：</p><ol><li>怎么办理社保卡（主要困惑处在于之前办过社保卡现在该怎么做）</li><li>归属地转移与参保关系转移</li><li>老家缴的医保费用，算是缴纳社保吗？</li><li>社保卡和医保卡有啥区别？</li></ol><p>本文源于自己网上了解到的消息与经验总结，难免疏漏或错误，还望朋友们不吝指正。希望能对看到此文的朋友有所帮助。</p><h2 id="正文"><a class="markdownIt-Anchor" href="#正文"></a> 正文</h2><p>主要简单聊几个我在社保卡办理过程中感到困惑的概念，建议有尝试过了解社保卡办理以及感到过困惑的朋友往下看看。</p><p>不管是啥原因，反正毕业了，工作了，现在你决定自己办理社保卡。</p><p>办理社保卡的前置条件有两个：以前办理过，以前没办理过。</p><p>以前没办理过那就好整了，通过线上或者到能办理社保卡的银行去柜台直接办理即可。</p><blockquote><p>成都可以关注微信公众号 <strong>成都市12333</strong> 申办社保卡。</p></blockquote><p>那以前办理过呢？</p><p>不少人以为自己没办理过社保卡，结果去申请时却被告知办理过了……对应届生来说，以前办理过社保卡大概就这两种情况：<strong>1、学校办的；2、老家办的。</strong></p><p><strong>怎么确认自己办没办理过呢？</strong></p><p>1、直接去银行柜台查询。</p><p>2、通过线上查询。（成都可以关注微信公众号 <strong>成都市12333</strong> 查询。）</p><p>要是办理过社保卡，也有两种情况：1、社保卡未激活；2、社保卡已激活。</p><p>激没激活我们先放到一边，关注另一件事：<strong>社保卡的归属地与你现在缴纳社保的地区。</strong></p><p>如果你现在拥有的<strong>社保卡的归属地和你现在缴纳社保的地区在同一个省市</strong>，那么直接激活现在的社保卡就 OK 了。</p><p>如果你现在拥有的<strong>社保卡的归属地和你现在缴纳社保的地区在同一个省，不同的市</strong>，你可以把卡激活后，办理<strong>归属地转移</strong>至缴纳社保的市。如果你的卡尚未激活，也可以把卡注销了，在缴纳社保的市重新办理。</p><blockquote><p>成都可以关注微信公众号 <strong>成都市12333</strong> 办理社保卡归属地转移。</p></blockquote><p>如果你现在拥有的<strong>社保卡的归属地和你现在缴纳社保的地区在不同的省份</strong>，你可以直接在缴纳社保的省市直接办理社保卡。</p><blockquote><p>因为现在可能同一个省社保系统已经联网了，但不同省份之间仍不互通。</p></blockquote><hr><p>对于大部分应届生来说，对社保卡的了解到此就差不多了。但是还有一个概念 —— 参保关系转入。</p><p>由于现在的社保政策，倘若你在 A 省的 W 市缴纳了几年社保，现在你又到了 A 省的 Q 市开始缴纳社保。按上文的说法，你可以通过 <strong>社保卡归属地转入</strong> 在 A 省的 Q 市使用之前的社保卡。但是 —— 仅办理归属地转入，之前在 A 省 W 市的参保缴费记录是不会同步过来的。</p><p>如果你想将之前的 <strong>参保关系（包含缴费年限和余额）</strong> 也弄过来，就得办理 <strong>参保关系转入</strong>。</p><p>同样，参保关系转入可以去柜台，某些地区也可以线上办理。（成都可以下载 12333 APP 线上办理）</p><p>参保关系这玩意涉及到社保政策 —— 养老金的发放。比如你可以领养老金了，但是你之前在多个地方缴纳过社保。政府会<strong>以你缴纳年限最后达到十年的那个城市的平均工资水平为参考</strong>来给你发放养老金。如果你每个地方都没达到十年，会把你的养老保险关系和资金转到你的户籍所在地按规定给你发放养老保险。</p><hr><p>因为应届生一般之前都没缴纳过社保，所以大多数朋友不涉及这一块。</p><hr><p>谈到应届生缴纳社保的话，还有一个常令人感到困惑的地方在于：<strong>我在老家缴的医保费用，算是缴纳社保吗？</strong></p><p>在老家或者学校里缴纳的医保费用是不算缴纳社保的。在老家缴纳的一般是「农村合作医疗保险」或者「城镇居民医疗保险」，这个缴纳一次只管一年，也不会涉及到参保年限。学校缴纳的一般是「大病保险」，同上。</p><p>大致来讲，<strong>缴的医保费用只激活了部分医保属性，并不涉及社保。</strong></p><hr><p>还有一个问题：社保卡和医保卡有啥区别？</p><p>大多数时候这两个说法都指的<strong>社保卡</strong>。因为现在社保卡已经包含了医保的功能。即便硬要从概念上区分，实际上社保卡也可以当作医保卡来用。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>而秋</title>
      <link href="/2020/10/08/autumn/"/>
      <url>/2020/10/08/autumn/</url>
      
        <content type="html"><![CDATA[<div style="text-align:center">长满了石苔的巷子<br>白昼越来越短的秋季<br>装过猫和毒药的车厢<br>途径能看得见星星的夜<br>枕着诗集的乘客<br>逃往清晨<br>滑倒在石板路上的土狗<br>没有梦见乡愁的人</div>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蝉鸣将梦涂满儿时的夏天</title>
      <link href="/2020/08/15/summer/"/>
      <url>/2020/08/15/summer/</url>
      
        <content type="html"><![CDATA[<div style="text-align:center">他把早餐定义为醒来后的第一顿饭<br>他大块的时间被挥霍在想像里面<br>他有妄想、有计划、有梦<br>却从未付诸实践<br>他喋喋不休 以掩饰孤独感<br>他思考、写作 是应对焦虑的手段<br>他七岁时蹲在地上瞅蚂蚁<br>觉得做着不亚于拯救世界的工作<br>他十六岁时伏在课桌做卷子<br>想像着未来的三点一线<br>他如今将一天七三分<br>忙于生存<br>他有时候感觉忙得毫无意义<br>生存也毫无意义<br>他没有悲伤、没有喜悦、没有心安理得<br>他邀请书上的名字来脑海里相见<br>他感受到许多双或冰冷或温暖的手<br>带来穿越了时间的抚慰<br>他的第一个问题还没结束<br>无数的困惑接着涌现<br>他的优越感燃起了 又很快熄灭了<br>他的表达欲燃起了 又很快燃尽了<br>他明白了 他总是误以为明白了<br>他忘记了 他总是想起于不经意间<br>他以为自己从来不曾被理解<br>他以为周围的人全是笨蛋<br>他因此觉得自己独特<br>他因此认识到自己的平凡<br>他害怕自己并非明珠而不敢刻苦琢磨<br>他又有所期冀 遂疏拒人群 甚至想要远离人间<br>他也曾用「如果」来搪塞现在<br>他也曾立志与「要是」一刀两段<br>他想起了靠着墙自省的夜晚<br>他想起了耳机里的无人声环<br>他已经三年没有得过感冒<br>他自喻喜欢读书 其实书页没翻过几篇<br><br>这才是你啊朋友<br>只有你知道的你<br>你终于感受到你<br>你尝试着认识你<br>你不再问为什么 却没有停止思索<br>你说 用生活充实自己<br>你不能下定决心<br>你的怀疑多过问题<br>你质疑 质疑一切 质疑「质疑」本身<br>你看着你 又看向外面<br>你没有继续向外看<br>你说 哦对 这是「你」<br>「那我在哪里呢？」<br><br>他来到三伏天 连手心也开始冒汗<br>人流像是齿轮在带动城市旋转<br>高楼 挡住云彩约会视线<br>也阻止了他抬头的打算<br>却没能止住 天空被梦涂满童年</div>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对 React 的初步理解</title>
      <link href="/2020/07/25/start-react/"/>
      <url>/2020/07/25/start-react/</url>
      
        <content type="html"><![CDATA[<h2 id="通过-javascript-写页面"><a class="markdownIt-Anchor" href="#通过-javascript-写页面"></a> 通过 JavaScript 写页面</h2><p>在 React 中，页面的编写被融入进 JavaScript 代码。</p><p>比如在一个 HTML 网页，写一个如下的简单界面元素（标签）：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">没错，这就是一个简单的标签。</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在 React，会这样写：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> element = React.createElement(<span class="string">'h1'</span>, <span class="literal">null</span>, <span class="string">"没错，这就是一个简单的标签。"</span>);</span><br></pre></td></tr></table></figure><p>而在 HTML 中，要使如上的 <code>h1</code> 标签在网页上展示出来，一般会放到网页结构里：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">没错，这就是一个简单的标签。</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在 React 中，需要使用 <code>ReactDOM.reander()</code> 函数：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> element = React.createElement(<span class="string">'h1'</span>, <span class="literal">null</span>, <span class="string">"没错，这就是一个简单的标签。"</span>);</span><br><span class="line">ReactDOM.render(</span><br><span class="line">&#123;element&#125;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>而 React 引入的 JSX 其实是对 <code>React.createElement()</code> 的封装，上面的效果如果使用 JSX，代码可能会是这样：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> element = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>没错，这就是一个简单的标签。<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">&#123;element&#125;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>看上面这段代码，我们写 HTML 标签的方式和以往在 HTML 页面中编写是类似的，让人稍微惊讶的是，它 <strong>将标签赋值给了一个 JavaScript 变量</strong> 。这是 JSX 提供的写法。</p><p>回顾一下，按我的简单理解，React 做了一件事 —— 把 HTML 标签的编写融入 JavaScript，为此，提供了 <code>React.createElement()</code> 。</p><p>React 提供的 JSX 则对 <code>React.createElement()</code> 又进行封装，使 HTML 元素的编写符合以往的编写方式。（而不是传参这种别扭的方式）当然，JSX 的功能非常强大，条件渲染、列表渲染之类的这里就不细表了。</p><p>现在达到的效果便是：通过 JavaScript 写界面，且实际编写方式和以往在 HTML 中操作差别不大。</p><h2 id="组件"><a class="markdownIt-Anchor" href="#组件"></a> 组件</h2><p><strong>将页面的编写纳入 JavaScript 后，界面和逻辑便被统一为 JavaScript 代码了。</strong> 一个组件往往封装了界面、状态、逻辑，在 Vue 中，一个组件就是一个 <code>.vue</code> 文件，而 <strong>在 React 中，一个组件就可以是一个 JavaScript 函数或者一个类</strong> 。</p><p>React 有两种组件：函数式组件，类组件。</p><p>还是拿上面的 HTML 标签举例，把它封装为一个函数式组件，可能是这样：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Come</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>没错，这就是一个简单的标签。<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>封装为类组件则像是这样：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Come</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>没错，这就是一个简单的标签。<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>值得注意的是，所有的 React 组件都必须是 <strong>纯函数</strong>。纯函数意味着该函数对于给定的输入，都产生一个相同的输出。简单来说，该函数内部会用到的变量，外部都不能修改。不然即便每次都给一个确定的输入，外部改变了里面会用到的变量，它的输出也会有变化。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>这也是 React 强调的「<strong>数据的不可变性（immutable）</strong>」。</p><p>这儿函数内部的变量在 React 被称为 <strong>局部状态</strong> 。在官方文档 <a href="http://react.html.cn/docs/state-and-lifecycle.html" target="_blank" rel="noopener">状态(State) 和 生命周期</a> 中，由函数式组件引入到类组件，简单解释说「类定义的组件有一些额外的特性，比如局部状态。」。我觉得它为了入门把这儿简化了，因为函数式组件也可以通过闭包实现自己的局部状态……</p><blockquote><p><strong>可能我理解错了。</strong></p><p>函数式组件和类组件从内部来说有什么区别，我也没深了解过。</p></blockquote><p><strong>将组件抽取为类后，组件的扩展就可以使用继承来实现了。</strong> 这点是不同于传统 HTML 编写的一个有趣之处。虽然 <strong>官方并不建议使用继承来扩展组件</strong>。</p><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><p>上面就是我对 React 的初步理解，也是我初次接触 React 感受到的，不同于我之前接触过的界面编写方式（传统界面编写方式、Vue）的地方。</p><p><strong>当然，理解可能有误。</strong> 保持敬畏，先到这吧。</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>纯函数是函数式编程中一个核心概念。 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谈谈 Linux 与 GNU/Linux</title>
      <link href="/2020/07/22/GNU-Linux/"/>
      <url>/2020/07/22/GNU-Linux/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>之前看到提问「Linux 与 GNU/Linux 的区别」，当时刚好在读《自由软件，自由社会：理查德·斯托曼选集》这本书，里面提到了这个，就按着记忆写了个回答。</p><p>以下算是读书笔记吧……</p><p>虽然我常觉得对着一个定义深究它到底是啥玩意没太大意义，但是导致这种结果的这个过程还是很有趣的。就像是「这也太像我的叔叔奥斯卡了吧！」，没什么技术性质的偶然被民意裹携成为官方钦定的例子数不胜数……「动画」还是「动漫」？「ins」还是「IG」？</p><p>不过在当前的环境下，任何一个偶然都会被当作（背后势力）营销就是了……</p><hr><h2 id="正文"><a class="markdownIt-Anchor" href="#正文"></a> 正文</h2><p>百科版：<a href="https://zh.wikipedia.org/wiki/GNU/Linux%E5%91%BD%E5%90%8D%E7%88%AD%E8%AD%B0" target="_blank" rel="noopener">WIKI_Linux命名爭議</a></p><p>首先引入自由软件（free software）这个概念，注意是「自由软件」而非「免费软件」。自由软件意味着用户可以自由地对该软件进行使用、复制、修改等。</p><p>Richard 是个代码界的革命者，一生都在为「<strong>消灭代码私有制</strong>」这一目标奋斗，他倡导自由软件，那要做自由软件得先做个自由操作系统啊，你软件是自由的，运行在别人的非自由操作系统也不大合适吧。</p><p>为了这个目的，Richard 便尝试着组织开发一个自由的操作系统，这个操作系统被命名为 GNU。</p><p>实际上，GNU 往往指代着自由软件这一整个计划甚至思想 —— 即消灭代码私有制。</p><p>比如 GNU General Public License，缩写是 GPL，就是基于 GNU 的一种软件分发协议，用这个协议的话就代表你的代码遵循 GNU 的哲学，用户可以随意地使用、复制、巴拉巴拉……</p><p>GNU 是 「GNU is not Unix」的缩写，Unix 是当时的商业操作系统，GNU 这个名字就代表着与私有操作系统的界限划分。（有那味儿了）</p><p>GNU 开发到后面就差一个内核了，这个时候项目组也正在做自己的内核 Hurd，不过 Hurd 离可用还有一定距离，<strong>刚好 Linus 的 Linux 内核也发布一阵子了，完成度也不错，就使用了 Linux。</strong></p><blockquote><p>当时 GNU 已经完成了除操作系统内核外的大部分软件，比如 Bash、Glibc、Gcc……</p><p>Linus 在上面这些软件的基础上开发出 Linux。（GNU 兼容 Unix，所以虽然 GNU 操作系统尚未完成，但上述这些软件是可以运行的。）</p></blockquote><p>（PS：Richard 当时本来想提议命名项目组开发的内核为自己女朋友的名字，后来这事因为用了 Linux 就泡汤了，而且 Richard 后来也和女朋友分手了。）</p><p>使用了 Linux 内核的 GNU 便是 <strong>GNU/Linux</strong> —— 但这个称呼有争议，部分人提倡使用 Linux 命名。两个称呼的优劣以及由此产生的争议不多提。</p><p>现在的语境下，Linux 基本泛指一切使用 Linux 内核的操作系统。</p><p>我觉得，按哲学思想与功能来区分的话：Linux 指 Linux 内核，GNU/Linux 指 GNU 项目与 Linux 组成的操作系统。</p><blockquote><p>Linux 内核的开源协议是 GPL。</p></blockquote><p>GNU/Linux 遵循 GNU 的哲学，系统只使用自由软件。而现在的各种「基于 Linux 的发行版」，便是基于 GNU/Linux ，再打包一些其它软件（比如桌面环境），做一些配置，提供给用户。</p><p>打包些软件这一步骤，为了提供便利，可能就会打包些非自由软件。</p><p>如果打包了非自由软件，这时再称 GNU/Linux 其实也不大合适了。</p><p>啥是非自由软件呢？不遵循自由软件协议（GPL）的都是非自由软件……还是排除法好理解些。值得注意的是，开源不一定意味着自由 —— 虽然 GPL 是一种开源协议，但开源协议有好多种呢。开源只意味着公布源代码。</p><h2 id="richard-与-linus-对该命名的发言"><a class="markdownIt-Anchor" href="#richard-与-linus-对该命名的发言"></a> Richard 与 Linus 对该命名的发言</h2><p>对命名的讨论太多了，还是拿 GNU 与 Linux 各自的领袖人物的发言举例吧……</p><p>今天有数千万个用户，正在使用的这个操作系统，是早就已经开发好，让他们可以自由的使用。但是他们不晓得，因为他们以为这个系统是Linux，而它是由一个学生“只是为了好玩”（just for fun）而发展出来的。 ——理查德·斯托曼</p><p>好的，我认为这个称呼是合理的，但只有你真的做了一个Linux的GNU发行版时，这才是合理的……这就像是我觉得“Red Hat Linux”，或“SuSE Linux” 或“Debian Linux”这些名称是很好的，因为如果你真的做了一个你自己的Linux发行版时，你必须要帮它取个名称，但是要把Linux全部通称“GNU Linux”，我觉得这很荒谬。——林纳斯·托瓦兹</p><p>上面是从 <a href="https://zh.wikipedia.org/wiki/GNU/Linux%E5%91%BD%E5%90%8D%E7%88%AD%E8%AD%B0" target="_blank" rel="noopener">WIKI_Linux命名爭議</a> 摘取的两人发言，单独看可能有歧义。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>毕业后的一天</title>
      <link href="/2020/07/16/one-day/"/>
      <url>/2020/07/16/one-day/</url>
      
        <content type="html"><![CDATA[<p>喋喋不休了一大堆后，母亲在电话那边用局促的声音说你应该和朋友聊聊这些的。一直以来搀扶着我的手松开得毫无征兆，我捏着手指说没关系，我只是想倾诉一下，说出来已经好多了。母亲沉默了片刻，又和我唠了会最近的饮食。我说没得问题，她说那好，你多保重。</p><p>「重」这个字带着翘舌音。我出神到还在念书时，经常有人吐槽我讲方言像是嚼着泡泡糖在说话。</p><p>对面挂断电话，就像吹起的泡泡一样，啪的一声，糊了我一嘴。</p><p>我的家乡估计是这个省唯一一个方言发音还保留着翘舌的地方。毕业后，我在距离它 200 多公里的省城找工作，这儿的本地人讲话干净、清脆、凛冽，与家乡不同、也与外界对这生活状态的认知相反。</p><p>我借住在阿甘租的房子里。是他先联系我的。阿甘是我小学同学。过年的时候有人要组织小学同学聚会，当然，我没去。看到别人混得好我会为自己伤心，看到别人混得差我会为别人伤心。总之是个伤心之地，不去也罢。</p><p>阿甘从当时组织的 QQ 群加上了我，没找我借钱。我心想他还挺念旧，就陪他吹了会牛。后来才知道他把群里人都加了一遍。我本想打开他 QQ 空间浏览一哈，但是一想到有浏览记录，就打消了这个念头。正在纠结要不要开个黄钻隐身查看下时，突然看到自己 QQ 空间的今日访客数从 0 升到了 1，便急忙点进去看了眼，来者果然是他。我心想自己得更矜持点，还是算了。</p><p>唉，扯远了。我明白人为什么总喜欢回忆了，因为回忆可以把一堆有意思的事儿拉出来，排排站好。然后随便捡了根针筒，将一个个瞬间注射进自己的血管。为什么呢？为什么当初的每一幕明明也是无所事事，闲得不行，就和现在一样，可时间一旦汇聚成段，其中的碎片突然就有了意义。荒谬吗？点得融入线，点本身才能被凸显出来。</p><p>我问阿甘能不能借住几天，阿甘说没问题，然后我就应邀过去了。我是个细心的人，所以故意在学校待到周末，然后拿着铺盖卷和其它杂七杂八的东西，联系了个货拉拉，一趟跑了过去。</p><p>一入他卧室的门就看到床垫旁边有一大堆书直接从地板上摞着，对齐我胸口，比开的窗还要高好几本书。床垫就放在地板上，没有床，晚上睡觉要是一个不小心书垮下来，估计会把人压个半死。</p><p>狭隘的空间被利用到极限，前后墙壁拉了一根绳子，我看向旁边，原来绳末用一个吸盘固定在墙壁上。绳子上挂了几件白色 T恤衫和几条不同款式但一律或黑或灰的裤子。</p><p>我没话找话，问这都是你的书？他点头说是。然后我又特没出息地问出了那句话：「这些书你都看了吗？」</p><p>他笑着说看了。</p><p>问出来我就后悔了，觉得自己真蠢。本来想好的几句奉承话也不好意思说出口。在脑子里搜索了一转，想找点和书有关的东西搭下话，才发现自己自从初中毕业就没读过课外书。于是我故意用乡音以掩饰自己言语的匮乏，说了句「你阔真牛皮」。</p><p>他问我今天吃点啥，我说都行都行，按你平常来就行了，千万别为我接风洗尘啥的。他说刚好，今天下午准备去旧书店逛逛，咱们一起去吧，晚上就在外面吃了。</p><p>听到这番话，我一边绞尽脑汁思考怎么拒绝，一边暗示自己千万不要表现出来。</p><p>阿甘又说，没关系，你有啥其它安排就去忙自己的正事。</p><p>我顺口就说出来了：「我没的啥子事。」</p><p>说完我就又后悔了，唉我这张臭嘴。</p><p>跟着他骑了辆共享单车到了一条旧书店街，一排大概共有七八家书店。中间几家店的老板坐在门口搭着的太阳伞下乘凉聊天。阿甘进了最边上一家店，我心想坏了，这家伙该不会要从这边到那边逛一圈吧。</p><p>我黑着脸跟在他身后，老板问他要找啥书，阿甘回应说我就看看。老板说好，你慢慢看。</p><p>这老板人也不行，这种说就看看的人多半都不会买，你让他进去干嘛？</p><p>我转头看向老板，发现老板身边卧了只橘猫。我眉开眼笑地啧啧了几声，等猫注意到我了，便慢慢向老板那儿移动过去。猫没跑。到了一个合适的距离我便蹲下，握着拳头缓缓向猫伸过去。橘猫的耳朵抖了抖，又在我拳头上嗅了嗅，我便张开手趁机挠它的下巴。没想到这猫不按常理出牌，突然伸出前面的爪子抱着我的手就开始用牙咬。我把手抽出来想抚摸它的头让它温顺点，可它就是抓着我的手咬。</p><p>老板呵呵一笑，「它很喜欢你勒。」</p><p>我心想屁哦，待会别把我手咬破了。朝着老板笑了笑，说着「呵呵，是呢是呢。」把手从猫的爪子和嘴里夺了回来，进到店里。</p><p>阿甘正在书架前来回地走，我看了眼书架，翻出了本漫画开始读。没一会，就前后来了两个年轻人。老板问要找啥书，俩人都说：「漫画。」</p><p>先来的那个年轻人在我面前盯着书架扫了几眼就走了，后一个来了，先和前一个家伙一样，在我面前扫了一眼书架，又踮起脚把书架上一套用绳捆着的漫画拿了下来。他把书摆在书架前面的桌子上看了眼书脊，叹了口气，头朝好几个方向转了转，估计是还在找书吧，然后视线停在了我手中的漫画。</p><p>我假装没注意到他，机械地翻着手里的漫画，图印在我的眼里却根本没进入脑袋，更别说上面的字儿了。我暗道：「不会这么巧吧。」</p><p>用余光瞄着年轻人欲言又止的样子，我心一抽，深怕他向我搭话，正打算非常自然地抖着胳膊把书放回去，阿甘突然空着手从后面过来，拿过我手里的漫画。「诶，走吧走吧，买回去看。」</p><p>我跟着阿甘出去前继续用余光观察那年轻人，他果然把视线粘在漫画上面。我心想要不要问问他，如果他需要的话，把这本漫画给他好了，但阿甘已经麻利地到了老板面前，开始付款。还是算了，我心里这么想着，他如果要的话应该主动点问我的，算了算了。你和这本书无缘。</p><p>我走了出去，橘猫还躺在地上，朝我喵呜了一声。阿甘笑道，「嘿，这就认识了哈。」我嘿嘿笑，不说话。</p><p>我对阿甘说没必要买的，我也不是很喜欢。阿甘说没得事，他不是为我买的，只是转了一圈总得买本什么，不然不好意思，刚好这种漫画便宜。</p><p>然后阿甘和我沿着这条街一家家书店都进去看了一下，有感兴趣的就买几本，没感兴趣的就随便拿册小开本的书、杂志什么的。其实没什么看头，教材、畅销书居多。</p><p>快到尽头的时候之前那个年轻人过来了，他向我们打招呼，阿甘一脸懵逼，我倒是有种总算找过来了的感觉。我把书包拿到胸前，正准备把之前拿本漫画拿出来，却被那年轻人的话止住了。</p><p>他说阿甘刚才在第一家店付钱的时候，掉了张五块的。阿甘笑着说谢谢兄弟。</p><p>就这？现在我倒是一脸懵逼了。</p><p>年轻人把一张叠着的五元人民币递给阿甘，说：「你检查下，这应该是你的钱吧？」</p><p>阿甘还在说谢谢，伸手拿钱，说，「不用了，麻烦你了哈。」</p><p>年轻人捏着钱的一角不肯放手，「你还是检查检查吧，别搞错了。」</p><p>阿甘好像有点困惑，伸手往裤子口袋里摸了摸，不大确定地说，「我也不知道是不是我的……」</p><p>年轻人紧接着说，「是你的是你的，我看见从你手里掉出来的，不过你还是检查检查嘛。」</p><p>阿甘点头说好的，我检查检查。</p><p>年轻人松开手，阿甘把钱拿过来，伸手展开。我在一旁看着年轻人飞也似的跑开了。阿甘看向手里的人民币，原来里面夹了张纸条。阿甘抬头，又朝四周望了望。我看着不大对劲，便问他怎么了。他把手里纸条递给我，「瞧。」</p><p>哟呵，我略带谐谑地接过纸条，打开，里面写了一行字。</p><p>读完，我老脸一红。</p><p>阿甘问我咋了，我苦笑着又把纸条递给他。</p><p>上面写着，「那种漫画你也看，真为你的品位感到遗憾。」</p><p>这人真是神经病。</p><p>阿甘倒是开心地大笑，这才恍然大悟地说着，「怪不得刚才怪怪的……这五块钱估计也是他自己的吧……就为了吐槽一下你……哈哈哈」</p><p>我说，「估计他还没分清我和你。吐槽我，怎么把钱给你啊我说。」</p><p>阿甘又说，「这人真不知道该说没礼貌还是有意思……好在我们白嫖了五块钱，可以吃顿火锅了。」</p><p>等从头逛到尾时我再看表，已经下午五点了。我们便回头，在第一家书店门口打开了之前停的两辆共享单车。那只猫又对我伸出爪子叫唤了声，嘿，估计是爱上我了。不过我可不喜欢凶巴巴的猫。</p><p>不一会就到了家生意爆棚的火锅店，门口闲坐着不少人，估计是在排队。把车停在人行道旁边划分的区域，我略带惊讶地对阿甘说，「不会吧，真吃火锅啊，而且这人也太多了。」</p><p>阿甘说，「这是家网红店，而且旁边是所学校，当然人多了……不过今天不吃火锅，跟我走吧。」</p><p>他带着我从火锅店旁边的巷子穿过去，拐了两个弯我就看到学校的围墙了。原来这周围是学校外的小吃街。我的鼻子在时而闻到的辣椒油、火锅料、各种各样的味道里备受煎熬。</p><p>我们来到一家店，点了两碗番茄鸡蛋面。阿甘从我书包里取出了他买的书，然后把饭馆桌子上的卫生纸扯了几张出来，开始擦拭书籍的封面。</p><p>他擦了一本就让我拿着，装回去。第一本是我之前在看的漫画，名字是《裸女密码》，第二本略厚，封面是很厚很硬的那种纸张，名字是《吹》。我带着好奇心打开扉页，右下角写了个名字，还写了句「1997 年购于上海。」哟呵，有点年纪了嘿，还跑了这么远路。</p><p>我问阿甘，「这种隔着时间距离和书相遇的感觉还挺有意思的……买书就是你的爱好吗？」</p><p>阿甘说，「爱好……哈哈，这个问题我还真认真想过。买书应该不算是我的爱好，或者说我就没什么爱好吧。」</p><p>我觉得他话里有话，就顺着问他，「你这啥意思。」</p><p>他说：「我觉得爱好，意味着你愿意投入时间、精力、甚至人民币。而且不仅仅是肤浅地执行某一个动作……比如买书，买书只是一个动作……」</p><p>我插话说，「一个花钱的动作。」</p><p>「对！还比如有的人说自己喜欢读书什么的，他们只是机械地执行着这样的动作，没得思考。爱好意味着你得钻研那些那些动作的附加意义……我是做不到啦，所以说我没有爱好。」</p><p>「不过这不只是你对爱好的看法嘛。」</p><p>阿甘笑了，「对，我知道你的意思，每个人对一些生活里常见的词汇其实都有自己的理解。即便追溯词源，告诉别人你们理解错了，那也没有意义。」</p><p>他说了句看似中立的话，对话反倒没法继续了。</p><p>不一会，阿甘把书擦完了，面也上来了。原来番茄鸡蛋面的鸡蛋是个煎蛋，摆在面条上。我拿筷子插到碗底，把面挑起来拌匀，翻出了下面几大片番茄。橘红色的番茄汁在面汤里散开，我食欲大增。</p><p>埋头挑了一大筷子面条往嘴里塞，咬了一口，面条便在嘴里弹开。裹在面条上的番茄汁在我的舌尖滑来滑去，我大口嚼着，越嚼越香。</p><p>突然听到阿甘在说啥，我抬头看他，才发现桌子旁边又来了个人。阿甘看着我笑，我眯着眼看另一个人，认出了他就是之前书店那个家伙。</p><p>我静静看着他。他正和阿甘说话，「不巧不巧，我跟着你们过来的。」</p><p>啥玩意，这狗比跟踪狂吗。</p><p>我觉得这事蹊跷，然后往嘴里塞了口面。</p><p>他又说道，「我是书店门口那只猫哇。」</p><p>啥玩意？我挑眉，又多看了他一眼。突然想起确实见到他的时候都没注意到猫，而且那只猫也特别怪……怎么咬人呢。我心脏蹦蹦跳，不会是什么超常的展开吧。然后把煎蛋夹起来咬了一口。</p><p>阿甘笑得有点开心，「你这人有点意思，我们俩又不是老鼠。」</p><p>「我不追老鼠……」这时候饭馆老板过来问他要吃啥，他说「和他俩一样。」</p><p>「追番茄鸡蛋面吗？」我把面吃完了，正在喝汤。鼓起勇气向他搭了句话。这面真不赖，连汤都这么香。</p><p>他转头看向我，说「你也挺有意思。」</p><p>我不答话，继续喝汤。</p><p>「我在收藏那套漫画，就差你们拿走那本了，卖给我吧。」</p><p>我疑惑地盯着他。</p><p>他解释说「老实说，我不大好意思和陌生人说话，实在是想要那本漫画才鼓起勇气来找你们的。下午我本来让弟弟帮忙找你们，可是他说你们拒绝了……我心想还是亲自来，诚恳点好。」</p><p>我还是有点糊涂。</p><p>阿甘问道，「你是双胞胎？」</p><p>「对，我双胞胎弟弟。」</p><p>我明白了，又抬头打量他，着实分不清楚他和之前那人的区别。两人的穿着我也没怎么注意，好像都穿着白 T恤……我想起阿甘房间里挂着的 T恤，啊……这个季节流行 T恤啊……</p><p>阿甘笑着说，「你弟弟还有点调皮。」</p><p>他问怎么了。然后我把包里的那张纸条递给他，向他讲了他弟弟和我们发生的事。</p><p>他脸比我下午还红，不停向我们道歉。「这家伙对你们没有恶意，是借此在损我呢。他一直对我收集这些漫画不大感冒……这家伙……」</p><p>其实也只是件小事，我宽慰他说没啥，懂你懂你，然后从包里把那本漫画拿出来递给他。</p><p>他看着封面说，「没错！就是它！」不断感谢我们，说着要给我们钱。</p><p>阿甘对他说没关系，漫画才两块钱，他弟弟下午给了五块呢。</p><p>我也放松不少，便问他，「这种漫画……网上不是很多吗？还是新的，为啥非去旧书店里找。」</p><p>他突然正经，回答说，「这不一样，收集的乐趣不在于收集完，摆在书架上的那一瞬间 —— 然后再也不管了。收集的乐趣在于这种收集的过程。」</p><p>我是搞不懂这些人，这种杀时间的方式在我看来还不如打游戏。</p><p>刚好面条端来了。他拌了几下，说「就像吃面条，其实在吃第一口的时候就已经满足了。」</p><p>他吃了一大口，面色一变，又忙着挑了一筷子吃下去。</p><p>我懂他这种感觉。</p><p>「哈哈，味道不错。这个例子不恰当……这样说吧，你们俩一周前约好了去吃肉，然后这一周就在期待中度过了。但是实际开始吃肉时，第一口肉到了嘴里，快乐其实就已经达到了高潮……你懂我意思吧。」</p><p>我认真体会了下他说这个场景，好像能明白点了。</p><p>「如果我们把吃肉当作终点，很快就没快乐了。但是如果你把这种期待当作快乐的来源，你就可以快乐很久。」</p><p>阿甘接着说了句「你说你在下午四点来，我从三点钟开始就感觉到快乐。」</p><p>那家伙改挑为嗦，嗦了一大口面。「没错没错，就是《小王子》里说的那种感觉。」</p><p>我觉得他们说的有点抽象了，这和王子有啥关系。</p><p>我接着之前和阿甘聊的，问他，「这算是你的爱好吗？」</p><p>他一边吃面一边回复，「不算不算，没到那种程度，就是消磨时间而已。」</p><p>呵呵，还真是杀时间，现在的家伙怎么都这么闲，都不奋斗的吗？</p><p>「我觉得要在一个领域有所沉淀，才能称为爱好。我只是单纯地享受这种过程，算不得爱好。」</p><p>阿甘应道，「确实，仅仅说自己喜欢跑步就能塑造出阳光男孩的形象吗？那也太廉价了。」</p><p>「没错没错……」</p><p>我突然想起自己在简历的爱好一栏写的就是「喜欢跑步」，老脸再次一红，看样子回去得修改一下。</p><p>两人聊了半天，我也插不上话，没多久我就开始打哈欠了。</p><p>过了会两人留了个联系方式告别，这时才知道原来这家伙就是旁边这所学校大二的学生。他以为我俩也是这里的学生，不然不会在这吃饭。阿甘回复说我们是社会人啦，这边比较便宜所以来这吃饭。</p><p>回去的路上我问阿甘这是哪所学校，阿甘说了个名字，我吃了一惊，原来这就是那里呀。</p><p>到了阿甘住处的楼下，我又看见只橘猫，唤了两声咪咪，它不理我，我便掏出手机拍了张照片。拍完后，它突然朝我很凶地喵呜了一声。这猫和下午那只一定也是双胞胎。不可爱不可爱。</p><p>心里这么想着，便碎碎念出来了，「怎么到处都是双胞胎……」</p><p>阿甘听到了，爽朗地笑了笑：「搞不好自始自终就是他一个人呢。」</p><p>其实我心里想的是猫来着，不过他既然专门回应我，我也不好意思纠正。</p><p>阿甘又说：「毕竟他又没自己承认。我问他是不是双胞胎，他才回答的。说不定只是顺着我的话说罢了……」</p><p>我心脏多跳了半拍，感觉就像阿甘看出了我的敷衍一样。然后转头想起自己以往的种种，那时遇到的家伙们是不是也在敷衍我的愚蠢呢？而且我还带着优越感沾沾自喜。</p><p>像是想到啥可怕的东西，我拉回思绪，拿出手机给他看刚刚拍的猫片：「这和下午那只估计也是双胞胎。」</p><p><img style="width:40%" data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/life/2020/07-16/cat.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【图】毕业</title>
      <link href="/2020/07/08/graduation/"/>
      <url>/2020/07/08/graduation/</url>
      
        <content type="html"><![CDATA[<img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/life/2020/07-08/graduation.png" style="width:70%">]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 图册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图片所记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【图】青春の苦悩</title>
      <link href="/2020/07/02/young/"/>
      <url>/2020/07/02/young/</url>
      
        <content type="html"><![CDATA[<img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/life/2020/07-02/young.png" style="width:40%">]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 图册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图片所记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【图】学习</title>
      <link href="/2020/05/19/study/"/>
      <url>/2020/05/19/study/</url>
      
        <content type="html"><![CDATA[<h2 id="01"><a class="markdownIt-Anchor" href="#01"></a> 01</h2><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/life/2020-05-19/01.jpeg" alt="2018_05_05_21_55_IMG_0275"></p><h2 id="02"><a class="markdownIt-Anchor" href="#02"></a> 02</h2><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/life/2020-05-19/02.jpeg" alt="2018_05_05_21_55_IMG_0275"></p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 图册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图片所记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>也有这样的时候</title>
      <link href="/2020/04/20/hu/"/>
      <url>/2020/04/20/hu/</url>
      
        <content type="html"><![CDATA[<p>也有这样的时候嘛，嗯，也有这样的时候。太阳从远处落下，安静和黯淡的暮色铺满屋子。眼睛在努力地适应环境，身体却懈怠着准备融入黑。直到大脑于此刻意识到这点，恍然间便产生了一股怯意，周遭的事物也突然有了距离。那是怎样一种感觉呢。外物与自我的界限突然清晰起来了，各种各样的事情似乎变得无关紧要。</p><p>似乎这样的陌生才是本应该有的样子，可记忆的惯性却总在提醒一切都是「变得」如此。本不是这样，不该这样。</p><p>这是怎样的感情呢？比喜悦、悲伤来得强烈，困惑和愤怒也不敢与之抗衡。它不像普通的情感仅仅包裹我的心脏，也不似幸福在五脏间循环一股暖流，它有点像风拂过赤裸的身体，有点像血液在流动，可它又安静地躺在我的身体里面，在我的四肢里舒展，从我的两肋跨至指尖，从额头探向眉梢。它像是在修补，又像在啮蚀。</p><p>似乎是少年时靠着围栏坐在操场旁的草地上两个瞬间的混合。闭着眼，阳光展在思绪上；睁开眼，身体被喧嚣挤压得几无容身之处。</p><p>呼，想起了一个词汇，可那对我来说太过锋利了。这不算痛苦，也不是良药，只不过是又一个安静的傍晚。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【更新】Hexo 插件 hexo-douban-getter —— 展示豆瓣标记数据</title>
      <link href="/2020/04/13/hexo-douban-getter/"/>
      <url>/2020/04/13/hexo-douban-getter/</url>
      
        <content type="html"><![CDATA[<h2 id="说明"><a class="markdownIt-Anchor" href="#说明"></a> 说明</h2><p>[2020-02-09-created]</p><p>2020-04-13-update：支持某类别标记数据的展示，并提供状态间的切换按钮。比如书籍有看过、在看、想看三种状态，现在可以在一个页面展示并切换显示。</p><p><strong>Demo</strong> ：<a href="#demo">豆瓣的书籍标记数据展示 Demo</a></p><p>代码地址：<a href="https://github.com/hqweay/hexo-douban-getter" target="_blank" rel="noopener">hqweay/hexo-douban-getter</a></p><h2 id="使用"><a class="markdownIt-Anchor" href="#使用"></a> 使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add https:&#x2F;&#x2F;github.com&#x2F;hqweay&#x2F;hexo-douban-getter.git</span><br></pre></td></tr></table></figure><h3 id="展示单项标记数据"><a class="markdownIt-Anchor" href="#展示单项标记数据"></a> 展示单项标记数据</h3><p>展示看过的影视、读过的书籍……</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; post.md</span><br><span class="line">&#123;% douban userName type pageStart pageEnd titleLevel %&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; example</span><br><span class="line">&#123;% douban &quot;hqweay&quot; &quot;watchedMovies&quot; 1 3 h3 %&#125;</span><br></pre></td></tr></table></figure><h4 id="参数说明"><a class="markdownIt-Anchor" href="#参数说明"></a> 参数说明</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>userName</td><td>豆瓣 id</td></tr><tr><td>type</td><td>标记数据类型（支持类型见下文）</td></tr><tr><td>pageStart</td><td>获取数据开始页</td></tr><tr><td>pageEnd</td><td>获取数据结束页</td></tr><tr><td>titleLevel</td><td>【可选】标记数据的标题层级，默认为 h3。</td></tr></tbody></table><h4 id="type-支持参数"><a class="markdownIt-Anchor" href="#type-支持参数"></a> type 支持参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const DoubanTypeEnum &#x3D; &#123;</span><br><span class="line">  &quot;watchedMovies&quot;: &quot;watchedMovies&quot;,</span><br><span class="line">  &quot;wishMovies&quot;: &quot;wishMovies&quot;,</span><br><span class="line">  &quot;watchingMovies&quot;: &quot;watchingMovies&quot;,</span><br><span class="line">  &quot;readBooks&quot;: &quot;readBooks&quot;,</span><br><span class="line">  &quot;wishBooks&quot;: &quot;wishBooks&quot;,</span><br><span class="line">  &quot;readingBooks&quot;: &quot;readingBooks&quot;,</span><br><span class="line">  &quot;listenedMusics&quot;: &quot;listenedMusics&quot;,</span><br><span class="line">  &quot;wishMusics&quot;: &quot;wishMusics&quot;,</span><br><span class="line">  &quot;listeningMusics&quot;: &quot;listeningMusics&quot;,</span><br><span class="line">  &quot;playedGames&quot;: &quot;playedGames&quot;,</span><br><span class="line">  &quot;wishGames&quot;: &quot;wishGames&quot;,</span><br><span class="line">  &quot;playingGames&quot;: &quot;playingGames&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="展示某类别标记数据"><a class="markdownIt-Anchor" href="#展示某类别标记数据"></a> 展示某类别标记数据</h3><p>展示影视对应的看过、在看、想看，书籍对应的读过、在读、想读……三种状态的标记数据。</p><p>提供切换按钮。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; post.md</span><br><span class="line">&#123;% douban type userName pageStart pageEnd titleLevel %&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; example</span><br><span class="line">&#123;% douban book &quot;hqweay&quot; 1 1 %&#125;</span><br></pre></td></tr></table></figure><h4 id="参数说明-2"><a class="markdownIt-Anchor" href="#参数说明-2"></a> 参数说明</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>标记数据类型（支持类型见下文）</td></tr><tr><td>userName</td><td>豆瓣 id</td></tr><tr><td>pageStart</td><td>获取数据开始页</td></tr><tr><td>pageEnd</td><td>获取数据结束页</td></tr><tr><td>titleLevel</td><td>【可选】标记数据的标题层级，默认为 h3。</td></tr></tbody></table><h4 id="type-支持参数-2"><a class="markdownIt-Anchor" href="#type-支持参数-2"></a> type 支持参数</h4><ul><li>book</li><li>movie</li><li>music</li><li>game</li></ul><h2 id="todo"><a class="markdownIt-Anchor" href="#todo"></a> TODO</h2><ul><li>[ ] 数据缓存至本地</li><li>[ ] 分页？</li></ul><h2 id="展示"><a class="markdownIt-Anchor" href="#展示"></a> 展示</h2><p>仅作参考，建议查看 <a href="#demo">Demo</a> 。</p><p><a href="https://github.com/hqweay/hexo-douban-getter/tree/master/examples" target="_blank" rel="noopener">所有截图示例</a></p><h2 id="说明-2"><a class="markdownIt-Anchor" href="#说明-2"></a> 说明</h2><p>开发过程中参考了 <a href="https://github.com/YuyingWu/hexo-tag-douban" target="_blank" rel="noopener">hexo-tag-douban</a></p><h2 id="demo"><a class="markdownIt-Anchor" href="#demo"></a> Demo</h2><p>本页需要刷新一下，点击切换才有效果。因本站使用 pjax 会影响网页内 js 脚本的加载，导致第一次加载失败。</p><h2 id="书"><a class="markdownIt-Anchor" href="#书"></a> 书</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% douban book &quot;hqweay&quot; 1 1 %&#125;</span><br></pre></td></tr></table></figure><h2 id="影"><a class="markdownIt-Anchor" href="#影"></a> 影</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% douban movie &quot;hqweay&quot; 1 1 %&#125;</span><br></pre></td></tr></table></figure><div class="hexo-douban-index"><script>function change(that){      let done = document.getElementById("hexo-douban-done");      let doing = document.getElementById("hexo-douban-doing");      let todo = document.getElementById("hexo-douban-todo");      done.style.display = "none";      doing.style.display = "none";      todo.style.display = "none";      if(that.id === "nav-done"){        done.style.display = "block";      }else if(that.id === "nav-doing"){        doing.style.display = "block";      }else if(that.id === "nav-todo"){        todo.style.display = "block";      }    }</script><div class="hexo-douban-nav"><button id="nav-done" onclick="change(this)">看过</button> <button id="nav-doing" onclick="change(this)">在看</button> <button id="nav-todo" onclick="change(this)">想看</button></div><div id="hexo-douban-done"><div class="hexo-douban-getter-movies"><h3 id="功夫熊猫/KungFuPanda/熊猫阿宝/阿宝正传 - 20">功夫熊猫/KungFuPanda/熊猫阿宝/阿宝正传</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p1597238857.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/1783457/" target="_blank">功夫熊猫/KungFuPanda/熊猫阿宝/阿宝正传</a></div><div class="hexo-douban-rate">评分：4</div><div class="hexo-douban-comment">评论：不对劲这是误解吧--</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-08-23</div></div><h3 id="奇巧计程车/ODDTAXI/オッドタクシ— - 35">奇巧计程车/ODDTAXI/オッドタクシ—</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2630996296.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35332568/" target="_blank">奇巧计程车/ODDTAXI/オッドタクシ—</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：剧情完全在我的萌点上。就是主角总让我出戏到恶魔阿塞谢尔…/如果说前面是一个还算有趣且台词带劲的故事，其中不乏生硬与不合理之处，最后一集则直接让我高潮，这才是动画才能有的表达啊……</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-24</div></div><h3 id="路人女主的养成方法/冴えない彼女の育てかた/不起眼女主角培育法/SaenaiHeroineNoSodatekata - 98">路人女主的养成方法/冴えない彼女の育てかた/不起眼女主角培育法/SaenaiHeroineNoSodatekata</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2212217488.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/25850625/" target="_blank">路人女主的养成方法/冴えない彼女の育てかた/不起眼女主角培育法/SaenaiHeroineNoSodatekata</a></div><div class="hexo-douban-rate">评分：4</div><div class="hexo-douban-comment">评论：拿到后宫动画来说就是反套路的神作呀…但是如作者自己表达的，要是拆成三部小说我会非常喜欢的…</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-17</div></div><h3 id="硅谷第二季/SiliconValleySeason2/硅谷群瞎传(台)/硅谷黑历史 - 34">硅谷第二季/SiliconValleySeason2/硅谷群瞎传(台)/硅谷黑历史</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2232659084.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/25871679/" target="_blank">硅谷第二季/SiliconValleySeason2/硅谷群瞎传(台)/硅谷黑历史</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：虽然但是。最后一集各种矛盾集中爆发，大家成功抵住30w并发后的欣慰和满足还是让我有点点感动。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-06-26</div></div><h3 id="猫的报恩/猫の恩返し/猫之报恩/Nekonoongaeshi - 97">猫的报恩/猫の恩返し/猫之报恩/Nekonoongaeshi</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p453858009.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/1304970/" target="_blank">猫的报恩/猫の恩返し/猫之报恩/Nekonoongaeshi</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：做你自己，活在你自己的时间线，别同化成他们的样子。你做的好事、琐事，都是为了让你成为自己。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-06-20</div></div><h3 id="你好，李焕英/Hi,Mom - 46">你好，李焕英/Hi,Mom</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2629056068.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/34841067/" target="_blank">你好，李焕英/Hi,Mom</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：4🌟</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-06-19</div></div><h3 id="天堂电影院/NuovoCinemaParadiso/星光伴我心(港)/新天堂乐园(台) - 41">天堂电影院/NuovoCinemaParadiso/星光伴我心(港)/新天堂乐园(台)</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2653054340.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/1291828/" target="_blank">天堂电影院/NuovoCinemaParadiso/星光伴我心(港)/新天堂乐园(台)</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：呼…</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-06-19</div></div><h3 id="大象女王/TheElephantQueen - 51">大象女王/TheElephantQueen</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2574122652.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/30326966/" target="_blank">大象女王/TheElephantQueen</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：大象用脚掌拍了一下乌龟的背，然后放开了。这是我第一次感觉到大象的情绪的点。主线可能是象以及围绕它的一些生态。动物们一生都在忙着生存，也就不久之前，或者说直到现在，干旱也仍然影响着许多人类…致敬生命，致敬生命的意义。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-06-11</div></div><h3 id="误杀瞒天记/Drishyam/视觉/瞒天过海 - 30">误杀瞒天记/Drishyam/视觉/瞒天过海</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2276962949.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26419637/" target="_blank">误杀瞒天记/Drishyam/视觉/瞒天过海</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：4.5星。讨论是好是坏没有意义了，只是这世上有这样的情感，有这样的事情。感受最深的反倒是里面明里暗里对背景的讽刺，明明是他犯了错，为什么反倒让两位女性害怕，苦苦相求？/剧情不完美，但也不废话，很棒。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-05-30</div></div><h3 id="谍影重重/TheBourneIdentity/叛谍追击(港)/神鬼认证(台) - 57">谍影重重/TheBourneIdentity/叛谍追击(港)/神鬼认证(台)</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p1597183981.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/1304102/" target="_blank">谍影重重/TheBourneIdentity/叛谍追击(港)/神鬼认证(台)</a></div><div class="hexo-douban-rate">评分：4</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-05-30</div></div><h3 id="15名动画人/アニ＊クリ15/Ani*Kuri15/NHK15个动画短片 - 54">15名动画人/アニ＊クリ15/Ani*Kuri15/NHK15个动画短片</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2225268939.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/3240828/" target="_blank">15名动画人/アニ＊クリ15/Ani*Kuri15/NHK15个动画短片</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：好酷</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-05-22</div></div><h3 id="红猪/紅の豚/飞天红猪侠(港)/PorcoRosso - 96">红猪/紅の豚/飞天红猪侠(港)/PorcoRosso</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p1637195728.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/1291838/" target="_blank">红猪/紅の豚/飞天红猪侠(港)/PorcoRosso</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：现在来看似乎一切细节都是隐喻</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-05-22</div></div><h3 id="山河令/天涯客/WordofHonor - 27">山河令/天涯客/WordofHonor</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2633696791.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/34923491/" target="_blank">山河令/天涯客/WordofHonor</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：曹顾俩太可爱了…意难平</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-05-05</div></div><h3 id="地球改变之年/TheYearEarthChanged/这一年，地球变得不一样(台) - 69">地球改变之年/TheYearEarthChanged/这一年，地球变得不一样(台)</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2638827823.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35417202/" target="_blank">地球改变之年/TheYearEarthChanged/这一年，地球变得不一样(台)</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：非常棒的角度。/但始终这些纪录片里我最难受的就是动物们许多行为可能表现得有趣（多是剪辑出来的），但对于它们来说，只是为了生存……这种共情让我看着片子觉得羞愧……</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-04-22</div></div><h3 id="进击的巨人最终季/進撃の巨人TheFinalSeason/进击的巨人第四季/進撃の巨人Season4 - 4">进击的巨人最终季/進撃の巨人TheFinalSeason/进击的巨人第四季/進撃の巨人Season4</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2605274206.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/33440021/" target="_blank">进击的巨人最终季/進撃の巨人TheFinalSeason/进击的巨人第四季/進撃の巨人Season4</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：抱歉啊，虽然网上一片骂声，可我还是想遵循自己的内心。真是部好作品啊。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-04-10</div></div><script>function imgError(n){n.style.display="none"}</script></div></div><div id="hexo-douban-doing" style="display:none"><div class="hexo-douban-getter-movies"><h3 id="瑞克和莫蒂第五季/RickandMortySeason5 - 11">瑞克和莫蒂第五季/RickandMortySeason5</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2660594300.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/34908206/" target="_blank">瑞克和莫蒂第五季/RickandMortySeason5</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-06-22</div></div><h3 id="洛基第一季/LokiSeason1/洛奇/洛基传 - 84">洛基第一季/LokiSeason1/洛奇/洛基传</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2646859929.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/30331432/" target="_blank">洛基第一季/LokiSeason1/洛奇/洛基传</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：永恒的终结/第一集否认自由意志最终必然是虚无主义啊…宇宙版自由即枷锁？</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-06-20</div></div><h3 id="御赐小仵作/TheImperialCoroner - 32">御赐小仵作/TheImperialCoroner</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2652208493.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/32581207/" target="_blank">御赐小仵作/TheImperialCoroner</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：1.人物行为真实2.故事有趣，结构巧妙3.剪辑快准稳4.价值观比较普世吧/就是用的配音一开始有点不习惯…</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-05-15</div></div><h3 id="大豆田永久子与三名前夫/大豆田とわ子と三人の元夫/MyDearExes/大豆田永久子与三个前夫(台) - 74">大豆田永久子与三名前夫/大豆田とわ子と三人の元夫/MyDearExes/大豆田永久子与三个前夫(台)</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2642879178.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35365608/" target="_blank">大豆田永久子与三名前夫/大豆田とわ子と三人の元夫/MyDearExes/大豆田永久子与三个前夫(台)</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-04-21</div></div><h3 id="孤单又灿烂的神：鬼怪/쓸쓸하고찬란하神-도깨비/灿烂的守护神：鬼怪(台)/孤独又灿烂的神 - 40">孤单又灿烂的神：鬼怪/쓸쓸하고찬란하神-도깨비/灿烂的守护神：鬼怪(台)/孤独又灿烂的神</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2402645080.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26761935/" target="_blank">孤单又灿烂的神：鬼怪/쓸쓸하고찬란하神-도깨비/灿烂的守护神：鬼怪(台)/孤独又灿烂的神</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：10多集</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-02-01</div></div><h3 id="大江大河2/大江大河第二部/LikeaFlowingRiver2 - 69">大江大河2/大江大河第二部/LikeaFlowingRiver2</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2628760333.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/30423905/" target="_blank">大江大河2/大江大河第二部/LikeaFlowingRiver2</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-12-26</div></div><h3 id="给我钱第9季/ShowMetheMoney9 - 64">给我钱第9季/ShowMetheMoney9</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2623174866.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35151461/" target="_blank">给我钱第9季/ShowMetheMoney9</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-11-26</div></div><h3 id="大宋少年志/大宋少年天团/YoungBlood - 57">大宋少年志/大宋少年天团/YoungBlood</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2559266281.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/30170894/" target="_blank">大宋少年志/大宋少年天团/YoungBlood</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：1</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-08-01</div></div><h3 id="知否知否应是绿肥红瘦/知否？知否？应是绿肥红瘦/明兰传 - 13">知否知否应是绿肥红瘦/知否？知否？应是绿肥红瘦/明兰传</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2537131688.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26928226/" target="_blank">知否知否应是绿肥红瘦/知否？知否？应是绿肥红瘦/明兰传</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：23。总有种食之无味，弃之可惜的感觉...唉。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-08-01</div></div><h3 id="天盛长歌/凰权·弈天下/凰权 - 84">天盛长歌/凰权·弈天下/凰权</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2530496815.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26761328/" target="_blank">天盛长歌/凰权·弈天下/凰权</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：非得把啥都说出来，没意思。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-06-09</div></div><h3 id="庆余年第一季/庆余年/JoyofLife - 95">庆余年第一季/庆余年/JoyofLife</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2575362797.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/25853071/" target="_blank">庆余年第一季/庆余年/JoyofLife</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：女主出来那段剧情没往下看了</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-06-09</div></div><h3 id="传闻中的陈芊芊/传闻中的三公主/TheRomanceofTigerandRose - 87">传闻中的陈芊芊/传闻中的三公主/TheRomanceofTigerandRose</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2602398693.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/34463197/" target="_blank">传闻中的陈芊芊/传闻中的三公主/TheRomanceofTigerandRose</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：7。三星➕</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-06-02</div></div><h3 id="川军团血战到底/血战到底/FightTillTheEnd - 26">川军团血战到底/血战到底/FightTillTheEnd</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p1864484071.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/6839157/" target="_blank">川军团血战到底/血战到底/FightTillTheEnd</a></div><div class="hexo-douban-rate">评分：5</div><div class="hexo-douban-comment">评论：四星。但以2020这个时间点，作为一部爱国教育宣传片来说，十星也不为过。唉。</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-05-21</div></div><h3 id="暗杀教室第2季/暗殺教室第2期/章鱼老师/极速老师 - 48">暗杀教室第2季/暗殺教室第2期/章鱼老师/极速老师</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2298126991.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26375693/" target="_blank">暗杀教室第2季/暗殺教室第2期/章鱼老师/极速老师</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：1</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-05-21</div></div><h3 id="约会～恋爱究竟是什么呢～/デート〜恋とはどんなものかしら〜/约会：恋爱为何物/Deto-KoitowaDonnaMonoKashira - 57">约会～恋爱究竟是什么呢～/デート〜恋とはどんなものかしら〜/约会：恋爱为何物/Deto-KoitowaDonnaMonoKashira</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2219067364.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26271868/" target="_blank">约会～恋爱究竟是什么呢～/デート〜恋とはどんなものかしら〜/约会：恋爱为何物/Deto-KoitowaDonnaMonoKashira</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2020-05-06</div></div><script>function imgError(n){n.style.display="none"}</script></div></div><div id="hexo-douban-todo" style="display:none"><div class="hexo-douban-getter-movies"><h3 id="白莲花度假村第一季/TheWhiteLotusSeason1/白莲花大饭店 - 77">白莲花度假村第一季/TheWhiteLotusSeason1/白莲花大饭店</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2669993942.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35506348/" target="_blank">白莲花度假村第一季/TheWhiteLotusSeason1/白莲花大饭店</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-08-23</div></div><h3 id="啊！设计/デザインあ/Designあ/DesignAh! - 7">啊！设计/デザインあ/Designあ/DesignAh!</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2635179466.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26636126/" target="_blank">啊！设计/デザインあ/Designあ/DesignAh!</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-08-20</div></div><h3 id="在盛夏等待/あの夏で待ってる/AnoNatsudeMatteru - 79">在盛夏等待/あの夏で待ってる/AnoNatsudeMatteru</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2169234859.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/6808696/" target="_blank">在盛夏等待/あの夏で待ってる/AnoNatsudeMatteru</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-08-18</div></div><h3 id="平稳世代的韦驮天们/平穏世代の韋駄天達 - 97">平稳世代的韦驮天们/平穏世代の韋駄天達</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2653060567.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35177664/" target="_blank">平稳世代的韦驮天们/平穏世代の韋駄天達</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-08-14</div></div><h3 id="长沙保卫战 - 95">长沙保卫战</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2212789814.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/20388217/" target="_blank">长沙保卫战</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-08-09</div></div><h3 id="恐怖残响/残響のテロル/东京残响/ZankyonoTerror - 71">恐怖残响/残響のテロル/东京残响/ZankyonoTerror</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2175353226.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/25851541/" target="_blank">恐怖残响/残響のテロル/东京残响/ZankyonoTerror</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-28</div></div><h3 id="17.3关于性/17.3aboutasex - 80">17.3关于性/17.3aboutasex</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2619759527.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35202302/" target="_blank">17.3关于性/17.3aboutasex</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-23</div></div><h3 id="泽塔奥特曼/ウルトラマンZ/超人Z(港)/超人力霸王Z(台) - 62">泽塔奥特曼/ウルトラマンZ/超人Z(港)/超人力霸王Z(台)</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2606122497.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35013632/" target="_blank">泽塔奥特曼/ウルトラマンZ/超人Z(港)/超人力霸王Z(台)</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-21</div></div><h3 id="巨人与玩具/巨人と玩具/GiantsandToys/巨人与玩具 - 34">巨人与玩具/巨人と玩具/GiantsandToys/巨人与玩具</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2260493736.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/1416842/" target="_blank">巨人与玩具/巨人と玩具/GiantsandToys/巨人与玩具</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-17</div></div><h3 id="初来乍到第一季/FreshOffTheBoatSeason1/菜鸟新移民 - 57">初来乍到第一季/FreshOffTheBoatSeason1/菜鸟新移民</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2217315554.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/25885410/" target="_blank">初来乍到第一季/FreshOffTheBoatSeason1/菜鸟新移民</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-15</div></div><h3 id="北辙南辕 - 11">北辙南辕</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2670154181.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/35135955/" target="_blank">北辙南辕</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-14</div></div><h3 id="徒然喜欢你/徒然チルドレン/徒然Children/恋爱四格小剧场 - 84">徒然喜欢你/徒然チルドレン/徒然Children/恋爱四格小剧场</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2462033628.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26974053/" target="_blank">徒然喜欢你/徒然チルドレン/徒然Children/恋爱四格小剧场</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-14</div></div><h3 id="领袖水准/BossLevel/回路追杀令(台)/循环：终级之战 - 32">领袖水准/BossLevel/回路追杀令(台)/循环：终级之战</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2587577516.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/27200012/" target="_blank">领袖水准/BossLevel/回路追杀令(台)/循环：终级之战</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-14</div></div><h3 id="空房间/빈집/感官乐园(港)/空屋情人(台) - 3">空房间/빈집/感官乐园(港)/空屋情人(台)</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img1.doubanio.com/view/photo/s_ratio_poster/public/p462432458.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/1308833/" target="_blank">空房间/빈집/感官乐园(港)/空屋情人(台)</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-14</div></div><h3 id="我心雀跃/MyHeartLeapsUp - 65">我心雀跃/MyHeartLeapsUp</h3><div class="hexo-douban-movie" style="position:relative;width:60%;border:1px solid #666;border-radius:4px;margin:10px auto;padding:10px"><div class="hexo-douban-pic" style="width:50%"><img data-src="https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2461628402.jpg" onerror="imgError(this)" style="width:135px;height:192px;display:inline-block;margin-right:14px" referrerpolicy="no-referrer"></div><div class="hexo-douban-title"><a href="https://movie.douban.com/subject/26761334/" target="_blank">我心雀跃/MyHeartLeapsUp</a></div><div class="hexo-douban-rate">评分：0</div><div class="hexo-douban-comment">评论：</div><div class="hexo-douban-tags">标签：</div><div class="hexo-douban-date">标记时间：2021-07-12</div></div><script>function imgError(n){n.style.display="none"}</script></div></div></div>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Projects </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>尝试折腾了下用 Hexo-Next-Theme 搭建的博客</title>
      <link href="/2020/03/23/hexo-next/"/>
      <url>/2020/03/23/hexo-next/</url>
      
        <content type="html"><![CDATA[<h2 id="只留必要依赖"><a class="markdownIt-Anchor" href="#只留必要依赖"></a> 只留必要依赖</h2><p>配置文件 <code>theme/_config.yml</code> 中不必要的依赖不要添加。</p><p>比如对我来说，3D 效果之类的都没必要，所以 <code>three.js</code>、<code>canvas_nest.js</code> 啥的都不必开启。</p><p>最后用到的有：</p><ul><li>quicklink：预加载用户视区中的链接</li><li>pjax：站内页面刷新</li><li>lazyload：图片懒加载</li><li>mediumzoom：查看大图</li></ul><p>quicklink 我没啥感觉；</p><p>pjax，由于网络原因，我偶尔会觉得浏览器（网页）卡死了；</p><p>lazyload 和 mediumzoom 有点效果，不过虽然我这也没几张图就是了……</p><h2 id="能上-cdn-的先上-cdn"><a class="markdownIt-Anchor" href="#能上-cdn-的先上-cdn"></a> 能上 CDN 的先上 CDN</h2><p>前提：我把博客放 Github Pages 的。</p><p>看的这篇文章，尝试了下：<a href="https://chanshiyu.com/#/post/94" target="_blank" rel="noopener">JsDelivr 全站托管</a></p><h3 id="js-css-images"><a class="markdownIt-Anchor" href="#js-css-images"></a> js、css、images</h3><p>在 <code>theme/_config.yml</code> 下修改 <code>Assets</code>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">css:</span> <span class="string">//cdn.jsdelivr.net/gh/hqweay/hqweay.github.io@master/css</span></span><br><span class="line"><span class="attr">js:</span> <span class="string">//cdn.jsdelivr.net/gh/hqweay/hqweay.github.io@master/js</span></span><br><span class="line"><span class="attr">images:</span> <span class="string">//cdn.jsdelivr.net/gh/hqweay/hqweay.github.io@master/images</span></span><br></pre></td></tr></table></figure><h3 id="avater-favicon"><a class="markdownIt-Anchor" href="#avater-favicon"></a> avater、favicon</h3><p>favicon、avatar 不包含在 images 里，需要单独改下。</p><p>images 仅包含文章引用的本地图片。</p><h3 id="本地搜索"><a class="markdownIt-Anchor" href="#本地搜索"></a> 本地搜索</h3><p>如果开启了本地搜索，加载 <code>search.xml</code> 也不会走 CDN。</p><p>手动改下 <code>js/local-search</code> 里 <code>fetchData</code>。如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> fetchData = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">-   fetch(CONFIG.root + searchPath)</span><br><span class="line">+   fetch(<span class="string">"https://cdn.jsdelivr.net/gh/hqweay.github.io@master/"</span> + searchPath)</span><br></pre></td></tr></table></figure><p>有变动需求可以将 <code>https://……</code> 这一串配置在 <code>_config.yml</code> 或 <code>theme/_config.yml</code>。</p><h3 id="字体"><a class="markdownIt-Anchor" href="#字体"></a> 字体</h3><p><strong>感觉没必要配置。</strong></p><p>需要的话可以用 <a href="https://sb.sb/blog/css-cdn/" target="_blank" rel="noopener">前端 CDNJS 库及 Google Fonts、Ajax 和 Gravatar 国内加速服务</a> 这位大佬的。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Uri of fonts host, e.g. //fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">//fonts.loli.net</span></span><br></pre></td></tr></table></figure><h3 id="各种依赖"><a class="markdownIt-Anchor" href="#各种依赖"></a> 各种依赖</h3><p>在 <code>theme/_config.yml</code> 的 <code>vendors</code> 配置。</p><p>也全用 <code>JsDelivr</code> 的比较好。</p><p>我用到的一些依赖：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主题样式为 minimal 时，显示侧边栏信息会用到。</span></span><br><span class="line"><span class="attr">anime:</span> <span class="string">//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js</span></span><br><span class="line"><span class="comment"># 图标。（比如侧边栏的 social links）——如果不用 icon，那就不必引……</span></span><br><span class="line"><span class="attr">fontawesome:</span> <span class="string">//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css</span></span><br><span class="line"><span class="attr">pjax:</span> <span class="string">//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js</span></span><br><span class="line"><span class="attr">mediumzoom:</span> <span class="string">//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js</span></span><br><span class="line"><span class="attr">lazyload:</span> <span class="string">//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js</span></span><br><span class="line"><span class="attr">quicklink:</span> <span class="string">//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js</span></span><br></pre></td></tr></table></figure><h3 id="感觉没效果啊cloudflare"><a class="markdownIt-Anchor" href="#感觉没效果啊cloudflare"></a> 【感觉没效果啊】Cloudflare</h3><p>域名通过 Cloudflare 解析，可以设置全站用 Cloudflare 的 CDN。</p><p>我试了下，然后通过 <a href="https://developers.google.com/speed/pagespeed/insights/" target="_blank" rel="noopener">PageSpeed Insights</a> 测试，跑到 99 分了……</p><p>但是感觉没啥用，我使用的网络下，甚至比直接托管到 Github 还慢……（不知道是不是错觉）</p><h3 id="感觉没效果啊netlify"><a class="markdownIt-Anchor" href="#感觉没效果啊netlify"></a> 【感觉没效果啊】Netlify</h3><p>用 Netlify 托管，效果差异也不大。</p><p>PS：Netlify 绑定自己域名时会需要一个 <code>_redirects</code> 文件。把该文件放 <code>source</code> 下，默认还不会上传至仓库，因为 Hexo 把以 <code>_</code> 开头的文件夹和文件忽略了。</p><p>需要在 <code>_config.yml</code> 配置渲染时把该文件包含进来。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Include/Exclude Files/Folders</span></span><br><span class="line"><span class="attr">include:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"_redirects"</span></span><br></pre></td></tr></table></figure><h3 id="国内托管服务"><a class="markdownIt-Anchor" href="#国内托管服务"></a> 国内托管服务</h3><p>Coding 之类的。</p><p><s>此贴终结……</s></p><h2 id="字体配置"><a class="markdownIt-Anchor" href="#字体配置"></a> 字体配置</h2><p>字体的相关配置见：<a href="/2020/02/14/hexo-next-font/">Hexo Next 主题字体相关配置</a></p><h2 id="归档页做首页"><a class="markdownIt-Anchor" href="#归档页做首页"></a> 归档页做首页</h2><p>把 <code>layout/archive.swig</code> 改为 <code>layout/index.swig</code> 就行了。</p><p>不过注意此时首页的 <code>meta</code> 信息是 <code>archive</code> （归档）……</p><p>要做个清爽合格的首页，可以把原 <code>index.swig</code> 的 <code>meta</code> 信息拷贝到新 <code>index.swig</code> 下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; new index.swig (archive.swig)</span><br><span class="line"></span><br><span class="line">- &#123;% block title %&#125;&#123;&#123; __(&#39;title.archive&#39;) &#125;&#125; | &#123;&#123; title &#125;&#125;&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">+ &#123;% block title %&#125;&#123;&#123; title &#125;&#125;&#123;%- if theme.index_with_subtitle and subtitle %&#125; - &#123;&#123; subtitle &#125;&#125;&#123;%- endif %&#125;&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h2 id="静态资源压缩"><a class="markdownIt-Anchor" href="#静态资源压缩"></a> 静态资源压缩</h2><p>用的 <a href="https://github.com/chenzhutian/hexo-all-minifier" target="_blank" rel="noopener">hexo-all-minifier</a> 。</p><h2 id="open-graph"><a class="markdownIt-Anchor" href="#open-graph"></a> Open Graph</h2><p><a href="https://ogp.me/" target="_blank" rel="noopener">The Open Graph protocol</a></p><p>简单来说就是向网页添加一些 <code>meta</code> 标签。类似这样：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:image"</span> <span class="attr">content</span>=<span class="string">"http://ia.media-imdb.com/images/rock.jpg"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>Hexo 提供 <a href="https://hexo.io/docs/helpers.html#open-graph" target="_blank" rel="noopener">open_graph()</a> 可以向网页直接插入 Open Graph 信息。</p><p>遇到个问题，<a href="https://hexo.io/docs/helpers.html#open-graph" target="_blank" rel="noopener">open_graph()</a> 不能给网页设置一个默认的 <code>og:image</code>。</p><p>查看 <code>node_modules/hexo/lib/plugins/helper/open_graph.js</code>：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> images = options.image || options.images || page.photos || [];</span><br></pre></td></tr></table></figure><p><code>ol:image</code> 优先从传入参数找，找不到就会用文章内容里的图片，<strong>还没有的话，那就没有了</strong>。</p><p>于是尝试加了个：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> default_image = <span class="string">"https://leay.net/images/avatar"</span></span><br><span class="line"><span class="keyword">let</span> images = options.image || options.images || page.photos || default_image || [];</span><br></pre></td></tr></table></figure><p>这样，前面都找不到，就会使用我定义的图片，而不是直接没有 <code>ol:image</code> 标签。</p><p>当然，为了维护，可以把默认图片的链接配置到 <code>_config.yml</code> 或 <code>theme/_config.yml</code>。</p><p>PS：我没仔细研究，可能 Open Graph 不建议本来就不带图片的网页在分享时带上一张图片？但做 SEO 往往建议每个页面都带上这些信息……</p><p><code>hexo-next-theme</code> 往网页插入 Open Graph 信息也是用的 <a href="https://hexo.io/docs/helpers.html#open-graph" target="_blank" rel="noopener">open_graph()</a>，所以如果有这个需求得改动 Hexo 的 <code>open_graph.js</code> 。</p><h2 id="其它"><a class="markdownIt-Anchor" href="#其它"></a> 其它</h2><h3 id="hexo-asset-image"><a class="markdownIt-Anchor" href="#hexo-asset-image"></a> hexo-asset-image</h3><p>下午发现自己博客上的本地图片显示出问题了，折腾了下，发现是因为之前开启了 hexo-next-theme 的图片懒加载。</p><p>hexo-next-theme 使用的图片懒加载插件是 <a href="https://github.com/ApoorvSaxena/lozad.js" target="_blank" rel="noopener">lozad.js</a> 。这个插件会将 <code>img</code> 的 <code>src</code> 属性改为 <code>data-src</code>。hexo-asset-image 没有这样的判断，所以不会处理。</p><p>改了下，想提个 PR 来着，发现原插件仓库已经被归档了……</p><p>于是 fork 了一份：<a href="https://github.com/hqweay/hexo-asset-image" target="_blank" rel="noopener">hexo-asset-image</a></p><h2 id="关于本博客的样式"><a class="markdownIt-Anchor" href="#关于本博客的样式"></a> 关于本博客的样式</h2><p>本博客的样式抄袭了 <a href="https://blog.k8s.li/" target="_blank" rel="noopener">木子</a> 和 <a href="https://www.elietio.xyz/" target="_blank" rel="noopener">零の轨迹</a>，两位大佬都公布了自己的源码，分别在 <a href="https://github.com/muzi502/blog" target="_blank" rel="noopener">muzi502/blog</a> 和 <a href="https://github.com/Elietio/Elietio.github.io" target="_blank" rel="noopener">Elietio/Elietio.github.io</a> ，有需要的可以参考。原理就是自定义 <code>custom_file_path</code> ，即 <code>source/_data/**</code> ，通过自定义的 CSS 覆盖默认样式。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置与操作 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>标题取为我也不知道自己胡说八道了些啥好了</title>
      <link href="/2020/02/21/self/"/>
      <url>/2020/02/21/self/</url>
      
        <content type="html"><![CDATA[<p>每当我自以为是地尝试去思考些什么东西，就会花大量的时间纠结这玩意到底是个什么东西——钻牛角尖于它的定义以至于忘记自己的目的、甚至因自己的无知而陷于自我否定。我如果不肯下工夫深入，无论我再怎么瞎想，最后得出的结论也只能如盲人摸象。这种乱吹牛皮导致的后果就是表现得没有基本常识。</p><p>不过也许我不是专业人士，不能用专业的术语阐述定义，但我至少可以描述出那些事物不是什么。如果每个人都能够承担一份寻求真理的责任，贡献出自己的一份思考，说出「至少这样是不对的」，最后也定能得到一个接近正确答案的结果来。</p><p>之前在短视频上看猫猫狗狗，被推荐了不少训宠的内容，才后知后觉以往看到的许多动物令人惊讶的人性化行为都是训练的结果，而且原理似乎都很简单——利用奖赏或惩罚让动物形成条件反射。</p><p>但如果一所承担着启蒙责任的机构只会威逼与利诱，那它不更像是搞驯化的吗？又或者对于某些人来说，驯化和搞教育其实是一回事？</p><p>我一直以为主动把自己归类于某个群体是一种很小众的自嗨行为。当我们拿「标签」来说事的时候，还有人会觉得自己并不属于某个标签。没错，人怎么会属于标签呢？应该是我们拥有标签才对。必须要注意，<strong>我们才是主体</strong> ，我们掌握着主动权。<strong>那些标签也许能展现我们某个方面的特质，但它们并不能代表我们。</strong></p><p>但是为何一旦谈到群体，就变了呢？在现在的语境里，标签和群体真的有什么不同吗？为什么我们不在这个划分的群体里，就在另一个划分的群体呢？</p><p>也许我们只是无意识地进行着某种 <strong>科学仪式</strong> 。但先退几步来说，群体又能代表一个个体几分呢？</p><p>当我对网民这个群体进行观察的时候，发现这个群体像是一种没有记忆的「生物」。「先博关注获得流量再删贴装没发生过」这样的戏码此起彼伏。可我自己不也是网民之一吗？难道我会承认自己是一个没有记忆的生物吗？就是我这样没有记忆的家伙构造出这个令人恶心的庞然大物吗？</p><p>这种整体的平衡能代表个人吗？难道是因为我们每个人在互联网上的行动都暗中修改了别人的记忆吗？</p><p>我有时候在高楼上看公路上的行人与车来车往，会觉得大家都很笨拙。不过这种上帝视角带来的感悟又能给身处其中的人多少价值呢？毕竟我一边走路一边看手机时会觉得开车的家伙根本不懂驾驶，但自己骑着小单车时又觉得边走路边玩手机的家伙都是智障。</p><p>《人类简史》里大意提到 <strong>正是人类对于群体的想像力才有了我们的今天。</strong></p><p>也许确实如此。而且如今基于互联网，它们可以收集到更多群体活动的信息，以此反思——或者。</p><p>总而言之，作为一个普通人，如今我们大多数人都可以方便地了解到「What」——以及基于这个「What」的各种蜚语与谣言。<strong>谣言蜚语对一个群体可能有一定影响</strong> ，但是作为个体来说，我们不应该深陷于「到底哪条消息是谣言」这种细节问题。我们能做的，应该是 <strong>学着在信息中寻找事实与真相。</strong></p><p>当然，有的人可能认为 <strong>自己难得劳神，等待专业人士公布真相就好了。</strong> 这些观点不在我的讨论范围内，我就不乱说了。其次，还涉及到信息渠道与取舍。我也不大懂就不多说了。</p><p>这种「做好自己」的做法并不是犬儒与精致的利己，毕竟多一个人这样做，至少信息里就会少掉许多噪音，所谓的谣言什么的也会少很多。这样实际上等于把公共责任分担到了每个人头上。</p><p>而在这基础之上呢，应该多了解点一个概念的产生是为了解决什么问题——即「Why」。同样的，还有「How」。但我觉得作为我这种普通人来说，又不搞研究，没啥必要了解「How」。</p><p>了解到了「Why」，我们就能超脱于某个概念之上了。</p><p>举个正能量点的例子：政府的目的是为了组织协调人类，维护起我们的想像。难道西方的政治体制就是唯一的解决之道吗？</p><p>诸如此类的，对吧？</p><p>就拿上面的「标签」来说，要我说，这玩意就是应用提供商为了 <strong>控制</strong> 用户，为了给我们做推荐——<strong>诸如此类</strong> 的东西，而搞出来的。我们为了这样的目的，当然可以去试试打标签——但如果到了把「标签」当作目的的地步，是不是就该歇一歇了？</p><p>比如应试是为了选拔，到把应试当作目的。</p><p>比如某网站为了网站质量设立了一个门槛，到后来这个门槛却发展为大家证明自己是高质量用户的勋章——而不管自己对这个网站是否真的有需求。这是我们身上普遍的毛病吗？从还不能温饱的年代没有一点缓冲过渡至互联网时代而形成的囤积癖、薅羊毛癖。</p><p><strong>并不是说这样不好。</strong> 当我们从群体的角度来看时，部分人 <strong>也许动机不纯但达到的表现</strong> 可以吸引更多的人向好。就像大家争着去做「高质量网友」，网络环境一定会有所改善。资本家通过捐款赢得良好的声誉，可以吸引更多的人去造福社会。</p><p><strong>不要过于揣摩别人的动机。</strong> 虽然这句话已经烂大街了，但我不介意再做一次复读机。崇尚圣人那套，不早该过时了吗？</p><p>问题在哪？问题在那本是为了鼓励大家向善——而不是鼓励大家去监督别人。路不拾遗有许多种方式可以达到，苛刻的刑法、互相举报的环境，或者物质条件充分、较高的道德水平……</p><p>16 年的电影《火锅英雄》就讲了一个主角本来有些不正确的想法，但最后阴差阳错制止了一场银行抢劫案的故事。我挺喜欢这个故事的——主角即便有过不好的念头甚至道德瑕疵，那也是最后「拯救世界」的英雄。</p><p>「鼓励人人做英雄的年代才会英雄辈出。」</p><p>罗素在《权威与个人》中也大意说过「『真理总会打败迫害』——这只是一个人类代代重复的善意的谎言之一。只不过总有明智的人会发现真理，而他们恰好生活在一个能接受这些真理的时代。」</p><p>有些人似乎很喜欢把「自己与群体」的关系理解为「自己与别人」。先不管是非对错，我先占据道德的高地再说。</p><p>一方面把批评群体的言论当作批评自己，另一方面以为维护群体的方法就是质疑别人。</p><p>但质疑——<strong>监督本身也不是问题</strong> ，对吧。有论据的监督和有论据的批评同样重要。同时，推崇正义的人也必然要承担反对派利用正义所获得的权利质疑正义的声音。就像言论自由必然会面对部分人的「我不赞同言论自由」。 <strong>观点没有对错之分，所有不必强求共识。</strong> 如果不承认这点，我看那些推崇的人自身就没搞懂自己所坚持的东西。 好在事实有真伪。 <strong>一个只会反对而拿不出论据的反对者，又有何惧？</strong></p><p>毕竟不管在哪，都有哗众取宠的人。 我敢保证，有些表达观点的人根本就不晓得自己在说什么。 为什么我这么确定？<strong>因为我自己就是这种人</strong> 。我什么都不懂，我也敢在这比比赖赖，我重拳出击……</p><p><strong>毕竟这是我自己的地盘。</strong></p><p>你反对公共空间里的某条言论，好歹自己去公共空间表达吧……在人家那比比赖赖算啥……</p><p>又扯远了，回到上文谈群体。立足于个人的时候，<strong>总是觉得自己所处的群体如何如何</strong> 实际上是自我的 <strong>一种逃避</strong> 。</p><p>就像知乎体励志学里常说的——你认识牛皮的人并不代表自己牛皮，对吧。</p><p>总是想着或者说着 <strong>我们这个群体如何如何</strong> ，有着悠久的历史、漂亮的发型……这有什么可骄傲的？</p><p>——<strong>这当然值得骄傲。</strong> 前提是自己这么想想， <strong>而不是去和别人比较</strong> 。我也骄傲，因生长的这片土地、孕育我的文化土壤、一个相对和平的环境……可把这当作一个比较的资本时，似乎就表示我承认了自己一无是处所以才需要群体特征来自慰。</p><p>不愿意承担责任却享受着骄傲，这大概才是精致的利己吧？</p><blockquote><p>又不负责任地胡说八道了一堆……啊，这个标题起得有轻小说风格。</p></blockquote><p>[2020-02-21-21-57]</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Next 主题字体相关配置</title>
      <link href="/2020/02/14/hexo-next-font/"/>
      <url>/2020/02/14/hexo-next-font/</url>
      
        <content type="html"><![CDATA[<p>版本：Hexo 4.0、Next 7.0</p><p>搜索的一些文章里提及改动的地方挺多的，我乱试了一下，似乎并不需要那么复杂。不知道是不是我没搞懂。</p><p>可能是因为 Next 更新了一些配置简化了操作？总之记录一下。</p><p>PS：Hexo Next 的瞎几把优化可以看看这篇：<a href="/2020/03/23/hexo-next/">尝试折腾了下用 hexo-next-theme 搭建的博客</a></p><h2 id="相关配置"><a class="markdownIt-Anchor" href="#相关配置"></a> 相关配置</h2><p>先看主题配置文件 <code>_config.yml</code> 里与字体相关的配置项：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># CDN</span></span><br><span class="line">  <span class="attr">host:</span> </span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># external: 控制是否使用 CDN。</span></span><br><span class="line">  <span class="comment"># family: 字体样式。</span></span><br><span class="line">  <span class="comment"># size: 字体大小。默认为 1（16px）。</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Global font settings used for all elements inside &lt;body&gt;.</span></span><br><span class="line">  <span class="comment"># 全局配置，覆盖 &lt;body&gt; 标签里所有元素</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> </span><br><span class="line">    <span class="attr">size:</span> </span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for site title (.site-title).</span></span><br><span class="line">  <span class="comment"># 博客名字那儿</span></span><br><span class="line">  <span class="attr">title:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> </span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span></span><br><span class="line">  <span class="comment"># 注意这是文章里的标题，而不是侧边栏的 toc</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="comment">#Roboto Mono</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts (.post-body).</span></span><br><span class="line">  <span class="comment"># 正文</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="comment"># 代码块</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br></pre></td></tr></table></figure><h2 id="挑选并配置字体"><a class="markdownIt-Anchor" href="#挑选并配置字体"></a> 挑选并配置字体</h2><p><a href="https://fonts.google.com/" target="_blank" rel="noopener">Google Fonts</a> 挑选一款字体，在配置里的 <code>family</code> 处添加即可。</p><p>例如：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span> </span><br><span class="line">    <span class="attr">size:</span></span><br></pre></td></tr></table></figure><p>如此配置之后，基于 hexo-next-theme 的博客就会全局使用「思源宋体」。</p><p>同理，配置代码块的字体也只需要挑选并覆盖相应配置即可。如：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># ……</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Roboto</span> <span class="string">Mono</span></span><br><span class="line">    <span class="attr">size:</span></span><br></pre></td></tr></table></figure><p>其它可配置样式的覆盖详见上面的 <a href="#%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE">相关配置</a></p><h2 id="样式的高级设置"><a class="markdownIt-Anchor" href="#样式的高级设置"></a> 样式的高级设置</h2><p>主题提供的字体配置挺到位的，但仍然有限。</p><p>一是只能配置 global、title、headings、posts、codes 几处（其实也挺丰富了）；二是能配置切换字体，设置字体大小，但不能设置颜色等；三是字体只能设置一种 —— <strong>网页是支持多种字体按优先级展示的。</strong></p><p>这些问题，可以使用 Next 4.0 提供的「加载用户自定义样式的配置」解决。</p><p>道理很简单，就是用 Next 提供的自定义样式覆盖默认或者配置的样式。</p><p>在主题配置文件 <code>_config.yml</code> 里开启：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.swig</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="comment">#variable: source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure><p>然后在 Hexo 根目录进入 <code>source/_data/styles.styl</code>（若无则新建），添加自己想要设置（覆盖）的样式就好啦！</p><p>比如我要更改全局的字体颜色，就可以这样：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#2e405b</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PS：同理，<strong>这里也可以覆盖博客的各种样式</strong>～</p><h2 id="font-family"><a class="markdownIt-Anchor" href="#font-family"></a> font-family</h2><p>字体设置默认使用的 CDN 是 <code>//fonts.googleapis.com</code>。如果从 CDN 上访问失败，就会默认使用如下的字体：</p><ul><li>Non-code Font: Fallback to <code>&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif</code></li><li>Code Font: Fallback to <code>consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace</code></li></ul><blockquote><p>非代码的文字使用 <code>&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif</code>。</p><p>代码块使用 <code>consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace</code>。</p></blockquote><p>浏览器要知道用什么字体，实际上是通过读取 CSS 属性 <code>font-family</code> <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>实现的。</p><p>在 Next 里，<code>font-family</code> 的默认值就是上面的两项。当我们在配置文件的 <code>font</code> 里添加字体后，被添加的字体就会被插入到 <code>font-family</code> 默认值的头部 —— 当 <code>font-family</code> 里配置了好几个值时，浏览器会优先使用排在前面的字体。</p><p>比如本站最后渲染出来的效果是这样的（你可以打开浏览器的调试窗口查看）：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'Noto Serif SC'</span>,<span class="string">"PingFang SC"</span>,<span class="string">"Microsoft YaHei"</span>,sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span>, <span class="selector-tag">pre</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'Roboto Mono'</span>,consolas,Menlo,monospace,<span class="string">"PingFang SC"</span>,<span class="string">"Microsoft YaHei"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然而很可惜的是，Next 似乎无法在配置文件里 <code>font</code> 的 <code>family</code> 处配置多个字体。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 无效配置</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span> <span class="string">,</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span></span><br><span class="line">    <span class="comment"># family: [Noto Serif SC , Noto Serif SC]</span></span><br><span class="line">    <span class="comment"># family: "Noto Serif SC , Noto Serif SC"</span></span><br></pre></td></tr></table></figure><p>如果你想要利用 <code>font-family</code> 的规则<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>:或者 <strong>修改默认使用的字体</strong>，阔以直接到源码 <code>source/css/_variables/base.styl</code> 里修改。</p><p>如下面，修改 <code>$font-family-chinese</code>：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Font families.</span></span><br><span class="line">- $font-family-chinese = "PingFang SC", "Microsoft YaHei";</span><br><span class="line">+ $font-family-chinese = "Noto Serif SC";</span><br></pre></td></tr></table></figure><p>Next 能加载用户自定义的样式，同样也能加载用户自定义样式使用的变量。然而同样比较可惜的是，自定义样式使用的变量里的定义（<code>source/_data/variables.styl</code>），<strong>不能覆盖变量默认定义的值</strong>（<code>hexo-next-theme/source/css/_variables/</code>）。但是你可以在默认定义里注释掉变量后，在自定义变量里重新定义并赋值。</p><h2 id="自定义样式使用的变量"><a class="markdownIt-Anchor" href="#自定义样式使用的变量"></a> 自定义样式使用的变量</h2><p>在主题配置文件 <code>_config.yml</code> 里开启使用自定义样式变量：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.swig</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="comment">#style: source/_data/styles.styl</span></span><br></pre></td></tr></table></figure><p>首先，在主题的 <code>source/css/_variables/base.styl</code> 下注释掉你想自定义的变量。如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Font families.</span><br><span class="line">&#x2F;&#x2F;$font-family-chinese &#x3D; &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;;</span><br></pre></td></tr></table></figure><p>然后在 <code>source/_data/variables.styl</code> （若无则新建）添加自定义变量并配置（你刚刚注释掉的变量）。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$font-family-chinese &#x3D; &quot;试试就试试&quot;;</span><br></pre></td></tr></table></figure><hr><p>我觉得 <code>source/_data/variables.styl</code> 的设计应该是为 <code>source/_data/styles.styl</code> 提供变量。像上面这样使用好像没啥必要。要说有点好处的话，就是方便了管理用户配置吧……</p><h2 id="googleapis-镜像"><a class="markdownIt-Anchor" href="#googleapis-镜像"></a> googleapis 镜像</h2><p>虽然许多文章里都提到说 <code>fonts.googleapis.com</code> 不太稳定，但我访问还挺顺利的……</p><p><code>fonts.googleapis.com</code> 的国内 CDN 比较少，只找到这么一篇帖子。</p><p><a href="https://sb.sb/blog/css-cdn/" target="_blank" rel="noopener">前端 CDNJS 库及 Google Fonts、Ajax 和 Gravatar 国内加速服务</a></p><p>用上面帖子里提供的 CDN，Next 的配置就可以这样：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">//fonts.loli.net</span></span><br></pre></td></tr></table></figure><h2 id="官方文档"><a class="markdownIt-Anchor" href="#官方文档"></a> 官方文档</h2><p><a href="https://theme-next.org/docs/theme-settings/#Fonts-Customization" target="_blank" rel="noopener">https://theme-next.org/docs/theme-settings/#Fonts-Customization</a></p><h2 id="如果修改不生效"><a class="markdownIt-Anchor" href="#如果修改不生效"></a> 如果修改不生效</h2><ol><li>浏览器清理下缓存。</li><li>是部署后没效果还是本地就没效果？<code>hexo s</code> 或 <code>hexo d</code> 前使用 <code>hexo clean</code> 清理下。</li><li>部署后没效果的话，稍微等一下远程的缓存刷新。</li><li>本地没生效的话，CSS 文件夹有没有使用 CDN？</li><li>再不行，进主题的 CSS 文件，或后文里提到的 <code>styles.styl</code> 为 <code>.post-body</code> 单独添加字体相关的 CSS。</li><li>尝试升级 hexo-theme……</li><li>如果仍不能正常显示，或者确定不是自己的问题，可以去 <a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">theme-next/hexo-theme-next</a> 提 issue 。</li></ol><h2 id="关于本博客的样式"><a class="markdownIt-Anchor" href="#关于本博客的样式"></a> 关于本博客的样式</h2><p>本博客的样式抄袭了 <a href="https://blog.k8s.li/" target="_blank" rel="noopener">木子</a> 和 <a href="https://www.elietio.xyz/" target="_blank" rel="noopener">零の轨迹</a>，两位大佬都公布了自己的源码，分别在 <a href="https://github.com/muzi502/blog" target="_blank" rel="noopener">muzi502/blog</a> 和 <a href="https://github.com/Elietio/Elietio.github.io" target="_blank" rel="noopener">Elietio/Elietio.github.io</a> ，有需要的可以参考。原理就是自定义 <code>custom_file_path</code> ，即 <code>source/_data/**</code> ，通过自定义的 CSS 覆盖默认样式。比如 <a href="#%E6%A0%B7%E5%BC%8F%E7%9A%84%E9%AB%98%E7%BA%A7%E8%AE%BE%E7%BD%AE">样式的高级设置</a> 。</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><code>font-family</code> 的规则是这样的：（1）优先使用排在前面的字体。（2）如果找不到该种字体，或者该种字体不包括所要渲染的文字，则使用下一种字体。（3）如果所列出的字体，都无法满足需要，则让操作系统自行决定使用哪种字体。 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>利用 <code>font-family</code> 的规则：比如「font-family应 该优先指定英文字体，然后再指定中文字体。否则，中文字体所包含的英文字母，会取代英文字体。」这样的问题。 <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客记录 </tag>
            
            <tag> 配置与操作 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promise、async/await 与 setInterval</title>
      <link href="/2020/02/10/async-Promise/"/>
      <url>/2020/02/10/async-Promise/</url>
      
        <content type="html"><![CDATA[<h2 id="tldr"><a class="markdownIt-Anchor" href="#tldr"></a> TL;DR;</h2><p>易混淆点：<code>async</code> 修饰的函数，不管函数内部 <code>return</code> 的是啥，最后都返回一个 <code>Promise</code>。而 <code>return</code> 返回的值，最后在 <code>Promise.then()</code> 里取到。</p><p><code>async</code> 修饰一个函数，只是说明会隐式地返回一个 <code>Promise</code>，并不是说 <strong>这个函数内的操作都在一个 <code>Promise</code> 内</strong>。</p><p>也就是说，<strong><code>async</code> 修饰一个方法时，并不能保证方法里的操作同步执行。</strong> （一般 <code>async</code> 修饰的方法，同步操作会使用关键字 <code>await</code> 。）</p><h2 id="需求"><a class="markdownIt-Anchor" href="#需求"></a> 需求</h2><p>定时循环执行一个数学计算，把计算出来的值返回并打印出来。</p><h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2><p>不假思索写出一段代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  count++;</span><br><span class="line">  <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(count);</span><br></pre></td></tr></table></figure><p>执行的结果是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0</span><br></pre></td></tr></table></figure><p>这样，肯定是不行的……</p><p>JavaScript 是异步的，实际上这段代码里的 <code>setInterval()</code> 和 <code>console.log()</code> 会同时执行。</p><p>要使它们的执行有一个先后顺序，这就涉及到 JavaScript 里如何「同步」的问题了。</p><p>同步的方式有许多种，这里谈谈 <code>Promise</code> 和 <code>async/await</code>。</p><h2 id="promise-和-setinterval"><a class="markdownIt-Anchor" href="#promise-和-setinterval"></a> Promise 和 setInterval</h2><h3 id="0x01-错误示例"><a class="markdownIt-Anchor" href="#0x01-错误示例"></a> 0x01 错误示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() 开始执行……"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      count++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">      <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">        clearInterval(<span class="keyword">this</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">    resolve(<span class="string">"testA() 返回内容，计算得到 count = "</span> + count);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testA().then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA.then() 开始执行"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>执行的结果是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">testA() 开始执行……</span><br><span class="line">testA() 返回内容，计算得到 count = 0</span><br><span class="line">testA.then() 开始执行</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br></pre></td></tr></table></figure><h3 id="0x01-分析"><a class="markdownIt-Anchor" href="#0x01-分析"></a> 0x01 分析</h3><p><code>Promise</code> 的构造函数接受一个函数作为参数，这个函数又使用两个函数作为参数：<code>resolve</code>、<code>reject</code>。</p><p>简单理解的话，<code>resolve</code> 和 <code>reject</code> 这两个函数都用于在 <code>Promise</code> 里返回值。后面调用 <code>Promise</code> 的 <code>then()</code> 时，就可以获取到返回的值。他们的不同之处在于 <code>resolve</code> 将 <code>Promise</code> 的状态标志为「成功」，而 <code>reject</code> 将 <code>Promise</code> 的状态标志为「失败」（通常对应遇到异常）。</p><p>这段代码的问题和上面的一样，即 <code>setInterval</code> 与 <code>resolve</code> 会同时运行。所以执行 <code>testA</code> 后，早早地拿到了上面根本没有进入 <code>setInterval</code> 进行运算的 <code>count</code> 的值。</p><h3 id="0x02-这样有效"><a class="markdownIt-Anchor" href="#0x02-这样有效"></a> 0x02 这样有效</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() 开始执行……"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      count++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">      <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">        clearInterval(<span class="keyword">this</span>);</span><br><span class="line">        resolve(<span class="string">"testA() 返回内容，计算得到 count = "</span> + count);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testA().then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA.then() 开始执行"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>执行的结果是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">testA() 开始执行……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() 返回内容，计算得到 count = 3</span><br><span class="line">testA.then() 开始执行</span><br></pre></td></tr></table></figure><h3 id="0x02-分析"><a class="markdownIt-Anchor" href="#0x02-分析"></a> 0x02 分析</h3><p>我们把 <code>resolve</code> 也放进 <code>setInterval</code> 里，当计算完成后再返回，这样，就能保证拿到计算后的值啦。</p><h2 id="async-await-与-setinterval"><a class="markdownIt-Anchor" href="#async-await-与-setinterval"></a> async await 与 setInterval</h2><p>我想整高级点，用 <code>async</code> 与 <code>await</code> 来重写，应该咋整？</p><h3 id="0x03-错误示例"><a class="markdownIt-Anchor" href="#0x03-错误示例"></a> 0x03 错误示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() 开始执行……"</span>);</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">    <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">      clearInterval(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"testA() 返回内容，计算得到 count = "</span> + count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testA().then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA.then() 开始执行了"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>执行的结果是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">testA() 开始执行……</span><br><span class="line">testA() 返回内容，计算得到 count = 0</span><br><span class="line">testA.then() 开始执行了</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br></pre></td></tr></table></figure><h3 id="0x03-分析"><a class="markdownIt-Anchor" href="#0x03-分析"></a> 0x03 分析</h3><p>同理，<code>setInterval</code> 与 <code>return</code> 会同时运行。所以执行 <code>testA</code> 后，早早地拿到了上面根本没有进入 <code>setInterval</code> 进行运算的值。</p><h3 id="0x04-还是错误的"><a class="markdownIt-Anchor" href="#0x04-还是错误的"></a> 0x04 还是错误的</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() 开始执行……"</span>);</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">    <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">      clearInterval(<span class="keyword">this</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"testA() 返回内容，计算得到 count = "</span> + count;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testA().then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA.then() 开始执行了"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>执行的结果是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">testA() 开始执行……</span><br><span class="line">undefined</span><br><span class="line">testA.then() 开始执行了</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br></pre></td></tr></table></figure><h3 id="0x04-分析"><a class="markdownIt-Anchor" href="#0x04-分析"></a> 0x04 分析</h3><p>想当然地用类似上面 <code>Promise</code> 的方法，把 <code>return</code> 放在 <code>setInterval</code> 里面，还是不行。</p><p>获取到的 <code>data</code> 是 <code>undefined</code>。这说明有个隐式的 <code>return</code> 和 <code>setInterval</code> 一起执行啦……</p><h3 id="这可咋整啊"><a class="markdownIt-Anchor" href="#这可咋整啊"></a> 这可咋整啊……</h3><p><code>setInterval</code> 是异步的，咋整，用最上面的方法，套个 <code>Promise</code> 呗……可这不就又回到最初的起点了吗……</p><h3 id="0x05-这样可以"><a class="markdownIt-Anchor" href="#0x05-这样可以"></a> 0x05 这样可以</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() 开始执行……"</span>);</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      count++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">      <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">        clearInterval(<span class="keyword">this</span>);</span><br><span class="line">        resolve(<span class="string">"testA() 返回内容，计算得到 count = "</span> + count);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA 延迟后的内容"</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testA().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA.then() 开始执行了"</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">testA() 开始执行……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA() setTimeout 内容……</span><br><span class="line">testA 延迟后的内容</span><br><span class="line">testA() 返回内容，计算得到 count = 3</span><br><span class="line">testA.then() 开始执行了</span><br></pre></td></tr></table></figure><h3 id="0x05-分析"><a class="markdownIt-Anchor" href="#0x05-分析"></a> 0x05 分析</h3><p>把 <code>setInterval</code> 包装到一个 <code>Promise</code> 里并返回，然后使用 <code>await</code> 等待这个 <code>Promise</code>（包装着 <code>setInterval</code>）执行完并取得返回值。</p><p>再把这个返回值返回。</p><h2 id="为啥呢"><a class="markdownIt-Anchor" href="#为啥呢"></a> 为啥呢</h2><p><code>async</code> 修饰的函数，不管 <code>return</code> 的是啥，最后都返回一个 <code>Promise</code>。而 <code>return</code> 返回的值，最后在 <code>Promise.then()</code> 里取到。</p><p>例如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getCount().then(<span class="function">(<span class="params">count</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(count);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10</span></span><br></pre></td></tr></table></figure><p>为啥 0x03 和 0x04 是错误的呢？</p><p>因为 <code>async</code> 修饰一个函数，只是说明会隐式地返回一个 <code>Promise</code>，并不是说 <strong>这个函数内的操作都在一个 <code>Promise</code> 内</strong>。</p><p>也就是说，<strong><code>async</code> 修饰一个方法，并不能保证方法里的操作同步执行。</strong></p><blockquote><p>之前我把 <code>async</code> 这类关键字与 Java 里面的一些关键字对比理解……</p></blockquote><p>按我的理解，「0x03 错误示例」就相当于：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() 开始执行……"</span>);</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">    <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">      clearInterval(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">"testA() 返回内容，计算得到 count = "</span> + count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testA().then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA.then() 开始执行了"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x03 错误示例</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">testA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() 开始执行……"</span>);</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">    <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">      clearInterval(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"testA() 返回内容，计算得到 count = "</span> + count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testA().then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA.then() 开始执行了"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="其它"><a class="markdownIt-Anchor" href="#其它"></a> 其它</h2><p>虽然标题是：「Promise、async/await 与 setInterval」，实际上 <code>setTimeout</code> 也是一个道理。</p><h2 id="箭头函数"><a class="markdownIt-Anchor" href="#箭头函数"></a> 箭头函数</h2><p>我在这篇文章里用 <code>setInterval</code> 时，用的是：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  count++;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">  <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p><code>setInterval</code> 传入一个函数作为参数，使用：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>而不能用：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">()=&gt;&#123;&#125;</span><br></pre></td></tr></table></figure><p>这是因为 <code>function(){}</code> 函数里的 this 指的是 <code>function(){}</code> 本身，而 <code>()=&gt;{}</code> 里的 this 则指的是 <code>()=&gt;{}</code> 外部的环境。</p><p>按定义来讲则是：<strong>箭头函数没有 <code>this</code>。如果访问 <code>this</code>，则从外部获取。</strong></p><p>如果我们在这用 <code>()=&gt;{}</code> 的话，如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">setInterval(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">  count++;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">  <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>这里的 <code>setInterval</code> 则会一直循环执行，不会停止。</p><p>因为 <code>clearInterval(this)</code> 根本没得效果。</p><p>如果要用箭头函数的话，需要这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> interval = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  count++;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"testA() setTimeout 内容……"</span>);</span><br><span class="line">  <span class="keyword">if</span> (count === <span class="number">3</span>) &#123;</span><br><span class="line">    clearInterval(interval);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 简单总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 引用本地图片以及引用本地任意位置图片的一点思路</title>
      <link href="/2019/12/25/hexo/"/>
      <url>/2019/12/25/hexo/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>之前想在博文里引用本地图片，按着随便搜到的教程无脑折腾了一番，当时记录了下步骤放在博文里，其实根本没搞懂。在 CSDN 上的备份经常被人访问，为了不误人子弟，稍微按自己的理解捋一下。</p><p>当然，也不一定正确。</p><p><strong>先提一下，我目前的 hexo 版本为 4.0，其它版本可能会有不同。</strong></p><h2 id="引用本地图片与插件-hexo-asset-image"><a class="markdownIt-Anchor" href="#引用本地图片与插件-hexo-asset-image"></a> 引用本地图片与插件 hexo-asset-image</h2><h3 id="引用本地图片"><a class="markdownIt-Anchor" href="#引用本地图片"></a> 引用本地图片</h3><p>首先要在 Hexo 博客配置添加一行<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开始使用本地静态资源</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>添加这行配置后，当你什么插件也没安装时，使用 hexo 4.0 也可以在文章引用本地图片，引用方式是这样的：</p><p>首先在 <code>_posts</code> 文件夹下建立一个博文文件，比如 <code>2019-12-23-hello-world.md</code>，再建立一个同名的文件夹 <code>2019-12-23-hello-world</code>。这篇文章要引用的图片就放在该文件夹下。</p><blockquote><p>或者 <code>hexo new 2019-12-23-my-post</code></p></blockquote><p>比如我就在该目录下放一个图片<code>2019-12-23-hello-world/haha.png</code>。然后在博文 Markdown 文件里引用该图片，怎么引用呢？用下面这种方式：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](haha.png)</span><br></pre></td></tr></table></figure><p>如果你熟悉 Markdown 语法的话就会注意到，这个引用路径不太对劲。<strong>而且通过该路径引用图片，本地的 Markdown 编辑器是不能预览图片的！</strong></p><p>本来文章与图片的路径是这样的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-- /2019-12-23-hello-world</span><br><span class="line">|----  haha.png</span><br><span class="line">|-- 2019-12-23-hello-world.md</span><br></pre></td></tr></table></figure><p>理论上 <code>2019-12-23-hello-world.md</code> 要引用 <code>2019-12-23-hello-world</code> 文件夹下的 <code>haha.png</code>，引用方式应该是：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](2019-12-23-hello-world/haha.png)</span><br></pre></td></tr></table></figure><p>这样才对啊！</p><p><strong>那么，为什么引用的时候不能加文件夹的路径呢？</strong></p><p>这是因为 hexo 在渲染的时候，会把 <code>2019-12-23-hello-world.md</code> 渲染为 <code>public/2019/12/23/hello-world</code> 下的 <code>index.html</code> 网页文件，再把对应文件夹下的静态资源，比如图片 <code>/2019-12-23-hello-world/haha.png</code> 也拷贝到 <code>public/2019/12/23/hello-world</code> 下。</p><p>因此，虽然在我们写博文的时候看来，博文和图片不在同一个文件夹路径下，但是它们最终被渲染后，是放在同一个文件夹下的。</p><p>像这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 渲染后</span><br><span class="line">|-- /public/2019/12/23/hello-world</span><br><span class="line">|---- index.html</span><br><span class="line">|---- haha.png</span><br></pre></td></tr></table></figure><p>所以我们在写博文引用图片时，就得把它们当作在一个文件夹下来处理，也就是引用的时候，要去掉文件夹路径。</p><p>最后渲染出来的效果是：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"haha.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>这样有点反直觉啊！！</strong></p><p>或者简单讲，<strong>我想在本地编辑器里预览图片</strong>，该咋整呢？</p><h3 id="关于-hexo-asset-image"><a class="markdownIt-Anchor" href="#关于-hexo-asset-image"></a> 关于 hexo-asset-image</h3><p>根据我看到的情况，hexo-asset-image 插件解决的问题是「给引用的本地图片添加绝对路径。」</p><p>毕竟说明里只提到「Give asset image in hexo a absolutely path automatically」……</p><p>比如上面渲染出来的图片标签是用的相对路径：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"haha.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure><p>经 hexo-asset-image 插件处理后，标签会变成绝对路径：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/2019/12/23/hello-world/haha.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是，在我现在的环境（hexo 4.0）发现，使用 hexo-asset-image 插件后，我可以在博文（原 Markdown 文件）里使用</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](2019-12-23-hello-world/haha.png)</span><br></pre></td></tr></table></figure><p>这种形式来引用图片了！</p><p><strong>这样的好处是本地编辑器里也可以直接预览图片。</strong></p><blockquote><p><code>![](haha.png)</code> 这种方式也仍可正常使用。</p></blockquote><p>跟踪了一下插件的代码，发现插件在获取到 <code>2019-12-23-hello-world/haha.png</code> 这个链接后，会先通过字符串操作获取到后面的 <code>haha.png</code>，然后统一进行「相对路径转绝对路径」的操作。</p><p>最后处理为：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/2019/12/23/hello-world/haha.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure><p>有些博文里直接把「解决本地编辑器图片显示」当作 hexo-asset-image 的本来功能，可该插件的 Issue 里还有「如何在本地支持 Markdown 图片显示」……</p><p>我觉得可能该插件的本来目的只是「将静态资源的引用路径转化为绝对路径」，至于后面解决了「本地预览」应该是随手做的……不然作者怎么也不说明下……</p><p><strong>也可能我理解错了。</strong></p><blockquote><p>老实说我有点迷惑，也许这可能和 Hexo 的历史有关？</p></blockquote><h3 id="安装-hexo-asset-image"><a class="markdownIt-Anchor" href="#安装-hexo-asset-image"></a> 安装 hexo-asset-image</h3><p>不过至今（2019-12-25）为止， hexo 4.0 使用了 npm 仓库里的插件 hexo-asset-image 1.0 有点问题，安装后图片不能正常显示，查看图片路径被渲染成了 <code>/.xx/haha.png</code> 的格式。（xx 是域名后缀。）</p><p>但是直接安装 Github 仓库的源码没问题，可以执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/xcodebuild/hexo-asset-image.git</span><br><span class="line"><span class="comment"># or yarn add https://github.com/xcodebuild/hexo-asset-image.git</span></span><br></pre></td></tr></table></figure><p>具体使用及配置查看 <a href="https://github.com/xcodebuild/hexo-asset-image" target="_blank" rel="noopener">https://github.com/xcodebuild/hexo-asset-image</a></p><h2 id="hexo-asset-image-的说明与问题"><a class="markdownIt-Anchor" href="#hexo-asset-image-的说明与问题"></a> hexo-asset-image 的说明与问题</h2><p>我在刚使用 Hexo 时，搜索静态图片的问题，大家都推荐使用 hexo-asset-image 这个插件，也没多做考虑……</p><p>现在回头看，其实有许多的轮子可以解决这个问题……比如在 npm 或者 Github 搜索 <code>hexo-asset</code> 或 <code>hexo-imge</code>，就能搜到一大堆大佬们的轮子……</p><blockquote><p>甚至能搜到一大堆 <code>hexo-asset-image</code> 的 fix 包……</p></blockquote><p>现在 <code>hexo-asset-image</code> 已经被作者归档了……我想 npm 上的包应该是因为过时没有更新才会出问题的吧……</p><p><strong>也许现在应该有更好的解决方案。</strong>（但我没研究，毕竟自己的需求够用了……）</p><p>使用 hexo-asset-image 可能会遇到一些问题，比如与懒加载插件搭配时的问题。（我遇到了，所以提一下</p><p>感觉其它莫名其妙的问题也挺多的……但是这个包现在没人统一维护，有许多人都只能修复了一下自己的问题然后单独说明一下……</p><h3 id="hexo-asset-image-与-懒加载的冲突"><a class="markdownIt-Anchor" href="#hexo-asset-image-与-懒加载的冲突"></a> hexo-asset-image 与 懒加载的冲突</h3><p>我在使用 Hexo 的主题 hexo-next-theme 开启图片懒加载时，hexo-asset-image 插件会失效。</p><p>跟了下代码，发现 hexo-next-theme 使用的图片懒加载插件是 <a href="https://github.com/ApoorvSaxena/lozad.js" target="_blank" rel="noopener">lozad.js</a> 。这个插件会将 <code>img</code> 的 <code>src</code> 属性改为 <code>data-src</code>。hexo-asset-image 的工作原理是统一处理 <code>src</code> ，没有对 <code>data-src</code> 等属性的判断，所以就不会处理图片。</p><p>我自己改了下，想提个 PR 来着，发现原插件仓库已经被归档了……</p><p>于是 fork 了一份：<a href="https://github.com/hqweay/hexo-asset-image" target="_blank" rel="noopener">hqweay/hexo-asset-image</a></p><p>在解决这个问题的时候，发现也有人遇到过类似的问题。可以参考一下别人的问题：</p><p><a href="https://github.com/ci0n/hexo-asset-image" target="_blank" rel="noopener">ci0n/hexo-asset-image</a></p><p>该仓库的 ChangeLog：</p><blockquote><p>2019-09-23: support hexo-lazyload-image<br>2019-09-23: fixed hexo-abbrlink using *.html image path error</p></blockquote><h2 id="与正文无关引用本地任意位置图片的一点思路"><a class="markdownIt-Anchor" href="#与正文无关引用本地任意位置图片的一点思路"></a> 【与正文无关】引用本地任意位置图片的一点思路</h2><p>hexo 引用本地图片的方式确实不大优雅 —— 必须把图片存储在固定的位置。有时候写一些截图比较多的文章，还得把截图一张张放到那个固定的文件夹，再进行引用。</p><p>比较直观的操作应当这样才对：截图后直接粘贴到文档里。</p><p>如果用图床，甚至是用 Github 做图床，可以使用 <a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noopener">PicGo</a> 这个开源的图床上传工具。它可以把你剪贴板里图片上传到图床，然后返回一个 Markdown 格式的引用路径——再粘贴到你需要的位置即可。</p><p>看了一下 hexo-asset-image 的实现方式，想到也许可以把 Markdown 博文中 <strong>任意位置的图片</strong> 拷贝到相应的文件夹里，然后用类似的方式进行字符串替换。</p><p><strong>然后尝试了一下，没做出来……记录一下思路。</strong></p><p>首先需要考虑到不同平台的绝对路径不同，我心想先把流程做出来，于是以 Linux 的为准。</p><p>然后因为我一开始不懂 hexo 怎么写插件，于是就在 hexo-asset-image 上直接改。我把任意位置图片的路径获取到了，然后就是把该图片往文章对应的文件夹复制了。</p><p>这里有两个问题，一是我应该把图片复制到 <code>/public</code> 下还是 <code>/posts</code> 下呢，先复制到 <code>/post</code> 文件夹下吧。</p><p>这还有个问题，如果在 <code>/posts</code> 还有子文件夹咋办？管他的，先不管这个，莽出来再说。</p><p>然后又有问题了，我要把图片复制过来，那首先得判断该文件夹下有没有博文 Markdown 文件对应的文件夹吧……如果没有，我还得创建……</p><p>创建的文件夹得与博文 Markdown 文件同名。我已经创建测试文件夹成功了，完事后才发现在这儿获取不到该篇文章对应的 Markdown 文件的文件名。</p><p>因为 hexo-asset-image 实际上操作的是 hexo 生成的 public 下的 index.html 网页文件……</p><p>于是我尝试到 hexo 渲染 Markdown 为 HTML 的那儿去操作，正当我找到入口，准备大干一番时又发现个问题……插件那边的代码获取不到我在这儿找到的变量啊……</p><p>太麻烦了，遂放弃之。</p><p>PS：我的思路局限在「渲染时」或者「渲染后」，也许写个脚本直接处理 Markdown 博文，很简单就能做到吧……</p><h2 id="changelog"><a class="markdownIt-Anchor" href="#changelog"></a> ChangeLog</h2><p>[2020-04-02-update]</p><p>PS：Typora@0.9.86(beta) 现在可以在设置里开启「插入图片时」，「复制图片到当前文件夹」等操作。而且和 PicGo 联动了，将来甚至可以插入图片时自动上传到云服务再返回链接吧。这就完美实现了我上面关于「引用本地图片」的想法啦！酷～</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>这是 Hexo 官方提供的：<a href="https://hexo.io/docs/asset-folders" target="_blank" rel="noopener">asset-folders</a> ，不是插件提供的。其它静态资源的引用方式也可以看这个链接。 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>译 - C, what the fuck??! - Robin Martijn</title>
      <link href="/2019/12/19/T-c-what-the-fuck/"/>
      <url>/2019/12/19/T-c-what-the-fuck/</url>
      
        <content type="html"><![CDATA[<h2 id="tldr"><a class="markdownIt-Anchor" href="#tldr"></a> TL;DR</h2><p>当初由于 ISO646 标准，部分国家的程序员打不出 <code>{</code>、<code>}</code> 等字符，所以 ANSI C 委员会引入了三元符。但三元符的使用可能会产生一些有趣的效果……</p><h2 id="测试效果"><a class="markdownIt-Anchor" href="#测试效果"></a> 测试效果</h2><p>gcc version ：gcc (GCC) 9.2.0</p><p><img data-src="/2019/12/19/T-c-what-the-fuck/show.png" alt="show"></p><h2 id="正文"><a class="markdownIt-Anchor" href="#正文"></a> 正文</h2><p>原文：<a href="https://bowero.nl/blog/2019/12/15/c-what-the-fuck/" target="_blank" rel="noopener">C, what the fuck??!</a></p><p><em>December 2019</em></p><p>下面这段代码执行后，变量 <code>a</code> 的值应该是多少？</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// What will be the value of a????/</span></span><br><span class="line">a++;</span><br></pre></td></tr></table></figure><p>哈哈，既然我这样问了，你可能会觉得至少 <code>a</code> 的值不应该是 <code>1</code>。</p><p>实际上呢， <code>a</code> 的值仍然是 <code>0</code>，不会改变，因为 <code>a++;</code> 这行代码根本不会被执行。在 <code>a++;</code> 上面的那段注释里发生了些特殊的事情。</p><p>在讨论这个问题前，让我们先看看下面这个例子。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!didIMakeAMistake() ??!??! CIsWrongHere();</span><br></pre></td></tr></table></figure><p>首先，这段代码居然能能通过编译！这是咋回事？</p><p>要理解这个问题，首先要保证代码运行在现代版本的 <code>gcc</code> 环境并且开启了参数 <code>-trigraphs</code>（三元符）。 三元符是为了 <a href="https://www.gs1tw.org/twct/gs1w/download/DataMatrix_Character.pdf" target="_blank" rel="noopener">the ISO/IEC 646 Invariant character set</a> （ISO646 标准）中缺少的 9 个字符而发明的特殊字符组合。让我们看看 ISO646 标准中的字符。</p><p><img data-src="https://bowero.nl/blog/wp-content/uploads/2019/12/Screenshot_2019-12-15-ISO-IEC-646-Wikipedia.png" alt="img">Image: <a href="https://en.wikipedia.org/wiki/ISO/IEC_646" target="_blank" rel="noopener">Wikipedia</a></p><p>经常使用 C 的朋友应该一眼就看出这里缺少了哪 9 个字符吧，它们是这几个：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## \ ^ [ ] | &#123; &#125; ~</span><br></pre></td></tr></table></figure><p>有的朋友看了上面的表格可能会反倒感到困惑，哪儿缺少了，这 9 个字符不都在表格里吗？哈哈，注意一下，这 9 个字符都是灰色的，因为他们是各个国家的规则而不是国际规则。</p><p>有趣起来啦，让我们看个简单的例子：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; a[i] = <span class="string">'\n'</span>; &#125;</span><br></pre></td></tr></table></figure><p>上面这段简单的代码要是由一个瑞典程序员来写的话，可能是这样的：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä aÄiÜ = 'Ön'; ü</span><br></pre></td></tr></table></figure><p>为啥？因为他们那儿的字符规则里使用的字符和美国程序员不同嘛。</p><p>ANSI C 委员会自然也认识到这个问题了，于是它们决定引入三元符。用 9 种标准的字符组合来替换那些不标准的字符。</p><p><img data-src="https://bowero.nl/blog/wp-content/uploads/2019/12/Screenshot_2019-12-15-Digraphs-and-trigraphs-Wikipedia.png" alt="img"></p><p>Image: <a href="https://en.wikipedia.org/wiki/Digraphs_and_trigraphs" target="_blank" rel="noopener">Wikipedia</a></p><p>这种解决方案当然不太优雅，但至少能用。</p><p>晓得了这些，我们再来看一下前面的几段代码。首先是后面那段简单点的：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!didIMakeAMistake() ??!??! CIsWrongHere();</span><br></pre></td></tr></table></figure><p>查看一下上面的表格，我们就知道这段代码里的 <code>??!</code> 实际上应该被取代为 <code>|</code>。因此这行代码的实际内容其实是：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!didIMakeAMistake() || CIsWrongHere();</span><br></pre></td></tr></table></figure><p>如果你理解 <a href="https://en.wikipedia.org/wiki/Short-circuit_evaluation" target="_blank" rel="noopener">short-circuit evaluation</a> （短路求值）是怎么工作的，那你就应该知道这行代码也可以表示为：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (didIMakeAMistake()) </span><br><span class="line">  CIsWrongHere();</span><br></pre></td></tr></table></figure><p>前面提到的第一个例子就更有趣啦，这也是一个我们为什么应该谨慎使用三元符的典例。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// What will be the value of a????/</span></span><br><span class="line">a++;</span><br></pre></td></tr></table></figure><p>上面已经说过啦，这段代码执行后，变量 <code>a</code> 的值实际上还是 <code>0</code>，因为 <code>a++;</code> 根本就不会被执行。</p><p>注意，只有当 <code>??</code> 后面跟随的字符在上面表格里的 9 个字符串里面，<code>??</code> 与该字符组成的字符串才会被识别为三元组。所以 C 预处理器将会把上面的代码处理为：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// What will be the value of a??\</span></span><br><span class="line">a++;</span><br></pre></td></tr></table></figure><p>这里的 <code>\</code> 实际上是换行的转移符，所以这段代码实际上又相当于：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// What will be the value of a??a++;</span></span><br></pre></td></tr></table></figure><p>你瞧，这就是为什么 <code>a++;</code> 不会被执行。</p><p>I would like to end with a note from the committee itself:</p><blockquote><p>The Committee makes no claims that a program written using trigraphs looks attractive. As a matter of style, it may be wise to surround trigraphs with white space, so that they stand out better in program text. Some users may wish to define preprocessing macros for some or all of the trigraph sequences.</p><p><a href="http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf" target="_blank" rel="noopener">Rationale for International Standard Programming Languages C</a> (5.2.1.1)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 翻译 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 翻译 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro 个人新装配置</title>
      <link href="/2019/12/18/manjaro/"/>
      <url>/2019/12/18/manjaro/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>[update-2020-05-17]</p><p>安装的版本：Linux version 5.3.15-1-MANJARO</p><p>Manjaro 基于 Arch Linux，下面许多是 Arch 特性，但为了统一我都用 Manjaro 表示……</p><p>Arch 安装可以稍微参考这篇安装记录： <a href="https://wiki.leay.net/tech/config/linux/2020-02-23-archer-s-arch/" target="_blank" rel="noopener">Archer`s Arch</a></p><h3 id="建议"><a class="markdownIt-Anchor" href="#建议"></a> 建议</h3><p>文中对「如何做启动盘」等基础问题都没有详细说明，若是想要从零安装 Manjaro 系统建议在网上找一篇较新的教程。</p><p>期间若有问题可以优先查阅：<a href="https://wiki.archlinux.org/index.php/General_recommendations_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener">ArchWiki 建议阅读 中文版</a></p><p>PS：不过本文对 <a href="#%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95">中文输入方案</a> （fcitx + 中文输入 + 双拼 + 直角引号配置……）与 <a href="#%E9%85%8D%E7%BD%AE%E6%BA%90">源的配置</a> （三类源，从哪找镜像……）介绍得还比较详细，其它发行版也阔以参考。</p><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p>镜像下载推荐：<a href="https://mirrors.ustc.edu.cn/manjaro-cd/" target="_blank" rel="noopener">中科大</a></p><p>写入工具推荐：<a href="https://rufus.ie/" target="_blank" rel="noopener">rufus</a></p><p>说明：镜像目录里有 gnome、kde、xfce，这是官方提供的基于 Manjaro 的不同桌面环境。</p><p>各种不同之处与选择斟酌不提。（选择困难症建议 kde，我用着挺爽的……）</p><p>PS：还有各种社区桌面版本，比如 manjaro-deepin。</p><h2 id="配置源"><a class="markdownIt-Anchor" href="#配置源"></a> 配置源</h2><p>PS：把源设置好，装软件才方便嘛，所以先谈配置源。</p><h3 id="配置国内源"><a class="markdownIt-Anchor" href="#配置国内源"></a> 配置国内源</h3><h4 id="直接添加"><a class="markdownIt-Anchor" href="#直接添加"></a> 直接添加</h4><p>这儿配置的是就是 pacman 安装软件时使用的源。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman-mirrors -i -c China -m rank</span><br></pre></td></tr></table></figure><p>执行后会弹出提示框，勾选需要使用的源即可。</p><p>然后执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure><p>查看是否含有刚才选择的源，若有则完成。</p><p><strong>PS：当然，直接手动在该文件添加源地址也是可以的。</strong></p><h4 id="手动在该文件添加源地址"><a class="markdownIt-Anchor" href="#手动在该文件添加源地址"></a> 手动在该文件添加源地址</h4><p>PS：可以使用 Arch 提供的镜像生成器<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>找到最新的镜像：<a href="https://www.archlinux.org/mirrorlist/" target="_blank" rel="noopener">Pacman Mirrorlist Generator</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Arch Linux repository mirrorlist</span></span><br><span class="line"><span class="comment">## Generated on 2020-03-06</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## China</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.163.com/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.cqu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.cqu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirror.lzu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.neusoft.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.neusoft.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirror.redrock.team/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirror.redrock.team/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.xjtu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.zju.edu.cn/archlinux/$repo/os/$arch</span></span><br></pre></td></tr></table></figure><p>生成如上源后，手动粘贴至 <code>/etc/pacman.d/mirrorlist</code> 。</p><h3 id="可选添加-archlinuxcn-源"><a class="markdownIt-Anchor" href="#可选添加-archlinuxcn-源"></a> 【可选】添加 ArchLinuxCN 源</h3><blockquote><p>ArchLinuxCN 是 Arch 中文组维护的一个软件合集，包含了中文用户常用的 WPS Office、搜狗拼音、Google Chrome 等软件。<strong>不过，Arch 本身和它的常见衍生版（如：Manjaro）默认都不包含这个源，因此我们需要手动来配置使用这个源。</strong></p><p><a href="https://www.jianshu.com/p/80d0ec113c0a" target="_blank" rel="noopener">如何配置ArchLinuxCN软件源</a></p></blockquote><p><strong>如上所说，如果没装这些软件的需求可以先不配置。</strong></p><h4 id="添加"><a class="markdownIt-Anchor" href="#添加"></a> 添加</h4><p>打开 <code>etc/pacman.conf</code>。Manjaro 自带 nano 和精简的 vim（vi），建议用 nano，vi 使用方向键会乱码。（方向移动是 h/j/k/l）</p><blockquote><p># 安装完整 vim</p><p>sudo pacman -Sy vim</p></blockquote><p>ArchLinuxCN 的源可以在这里<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>查看：<strong><a href="https://github.com/archlinuxcn/mirrorlist-repo" target="_blank" rel="noopener">arch-linux-mirrorlist</a></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开 etc/pacman.conf</span></span><br><span class="line">sudo nano /etc/pacman.conf</span><br></pre></td></tr></table></figure><p>添加你找到的镜像。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line">SigLevel = Optional TrustedOnly</span><br><span class="line">Server = http://mirrors.tuna.tsinghua.edu.cn/archlinuxcn//<span class="variable">$arch</span></span><br></pre></td></tr></table></figure><p>同理这里用的清华源。</p><h4 id="导入-gpg-key-并更新系统"><a class="markdownIt-Anchor" href="#导入-gpg-key-并更新系统"></a> 导入 GPG key 并更新系统</h4><p>看包名就能猜到这是 archlinuxcn 的 key，安装后作为验证，就可以安装软件了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新数据源</span></span><br><span class="line">sudo pacman -Syy</span><br><span class="line"><span class="comment"># 安装导入 GPG key</span></span><br><span class="line">sudo pacman -S archlinuxcn-keyring</span><br><span class="line"><span class="comment"># 更新系统</span></span><br><span class="line">sudo pacman -Syu</span><br></pre></td></tr></table></figure><h3 id="可选aur-源"><a class="markdownIt-Anchor" href="#可选aur-源"></a> 【可选】AUR 源</h3><p>AUR 源可以使用清华源，文档<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>见这：<a href="https://mirror.tuna.tsinghua.edu.cn/help/AUR/" target="_blank" rel="noopener">清华大学开源软件镜像站</a></p><p>yay 用户执行以下命令修改 aururl :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay --aururl <span class="string">"https://aur.tuna.tsinghua.edu.cn"</span> --save</span><br></pre></td></tr></table></figure><p>修改的配置文件位于 <code>~/.config/yay/config.json</code> ，还可通过以下命令查看修改过的配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -P -g</span><br></pre></td></tr></table></figure><p>yay 是一个包管理软件，与 pacman 的不同之处在于 yay 用于在终端安装 AUR 的包。<strong>具体，阔以查看下面的 <a href="#%E5%8C%85%E7%AE%A1%E7%90%86">包管理</a> 。</strong></p><h2 id="中文输入法"><a class="markdownIt-Anchor" href="#中文输入法"></a> 中文输入法</h2><p>输入法引擎见这：<a href="https://wiki.archlinux.org/index.php/Fcitx_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E8%BE%93%E5%85%A5%E6%B3%95%E5%BC%95%E6%93%8E" target="_blank" rel="noopener">Fcitx_输入法引擎</a></p><p>我选用的是 sunpinyin。</p><h3 id="安装-fcitx"><a class="markdownIt-Anchor" href="#安装-fcitx"></a> 安装 fcitx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Sy fcitx</span><br><span class="line">sudo pacman -S fcitx-sunpinyin <span class="comment"># sunpinyin</span></span><br><span class="line">sudo pacman -S fcitx-configtool <span class="comment"># 配置工具</span></span><br></pre></td></tr></table></figure><h3 id="不能输入中文"><a class="markdownIt-Anchor" href="#不能输入中文"></a> 不能输入中文</h3><p>建议查看：<a href="https://wiki.archlinux.org/index.php/Fcitx_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E8%BE%93%E5%85%A5%E6%B3%95%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener">Fcitx_(简体中文)#输入法模块</a> 里的设置环境变量。</p><p>有些教程让修改 <code>.xprofile</code> 等文件，我实测无用，大概是过期了。同理，下面的解决方案也不一定长久，所以建议按着上面文档里的最新情况来。</p><p>修改 <code>~/.pam_environment</code>（若无则新建），添加如下配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GTK_IM_MODULE=fcitx</span><br><span class="line">QT_IM_MODULE=fcitx</span><br><span class="line">XMODIFIERS=@im=fcitx</span><br></pre></td></tr></table></figure><p>然后重启之。</p><h3 id="双拼配置自选方案"><a class="markdownIt-Anchor" href="#双拼配置自选方案"></a> 双拼配置自选方案</h3><h4 id="图形化工具配置"><a class="markdownIt-Anchor" href="#图形化工具配置"></a> 图形化工具配置</h4><p>如果装了 fcitx-configtool 这个图形化工具，可以在里面搜索「pinyin」找到双拼的选项，直接配置。</p><h4 id="手动配置"><a class="markdownIt-Anchor" href="#手动配置"></a> 手动配置</h4><p>fcitx 自带双拼输入法，使用的是自然码。如需修改为其它双拼方案，按如下操作即可。</p><p>打开 <code>~/.config/fcitx/conf/fcitx-pinyin.config</code>。</p><p>能看到默认双拼方案是自然码（Ziranma）。</p><p>我用的小鹤双拼，所以取消注释并修改为 XiaoHe。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DefaultShuangpinSchema=XiaoHe</span><br></pre></td></tr></table></figure><p>修改后重启输入法就能生效啦。（右键任务栏的键盘，选择重新启动。）</p><p><strong>PS：该文件里还有一些配置项，可以按自己需求修改……</strong></p><h3 id="简体中文输入法使用直角引号"><a class="markdownIt-Anchor" href="#简体中文输入法使用直角引号"></a> 简体中文输入法使用直角引号</h3><p>修改 <code>/usr/share/fcitx/data/</code>文件夹下以「zh-CN」结尾的文件。</p><p>「zh-CN」对应的就是简体中文输入法。</p><p>该文件名因系统不同有差异。比如在我当前的 Manjaro 版本，该文件为<code>punc.mb.zh_CN</code>。而在我之前使用的 deepin 系统上，该文件为<code>punc-ng.mb.zh_CN</code>。我还在网络上看到一些人的是<code>punc-ng.mb-zh_CN</code>。</p><p>将对应的「&quot;」与「’」按如下修改即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">" 「 」</span><br><span class="line">' 『 』</span><br></pre></td></tr></table></figure><p>注意！<code>/usr/share/fcitx/data/</code> 下的文件是「全局配置文件」。建议将该文件复制到用户目录，即<code>~/.config/fcitx/data/</code>下面再进行修改。</p><h3 id="拼音云输入"><a class="markdownIt-Anchor" href="#拼音云输入"></a> 拼音云输入</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">sudo pacman -Sy fcitx-cloudpinyin</span><br></pre></td></tr></table></figure><p>安装后在「配置—附加组件」里找到可以修改云拼音来源，大陆用户就修改为百度吧～</p><p>不过我现在（码这篇博文的现在）没感觉到这云拼音有啥用……</p><h3 id="其它"><a class="markdownIt-Anchor" href="#其它"></a> 其它</h3><p>网络上提到的 wine 系软件不能输入中文之类的问题倒是没遇到……</p><p>不过遇到了网易云不能输入中文，非刚需自己就没折腾。</p><h2 id="仅供参考软件替换建议"><a class="markdownIt-Anchor" href="#仅供参考软件替换建议"></a> 【仅供参考】软件替换建议</h2><h3 id="vim"><a class="markdownIt-Anchor" href="#vim"></a> vim</h3><p>上面提到了 Manjaro 自带精简的 vim（即 vi），用着不太顺手。卸载再安装完整版即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 卸载并安装</span></span><br><span class="line">sudo pacman -Rs vi &amp; sudo pacman -Sy vim</span><br></pre></td></tr></table></figure><h3 id="其它-2"><a class="markdownIt-Anchor" href="#其它-2"></a> 其它</h3><p>之前我建议用 deepin 的截图等工具，但是一方面使用它们引入 deepin 相关的依赖太多了，另一方面感觉自带的终端等用起也还不错……</p><p><strong>下面算是一个简单的软件推荐吧……</strong></p><p>截图：flameshot 这个软件感觉和 deepin-screenshot 差不多，甚至更小更强大。</p><p>录屏：peek 小巧强大</p><p>QQ/tim 可以装 deepin 的，不过只是能用……（其实使用官方的 Linux QQ 也还行……）</p><p>文本编辑器可以使用 kde 提供的 KWrite，轻量级的使用挺方便的，打开又快……</p><h2 id="应用配置"><a class="markdownIt-Anchor" href="#应用配置"></a> 应用配置</h2><h3 id="默认应用设置"><a class="markdownIt-Anchor" href="#默认应用设置"></a> 默认应用设置</h3><p>既然软件都替换了，相应的把默认应用也修改一下吧。</p><p>进入「设置—个性化—默认应用设置」。</p><h3 id="快捷键配置"><a class="markdownIt-Anchor" href="#快捷键配置"></a> 快捷键配置</h3><p>将截图和终端的快捷键设置一下。</p><p>进入「系统设置—工作区—快捷键」。</p><p><strong>在「全局快捷键」添加应用，设置快捷键无效，需要「自定义快捷键」。</strong></p><p>以「深度截图」举例。</p><p>在「自定义快捷键」新建一个「全局快捷键—命令/URL」，在触发器设置快捷键，在动作设置「命令/URL」。</p><p>这个「命令/URL」是啥玩意？在这里简单理解为启动软件的命令即可。</p><p>在「程序启动器」搜索找到软件，右键软件的图标，点击「编辑应用程序」，点击「应用程序」，就可以看到「命令」。</p><p>比如在应用栏里找到「深度截图」，右键图标，点击「编辑应用程序」，点击「应用程序」将「命令」栏里的链接复制粘贴过来即可。</p><p><strong>PS：默认 f12 为下拉式终端，为了避免与浏览器调试的快捷键冲突，建议更换……</strong></p><h3 id="linux-应用配置的迁移"><a class="markdownIt-Anchor" href="#linux-应用配置的迁移"></a> Linux 应用配置的迁移</h3><p>使用的各种软件的配置都放在用户目录下，每次迁移系统备份 <code>home</code> 文件夹太慢了，如果我们<strong>没有啥非常重要的需求</strong>，完全可以只把用户目录下必要软件的配置迁移过来。</p><p>比如 <code>~/.IntelliJIdea2019.3</code>、<code>~/.gradle</code>……</p><p>将上面这些软件的配置文件夹从原系统备份出来，再移动到新系统的用户目录即可。</p><p>推荐一个软件配置备份的工具<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>：<a href="https://github.com/lra/mackup" target="_blank" rel="noopener">https://github.com/lra/mackup</a></p><p>也可以用它管理 dotfiles。</p><h3 id="配置-jdk"><a class="markdownIt-Anchor" href="#配置-jdk"></a> 配置 jdk</h3><p>使用官方提供的方式安装。</p><p>先用包管理安装 jdk。（只提供 openjdk）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先搜索一个</span></span><br><span class="line">yay -Ss jdk</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yay -Sy java-8-openjdk</span><br><span class="line"><span class="comment"># 查看 jdk</span></span><br><span class="line">archlinux-java status</span><br><span class="line"><span class="comment"># 设置默认 jdk</span></span><br><span class="line">sudo archlinux-java <span class="built_in">set</span> java-8-openjdk</span><br></pre></td></tr></table></figure><h2 id="包管理说明"><a class="markdownIt-Anchor" href="#包管理说明"></a> 包管理说明</h2><h3 id="pacman"><a class="markdownIt-Anchor" href="#pacman"></a> pacman</h3><p>Manjaro 提供了一个包管理的终端程序 pacman，详见：<a href="https://wiki.archlinux.org/index.php/Pacman_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener">Pacman 简中说明</a> 。</p><p>在 Manjaro 提供的桌面程序软件中心里，应用有 Community 和 AUR 的分别。该桌面程序可以安装 Community 程序也可以安装 AUR 程序——不过安装 AUR 程序的提示信息是「构建」。</p><p>AUR，即 Arch User Repository，Arch 用户仓库。而 Community 指的是 Arch 的官方仓库。用户将软件放在 AUR，Arch 官方则定期挑选 AUR 里的优秀程序到 community。</p><p>实际表现为 Community 为 AUR 的子集，Community 有的应用 AUR 都有，但是 Community 拥有但 AUR 没有的那部分软件可能在系统上的运行表现不大稳定。</p><p>pacman 只能在终端安装 Community 程序，想要在终端安装 AUR 程序则需要再安装一个包管理工具。</p><p><strong>有些教程里用的 yaourt，但该工具已经在 Arch 文档标记过时了，不建议使用。</strong></p><p>具体选用啥可以自己搜索斟酌，我用的 yay。</p><h3 id="yay"><a class="markdownIt-Anchor" href="#yay"></a> yay</h3><p>安装如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/yay.git</span><br><span class="line"><span class="built_in">cd</span> yay</span><br><span class="line">makepkg -si</span><br></pre></td></tr></table></figure><p>PS：在软件中心里构建 AUR 程序其实就是相当于帮我们做了手动 <code>makepkg</code> 的工作。</p><h3 id="命令"><a class="markdownIt-Anchor" href="#命令"></a> 命令</h3><p>yay 兼容 Pacman 的命令行参数。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## pacman</span></span><br><span class="line">pacman -Syu <span class="comment"># 同步数据包后更新系统</span></span><br><span class="line"></span><br><span class="line">pacman -Sy 包名 <span class="comment"># 同步包数据库后安装。</span></span><br><span class="line"></span><br><span class="line">pacman -R 包名 <span class="comment"># 删除包不删除依赖</span></span><br><span class="line">pacman -Rs 包名 <span class="comment"># 删除包的同时删除不被其它包使用的依赖</span></span><br><span class="line">pacman -Rd 包名 <span class="comment"># 删除包不检查依赖</span></span><br><span class="line"></span><br><span class="line">pacman -Ss 关键字 <span class="comment"># 搜索含关键字的包。</span></span><br><span class="line">pacman -Qi 包名 <span class="comment"># 查看有关包的信息。</span></span><br><span class="line"></span><br><span class="line">pacman -Sc Pacman <span class="comment">#清理未安装的包文件</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## yay</span></span><br><span class="line">yay -Su <span class="comment"># 升级软件库</span></span><br><span class="line">yay -Sy <span class="comment"># 更新软件库</span></span><br><span class="line">yay -Syy <span class="comment"># 强制更新软件库</span></span><br><span class="line">yay -Sy 包名 <span class="comment"># 安装命令</span></span><br><span class="line">yay -Rs 包名 <span class="comment"># 卸载命令</span></span><br><span class="line">yay -Ss 关键字 <span class="comment"># 搜索命令</span></span><br></pre></td></tr></table></figure><h2 id="其它问题"><a class="markdownIt-Anchor" href="#其它问题"></a> 其它问题</h2><h3 id="修改主目录为英文"><a class="markdownIt-Anchor" href="#修改主目录为英文"></a> 修改主目录为英文</h3><p><a href="https://www.jianshu.com/p/73299b8e3f58" target="_blank" rel="noopener">原文</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S xdg-user-dirs-gtk</span><br><span class="line">$ <span class="built_in">export</span> LANG=en_US</span><br><span class="line">$ xdg-user-dirs-gtk-update</span><br><span class="line"><span class="comment"># 然后会有个窗口提示语言更改，更新名称即可</span></span><br><span class="line">$ <span class="built_in">export</span> LANG=zh_CN.UTF-8</span><br><span class="line">$ sudo pacman -Rs xdg-user-dirs-gtk</span><br></pre></td></tr></table></figure><h3 id="deepin-截图不能粘贴"><a class="markdownIt-Anchor" href="#deepin-截图不能粘贴"></a> deepin 截图不能粘贴</h3><p><a href="https://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=151823" target="_blank" rel="noopener">原文</a></p><p>我试了下，安装 GPaste 并启动就可以了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yay -Rs gpaste</span><br></pre></td></tr></table></figure><p>卸载后虽然仍起作用，但重启就不行了。</p><h3 id="vmware-的安装"><a class="markdownIt-Anchor" href="#vmware-的安装"></a> VMware 的安装</h3><p>某些特殊软件安装前建议看下官方 WIKI，比如 VMware<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>，我想当然地用 <code>pacman</code> 一把梭装上，并不能正常使用。</p><p>安装方式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pacman build vmware-workstation</span><br><span class="line">sudo modprobe -a vmw_vmci vmmon</span><br><span class="line"></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> --now vmware-networks.service</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> --now vmware-usbarbitrator.service</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> --now vmware-hostd.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不然使用时各种报错（主要是联网）</span></span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://www.archlinux.org/mirrorlist/" target="_blank" rel="noopener">Pacman Mirrorlist Generator</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://github.com/archlinuxcn/mirrorlist-repo" target="_blank" rel="noopener">arch-linux-mirrorlist</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://mirror.tuna.tsinghua.edu.cn/help/AUR/" target="_blank" rel="noopener">清华大学开源软件镜像站</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://github.com/lra/mackup" target="_blank" rel="noopener">https://github.com/lra/mackup</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://wiki.manjaro.org/index.php?title=VMware" target="_blank" rel="noopener">Manjaro-WIKI-VMware</a> <a href="#fnref5" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 配置与操作 </tag>
            
            <tag> Manjaro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>路上动物观察</title>
      <link href="/2019/12/12/cats-on-the-road/"/>
      <url>/2019/12/12/cats-on-the-road/</url>
      
        <content type="html"><![CDATA[<h2 id="零"><a class="markdownIt-Anchor" href="#零"></a> 零</h2><p>他们都说狗改不了吃屎，这词用得有点粗，但也是一代代人传下来的。现代人都比较文明，这种俗话只在必要的时候使用。</p><p>但我觉得事情不是这样的。</p><p>我在北乌垭的工地上就遇到过一条大土狗，一脸凶相，皮贴着肋骨，黄色的狗毛黯淡、多处无毛暴露着结疤。虽然如此，但它并非流浪狗。与流浪狗的区别在于它有狗窝，还有自己的饭碗，以及一位主人。它的饭碗是块扁形的方石片，中间有道凹槽可以装点东西。能装流食，但多了会溢。我有次往里面瞧，有一丝土豆皮黏在边沿。我推测那是土豆皮，是因为有几次早上从那路过时看到这狗的主人坐在屋子外面吃土豆稀饭。</p><p>那天中午在休工回去的路上，老远就听到狗的悲鸣。我估摸着距离心想可能是这条狗，不晓得又发生了啥。近了，便看到它的主人拿着一根藤条在抽打它。奇怪的很，这傻狗只是卧在地上惨叫，不晓得跑。我们一行人看不过去就劝那主人，问道说咋回事，发这么大火。</p><p>身旁的工友本来还在讨论说是不是这狗饿得遭不住把他家里肉偷吃了，那主人看着我们走过来已经减轻了下手的力道，听到有人劝，就把藤条丢到一边。傻狗这才起身瘸着往窝里移动，一边动一边发出轻微细碎的吠叫。那主人解释说，家里婴儿不小心把屎拉在地板上了，他就喊这狗来吃了，把地板清理哈。没想到这狗进屋子看到主人把它往屎堆上招呼，转身就往外跑。主人心想这狗日的连屎都不吃，就出门折了根枝条要收拾收拾它。</p><p>回到宿舍区后急着开饭，这事有点不太方便谈论。再过后，也就从大家脑子里遗忘了。今天想着把自己前段时间记录下的猫猫狗狗放到这里，突然就又回忆起这件事。有句话有点蠢，但一直在我的脑子里打转，我得说出来，不说出来我不舒服。——我想，有些狗，可能生来是不吃屎的。</p><h2 id="一"><a class="markdownIt-Anchor" href="#一"></a> 一</h2><p><strong>多图警告。</strong></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/2018_05_05_21_55_IMG_0275.JPG" alt="2018_05_05_21_55_IMG_0275"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/2018_07_30_22_54_IMG_0274.JPG" alt="2018_07_30_22_54_IMG_0274"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/2019_05_08_16_21_IMG_0326.JPG" alt="2019_05_08_16_21_IMG_0326"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/2018_08_28_07_10_CDCD017F-43CD-4F96-8D35-EC4A591B5C36.JPG" alt="2018_08_28_07_10_CDCD017F-43CD-4F96-8D35-EC4A591B5C36"></p><h2 id="二"><a class="markdownIt-Anchor" href="#二"></a> 二</h2><p><strong>眩晕警告。</strong></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124679933.jpeg" alt="1576124679933"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/2019_06_14_09_41_IMG_0832.jpg" alt="2019_06_14_09_41_IMG_0832"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/2019_07_20_21_58_IMG_1081.jpg" alt="2019_07_20_21_58_IMG_1081"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124563565.jpeg" alt="1576124563565"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124591114.jpeg" alt="1576124591114"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124599417.jpeg" alt="1576124599417"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124618217.jpeg" alt="1576124618217"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124708207.jpeg" alt="1576124708207"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124717797.jpeg" alt="1576124717797"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124740003.jpeg" alt="1576124740003"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124746737.jpeg" alt="1576124746737"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191211_140132.jpg" alt="IMG_20191211_140132"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124651711.jpeg" alt="1576124651711"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124672368.jpeg" alt="1576124672368"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124675912.jpeg" alt="1576124675912"></p><h2 id="三"><a class="markdownIt-Anchor" href="#三"></a> 三</h2><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191212_123217.jpg" alt="IMG_20191212_123217"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124647638.jpeg" alt="1576124647638"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124609374.jpeg" alt="1576124609374"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124580517.jpeg" alt="1576124580517"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124686233.jpeg" alt="1576124686233"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124700532.jpeg" alt="1576124700532"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124704412.jpeg" alt="1576124704412"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124728990.jpeg" alt="1576124728990"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191211_140021.jpg" alt="IMG_20191211_140021"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191211_140044.jpg" alt="IMG_20191211_140044"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124556948.jpeg" alt="1576124556948"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124568789.jpeg" alt="1576124568789"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124656041.jpeg" alt="1576124656041"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124659887.jpeg" alt="1576124659887"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1576124668575.jpeg" alt="1576124668575"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191211_140357.jpg" alt="IMG_20191211_140357"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191212_123152.jpg" alt="IMG_20191212_123152"></p><h2 id="四"><a class="markdownIt-Anchor" href="#四"></a> 四</h2><p>后两张来源校官方微博，避免暴露多余信息就不具体标注了……</p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/1569934640714.jpg" alt="1569934640714"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191212_123621.jpg" alt="IMG_20191212_123621"></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/gallery/animal/IMG_20191212_123645.jpg" alt="IMG_20191212_123645"></p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 图册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图片所记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从换域名谈谈 DNS</title>
      <link href="/2019/11/13/dns/"/>
      <url>/2019/11/13/dns/</url>
      
        <content type="html"><![CDATA[<h2 id="前因"><a class="markdownIt-Anchor" href="#前因"></a> 前因</h2><p>前阵子被「备案信息复查」，当头一棒，我都忘记自己备过案了。一愣神，我以为域名都必须要备案才能用，问了下室友，才突然想起自己当时备案是因为「域名必须要备案才能指向腾讯云服务器的 IP」。</p><p>扫了一眼要求 —— 1、在腾讯云备案成功的域名需要解析至腾讯云服务器；2、网站内容不能涉及博客；3、网站标题需要与网站名称一致。4、电话沟通说不能有评论。</p><p>其实貌似备案也不是很严格，修改审核完事后再改过来也行……</p><p><s>还是不要在违法的边缘试探为好</s></p><p>其他都还好，「网站标题需要与网站名称一致」这一条太沙雕了。我备案时的网站名是「三岛有纪夫」，总有人觉得我读了很多三岛由纪夫的书，其实我对他不是很了解，纯粹是觉得这样玩弄字眼很有趣。</p><p>现在我不想顶着「三岛有纪夫」这个名字了，不符合我现在的人设。</p><p>打算换个轻松点的域名，记得 <a href="https://lhcy.org/" target="_blank" rel="noopener">林海草原</a> 对此有研究，便请教了下。</p><h2 id="注册域名与设置第三方-dns-服务器"><a class="markdownIt-Anchor" href="#注册域名与设置第三方-dns-服务器"></a> 注册域名与设置第三方 DNS 服务器</h2><p>于是在 <a href="https://porkbun.com/" target="_blank" rel="noopener">https://porkbun.com</a> 注册 —— 「价格比较低、免费隐私保护、彻底不泄露、服务极好。」购买需要 Paypal 与 Vista 信用卡。（之前申请了张中国银行的学生信用卡</p><p>把 DNS 服务器换为第三方，<a href="https://dns.he.net/" target="_blank" rel="noopener">https://dns.he.net/</a>。</p><p>我还是第一次使用第三方 DNS，说起来其实步骤很简单。</p><p>在域名商的域名管理界面将 AUTHORITATIVE NAMESERVERS（权限域名服务器）修改为第三方 DNS 服务器提供的。比如使用 <a href="http://he.net" target="_blank" rel="noopener">he.net</a> 的话，在 <a href="http://he.net" target="_blank" rel="noopener">he.net</a> 注册后就会有个醒目的提示告诉你去修改，以及修改为啥。完事后再在 <a href="http://he.net" target="_blank" rel="noopener">he.net</a> 提供的管理界面添加域名 —— 然后就可以在 <a href="http://he.net" target="_blank" rel="noopener">he.net</a> 管理域名的解析啦。</p><p>当时看的这篇文章：<a href="https://wzfou.com/he-net-dns/" target="_blank" rel="noopener">He.net DNS 域名解析申请使用 - 免费 DDNS、IPv6 地址和 Slave DNS</a></p><p>回头看步骤其实很简单，不过因为我是第一次接触，而且 AUTHORITATIVE NAMESERVERS 修改生效的时间有点长 —— 导致我在等待的时间里总觉得自己哪儿弄错了，然后折腾……所以花了好一阵子时间。</p><h2 id="裸域名不能设置-cname"><a class="markdownIt-Anchor" href="#裸域名不能设置-cname"></a> 裸域名不能设置 CNAME</h2><p>遇到了一个问题：</p><blockquote><p>Sorry, you can’t have a CNAME on the root domain. It violates RFC, will break things, and probably cause your own personal space time to collapse in on itself.</p><p>You probably want to use an ALIAS record instead.</p></blockquote><p>说是违反了 RFC，可能会导致一些问题。之前用阿里云和腾讯云自带的解析都没遇到这个问题啊，搜索了下。大意可以如下解释：</p><p>阿里云和腾讯云用了些「特殊手段」让用户可以给裸域名设置 CNAME。至于是啥「特殊手段」？搞不好就是上面说的方法 —— use ALIAS。</p><p>会产生啥问题呢？</p><p>MX 记录有可能会和 CNAME 记录冲突。</p><p>具体可以看讨论：<a href="https://www.v2ex.com/t/204489" target="_blank" rel="noopener">为什么裸域名不可以设置 CNAME？</a> 17、26、27 楼。</p><p>没细看，解决方法很简单：用 ALIAS 记录解析就行了。</p><h2 id="域名-dns-解析的过程"><a class="markdownIt-Anchor" href="#域名-dns-解析的过程"></a> 域名 DNS 解析的过程</h2><p>DNS 在域名和实际 IP 间起着桥梁的作用。都说需要用 DNS 把域名解析为 IP，那么为啥需要得到 IP 呢？因为在计算机网络中，计算机需要通过 IP 去寻找和它通信的家伙。 —— 当初就是这么设计的。（IP 就相当于门牌号咯）</p><p>IP 和地域相关，比如网上就有通过 IP 反查地址的工具。</p><p>回到 DNS，如果我们从浏览器输入一个域名谈起，那么就会经历如下步骤：1、浏览器缓存；2、计算机缓存；3、本地 DNS 服务器……</p><p>如果你修改过 hosts，可能就遇到过刷新计算机 DNS 缓存。有时候，某些网站被 GFW 挡住了，可以通过修改 hosts 访问。这是因为 GFW 对该站进行了 DNS 污染。所谓的 DNS 污染，大意就是指通过某种手段让你的域名指向错误的 IP。你在本地通过 hosts 映射了域名与 IP，浏览器访问时就直接用本地 hosts 的 IP 去建立连接。这样，就躲避了 DNS 污染啦……</p><p>有时候，对于被 DNS 污染了，但你仍想访问的网站。可以使用域名反查 IP 的工具查到 IP，然后通过 IP 访问。修改 hosts 科学上网就是这个原理。</p><p>一些破解 intellij 系软件的方法会修改 hosts 将 intellij 的激活域名指向本地（localhost），则是利用这点让激活服务无法正常运行。</p><p>啥是本地 DNS 服务器？不细聊概念。一般来说，本地 DNS 服务器默认的是运营商提供的 DNS。「运营商提供的 DNS」对一般用户来说是够用的，前提是你对互联网有一定的「钝感力」。运营商时常搞些幺蛾子 —— 也许你就遇到过，像网络运营商劫持：网页被加上一些莫名其妙的广告，或者域名被解析到一个莫名其妙的网站（DNS 劫持）……</p><p>如果你遇到了这些现象且难以忍受，也可以把本地 DNS 设置为其它的。比如国内的口碑较好的有 <a href="http://www.114dns.com/" target="_blank" rel="noopener">114 DNS</a> 。Windows 用户可以用 <a href="https://www.sordum.org/7952/dns-jumper-v2-1/" target="_blank" rel="noopener">DNS jumper</a> 这个软件方便选择并切换。</p><p>前面说过 DNS 充当着域名与 IP 的桥梁，那也就是说 DNS 知道你访问了哪些域名。（这才能去查 IP 嘛）因此一部分有特殊需求的用户对国内的 DNS 服务不是很信任，会使用国外的 DNS。但一般来说，国外的解析速度肯定比不上国内。</p><blockquote><p>插一句：大一把流量用得超出套餐了，便以没收到流量预警短信为由向联通客服反应。（不记得是不是真没收到了，应该是真的吧，不然我这么谨慎的小孩也不至于干出这种事……）然后对面的客服似乎正数着条目向我说：您的流量都是有记录的，某某 APP 用了多少……</p><p>当时听着吓我一跳，赶快叫 Ta 别说了。</p></blockquote><p>本地 DNS 服务器查的也是缓存，如果在缓存查不到，就会去域名的 DNS 服务器查。OK！这里所说的「域名的 DNS 服务器」就是上面我提到的 AUTHORITATIVE NAMESERVERS（权限域名服务器）。比如我把本站域名的 AUTHORITATIVE NAMESERVERS 改为了 <a href="http://he.net" target="_blank" rel="noopener">he.net</a>，这时候「本地的 DNS 服务器」就会去 <a href="http://he.net" target="_blank" rel="noopener">he.net</a> 查询域名对应的 IP —— 这里的查询就很复杂了，不细讲。查到后，就会把 IP 放在自己的缓存里。</p><p>想像一下，你访问一个不存在的网站时，DNS 服务器找到（或者说弄出？）一个不存在的 IP 的出来，返回给你 —— 同时还放在自己的缓存里。这样子，不仅你访问不了这个不存在的网站（因为解析出来的 IP 错误）。DNS 服务器还会把你访问时产生的缓存同步至其它区域的缓存服务器 —— 非常快速地全方位污染。</p><p>每一步都有缓存，而缓存，当然有过期时间了。比如浏览器缓存，一般「Ctrl+F5」就会重新请求了。本地缓存，相信修改过 hosts 的都会记得有一个刷新的步骤。Windows 的 <code>IPconfig /flushdns</code>；<s>Linux 一般是重启 network：<code>service network restart</code>。</s></p><p>而在对域名进行解析时则有一个参数：TTL，这个设置就是更新缓存的频率（多久刷新一下）。比如理论上你修改一次解析后，要经过这么长的时间才会生效，但一般 DNS 服务都对此做了优化，你实际等不到那么久。</p><p>好啦，就是这样。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客记录 </tag>
            
            <tag> 计算机网络相关 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>石子坠入深渊</title>
      <link href="/2019/11/10/str/"/>
      <url>/2019/11/10/str/</url>
      
        <content type="html"><![CDATA[<p>白川家旁边开过一家私人的小洗车店。好像从那开始，白川就经常梦到有人开着一辆面包车停在旁边这家店，司机打开车门的时候发出了很刺耳的干摩擦声，梦里的白川可能就是被这声异响吸引了注意力。那个梦过于真实，白川失去了上帝视角，视线被局限到卧室的窗口那么大。他看着司机从后备箱掏出了一桶汽油，好半天才扭开瓶盖，然后拎着桶绕着车把汽油往车窗上倒。</p><p>白川把这个梦给母亲讲过好几次，母亲总以为白川说的是「有人用汽油洗车。」母亲笑着说：「汽油这么贵，怎么会有人把汽油往车上撒呢。」虽然白川对商品的价格一直没什么概念，却隐约觉得母亲搞错了重点。</p><p>「一切都不对劲。」每当白川回忆起以前，总觉得有什么不对劲。</p><p>聊到这的时候，我怀疑白川当时尿床了。你看，「好半天才扭开瓶盖」、「拎着桶绕着车往车窗上倒」，这很像是尿床在梦里的映射。</p><p>白川觉得那不可能，因为那个时候他已经很大了。大概是十四、或者十五岁的样子。白川记得很清楚。十五岁时白川被母亲从学校领走，一直到现在也没回去过。从那开始，时间像是被不断地压缩，或者说像是一根线被拉长，但被人剪去了几段。白川没多少闲暇留给做梦。</p><p>从班主任办公室直到走出校门，白川和母亲都没说一句话。出了校门，母亲在路旁把摩托推出来，向后面的白川喊：「走。」白川从这个字里听出了颤音，有点难过。白川走了过去：「摩托我来开吧。」母亲喊他坐后面去，「你把这个本事用在读书就好了。」</p><p>摩托在颠簸的泥洼道上跑了好一阵子。白川从后面说：「我不喜欢读书。」</p><p>「嗯。」母亲接着说：「你只是不擅长读书。」</p><p>白川说「这是一个意思，谁喜欢做自己不擅长的事。」</p><p>母亲的声音现在很平淡：「也很少有人能做自己喜欢的事。」</p><p>白川觉得问题出在母亲当时没有问他为什么不喜欢读书，而是直接给出了他不擅长读书的结论。白川本来是想反驳母亲，结果反倒好像掉入了陷阱一样，承认了自己不擅长。意识到这点后，白川放弃了继续回应。</p><p>白川小声说「我可以去爸之前的工地搭架。」</p><p>后来想到这，白川总是觉得为人父母，真的很难接受孩子的平庸。自己的母亲总是觉得自己是个挺机灵的家伙，只是不肯把这份机灵劲用在学习上。如果肯学，白川一定能学好。白川不确定母亲是在安慰他还是在安慰自己。</p><p>一个月后的一天，吃完午饭，白川跟着四舅背着一个装了一床棉絮和两条毛毯的工地包，坐班车到了县城。继续转车前四舅带着白川去理发店染了个黄毛，说这样看起来年龄大点，像个混社会的。他们在县里的汽车站先买了六张车票，还有四个工友有点远，要下午三点才到得了。随后六个人一起到了市里，坐了十多个小时的火车，第二天上午到的南普。车站前有个年轻人等他们好一阵子了，年轻人开辆五菱车，带着他们绕了几座山到达老鹰嘴。</p><p>年轻人叫张林。张林看着白川一头黄毛，笑着问他多大了。四舅替白川回答说：「刚满十八，经常做农活，有一手劳力，跟我来挖桩锻炼锻炼。」张林哈哈一笑「这么小该去学点技术的。」四舅也笑「先跟到我，好照顾他娃娃些。大点再说。」</p><p>白川对张林第一感觉并不好，觉得他多管闲事。</p><p>老鹰嘴这片工地的人都住在一栋两层楼的平房里的二楼。这栋屋子刚修好没多久——准确来说其实还没修好，屋顶是用几根钢筋搭的架子，铺了一层塑胶瓦。屋子修到一半的时候，主人老张听说这边要拆迁，本来不打算修了，结果听别人说把房子修好了，要拆迁款的时候可以多赔点，就继续建。想到这反正要拆，老张盖起房子就不那么用心了，买了些廉价的料开始磨洋工。拖着拖着，又有人告诉老张，说拆不到这边来。这把老张气得忍不住跳起来骂娘。但也没得办法，老张只有把一口气往肚子里咽。只是这房子，再也懒得往上叠了。</p><p>包工头来跟老张谈租房时，老张一口气差点又提起来。骂骂咧咧地说你们在那边修桥，搞得我房子整成这批样。包工头顺着老张的话说，那些搞规划的是脑壳有包，把你们这给折腾惨了。没人会跟利益过不去，得失谈好一切都好说。最后两人谈好的是，不收房租，包工头找人把房顶给修起。结果包工头只找人买了几张塑料瓦盖在屋顶。包工头的解释是，急着开工，先搭起住人，等干完了再说。老张也不傻，等干完了你人跑了咋办。于是包工头又给了老张五百块，这次改口说：「帮你把屋顶盖起，我都可以修两间活动板房了。这瓦是加厚的好瓦，我只能给你这么多。」</p><p>包工头又说，「喊你老婆子煮饭的时候帮这群人煮上，我一个月再给你们五百。柴米油盐我单独买。」</p><p>每周出去买菜的那个人就是张林。</p><p>就因为张林买的菜，白川对张林坏印象加剧。</p><p>每周三中午会炒一顿肉，但很明显，这肉是酸的。白川不好意思当面说，背后问四舅，四舅说莫管那么多。白川受不了，表面上被四舅呛了一口，鼓着气不说话。心里想着老子是来卖劳力的，你他妈不给我把吃的整好，我哪来的劳力。</p><p>下一次吃肉，果然味道还是不大对。百川看了一眼张林，这家伙基本都不怎么挑肉吃。白川拿筷子挑了几片肉往张林碗里放，「这肉味道可真好啊，来，林哥多吃点。」</p><p>张林连连摆手，「不不，你们动劳力的吃，我不喜欢吃肉。」</p><p>白川冷笑，「这么好味道的肉，我们可吃不来。」</p><p>张林听出白川语气有点不对，尝了碗里的肉一口。有时候会和白川会说两句话，晚上睡白川旁边的工友解围说：「年轻人嘴细哟，吃不得这粗饭。」</p><p>张林抿了下嘴，笑了一下。「各位哥，是我不对。这大热天的，肉放久了都放变质了，我看看以后是换个时间去买菜，或者我们提前把肉煮了吃了吧，哈哈。」</p><p>旁边人都顺着开始谈起最近的天气，试图想让暗藏的不和一笑而过。</p><p>吃完饭稍作休息，白川和四舅往工地上走。等周围没什么人了，四舅对白川一顿数落，就你话多是吧，就你会说话是吧？</p><p>白川没说话。</p><p>四舅看了白川一眼，叹了口气。「你小子是倔，但有些事情你不懂……我给你说，你做事多看看别人。你觉得那么多人都是傻子吗。」</p><p>四舅说：「你觉得是张林搞得鬼吧。」</p><p>白川也有一口气憋在喉咙管，吐出来，流畅且急促地说 「肯定是他狗日的买了烂肉，把钱自己顺去了。」</p><p>「你还小……这种事以后多着去了……这是老张两口子整的。」</p><p>「你替他说话干嘛，他今天都承认了……」</p><p>「他今天担下去了是他明事理，你就觉得旁边这些大人都是傻子？我们接下来几个月都要在这吃饭，老张整个一两次消消气肯定就算了，而且我们这阵子相处得也不错……你要是把人家得罪了，人家表面上道歉，以后背着给你饭里吐唾沫，搞些莫名其妙的东西，你能咋办？」</p><p>「出了门就要低调……」</p><p>说完，四舅喊白川先去桩口，他去领雷管。白川在岔路口沿着向上的道走，慢慢梳理着脑子里的信息。旁边先来的工友说张林是包工头的一个亲戚，是个大学生，来工地是挣学费。白川有点怀疑，才开学两个多月，挣鸡儿学费。</p><p>不一会，白川到了桩口，打算先用斗车把上午的碎石渣推走。不知为啥，工地上的工具从来都是旧的，连手套都是以前留下来的。四舅说他干了这么久，除了手套，也很少用过新工具。一旦什么坏了，工头总能整一样旧的回来顶替，要么就是找人修一修。你说，旧的总也是新的用旧的吧？那新的都他妈去哪儿了？</p><p>白川戴上左右都漏出两根手指的手套准备开始运石渣。先留了个心眼，白川检查了下斗车。</p><p>上周刚来的时候，白川他们工具不全，用的是旁边桩位的斗车。才用了两天，旁边的工友就说自己的斗车坏了不能用了，不肯再借。可白川明明看到对面还在用——四舅只好催张林给他们搞快整一辆。</p><p>不借就不借呗，为啥要睁着眼睛说瞎话。</p><p>他妈的人人都在睁着眼睛说瞎话。</p><p>白川想起两个月前还在上学的自己。</p><p>其实白川并不是不喜欢读书，他只是不喜欢上学——如果你整整两年多都坐在垃圾堆旁边，被老师讨厌，同学嘲笑，你也会讨厌上学。</p><p>作为一个中学生，白川长得很壮实——真得很壮实，具体身高体重不便表述，至少可以说是一眼看去不像是中学生那种壮实。有次班上几个同学把他拉进厕所，领头的那个家伙讲了一大堆关于班级团结的话，最后说旁边那个班看不起我们班，我们要打一架，你会来的吧？白川说「我不会打架。」有人踢了白川一脚，「你不会打架？」白川瞥了眼门后面重叠起的脚印。</p><p>「算了，他这样的，明天来了也没用。」</p><p>「反正就是那一套。」白川不想细谈，说絮絮叨叨那些东西没有意义。唯一值得提一下的是许浩，刚升初中的时候许浩成绩不错，还当过两学期学习委员，后来跟着别人混，中考考得不好，再后来好像去复读了。</p><p>说「算了」的就是许浩。白川觉得许浩比踢他的那个家伙还讨厌。虚伪，太他妈虚伪了。白川能看出许浩处于人群中的那种不和谐感。下课在厕所抽烟的那群少年里，许浩是唯一一个抽烟不过肺的。里面拿着烟的人吸了一口，把烟雾吐进另一个人嘴里，另一个人吞了一口又吐给下一个人。手里拿着烟的那个人说，「这他妈叫三、四……五手烟，有后劲。」在这种似乎宣告着某种地位的仪式里，许浩永远是最后接这多手烟的那个人。到他时已经看不到烟雾了，只有一股混合着烟草和口臭的空气。许浩咽了下去，从鼻孔长出一口气，笑着回应「后劲真大。」</p><p>白川低着头撒尿，目不斜视。仍好几次注意到许浩在人群中滑稽又卖力地表演。</p><p>「晚上还查锤子寝。」</p><p>白川注意到许浩停顿了一下，他肯定又在斟酌用词。</p><p>过了一小会，许浩说话了。「老师都他妈是傻逼。」</p><p>一群人就旁若无人地笑。「我就喜欢你这种，光读书有锤子用。」</p><p>许浩便细微地调整表情，做出被表扬的受用感。</p><p>「算了，他这样的，明天来了也没用。」许浩对旁边几个人说道，然后拉着他们往外走。等他们都出去后，白川才用手拍了下裤腿。</p><p>只是被踢了一脚而已——可能还会被再踢几脚。这也比被许浩那种虚伪的家伙可怜要好些。他有什么资格可怜我？白川待在原地瞎想。</p><p>只要学校还是一座牢笼，这种事就是会一直延续下去的困境。后来白川常看到各种「学家」对这种现象进行讨论，但似乎没人能搞清楚重点。为什么就没人明白呢？</p><p>破解之道其实很简单——放下自尊，融入泥潭。</p><p>当时的白川不懂维系关系，却似乎很能看清楚周遭事物的本质。</p><p>许浩说老师都是傻逼，白川却觉得老师都很聪明。教师似乎就是有这样一种能力——能看出一间教室里被排斥的那个人，然后把 ta 批为典型。</p><p>白川把自己当作例子分析，但后来有点搞不清楚到底是先有鸡还是先有蛋了。也许是教师先针对的他，然后学生们才开始顺势而为？</p><p>是从什么时候开始的呢？是白川帮前面女同学捡起橡皮擦，女同学却一脸嫌弃地把橡皮擦扔进后面垃圾堆？「我说了让你别捡！你碰过，我不要了。」</p><p>是班主任让大家放学后再在教室待半个小时自习，白川出去上了个厕所被对面的班主任看到。第二天白川被班主任拎上讲台，扯着头发扇了两巴掌？「我叫你自习，你跑出去干嘛？」</p><p>白川推着斗车站在老鹰嘴的坡道往远方望，旁边是桩井，再旁边有搅拌机开始混沙和水泥发出轰隆隆的响声。另一边的远处堆着几根直径有一米的水泥管，引爆雷管时白川他们就躲在那后面。</p><p>白川脑子里一瞬间产生了疑问，「我为什么要在这？」就像上学时，他问过自己「为什么非得上学？」学校里这么多傻逼，为什么我非要和傻逼挤在一块？</p><p>可是又有什么东西不一样。</p><p>四舅上来了。白川收回思绪，先干活吧。</p><p>第二天下雨，四舅和工友们打长牌，白川不会，也懒得学。他以前学过，但对赌博不太擅长。白川帮他们记账，发了工钱后大家才扯账。张林睡在旁边的隔间，走过来问白川要不要一起看光碟。四舅让白川去和张林耍，「你们年轻人有话说。」有人打哈哈，「有毛片莫得，我也要看。」四舅说「人家大学生。」「大学生就不是男人嗦。」</p><p>张林从外边接了个插线板到这间屋子，插线板放在桌子上，这张桌子算是特权，张林要学习。铺位则和外边的人一样，一层棉絮铺在水泥地上。桌子上有个小柜子，锁打开放在一边。张林一边问白川些有的没的，一边打开柜子，从里面拿出一个书本一样的袋子。白川注意到柜子里面还放了不少书。</p><p>这个袋子的每一页正反两面都插着一张光碟。张林问白川要看啥，白川说随便。张林没随便，他挑了一张，说「这张你肯定爱看。」然后从被子里掏出一个便携式的光盘播放器。</p><p>白川说，「来张你爱看的。」张林楞了一下，疑惑地说你说啥玩意。白川解释说，「你刚才说放一张我肯定爱看的。你喜欢看啥？给我放张你喜欢看的吧。」</p><p>张林哈哈一笑，「这张就是我爱看的。」</p><p>白川觉得这家伙没意思，明明自己喜欢看，嘴上却说放个别人喜欢的。</p><p>那次放了啥白川已经忘了，只记得是个外国的片。白川还是第一次看这种电影，他有点不习惯。人物说的话都听不懂，看啥玩意还。虽然有字幕——那也没用，看字幕时根本来不及看画面。</p><p>不过白川还记得他们聊了些啥。张林问白川了一个问题，知道这为什么叫老鹰嘴吗？</p><p>白川对这记得很清楚。因为他从来没考虑过这种问题。老鹰嘴就是老鹰嘴，别人那么叫它，白川就那么叫它。老鹰嘴就是这个地方，这个地方就是老鹰嘴。白川从来没想过老鹰嘴为什么叫老鹰嘴，也从来没想过老鹰嘴为什么叫老鹰嘴也是一个问题。</p><p>张林讲了个故事。</p><p>老鹰嘴之所以叫老鹰嘴，是因为这山上有一大块三角形的石头。尖嘴的这边收成一直不好，另一边却水沃田肥。慢慢地流出了一个传说，说是山顶那块石头本来是头老鹰，因偷吃粮食被山神化为石头。它变为石头后仍不改本性，尖嘴不停地吃，把这边的粮食全吃进肚子，又都排泄到了另一边的村子。这才导致两遍庄稼收成的迥异。</p><p>白川觉得有点意思。</p><p>「尖嘴这边没人去把那石头敲了？」</p><p>张林笑，「听说以前有人尝试过，但那山以前太险了，不好上去，而且另一边的人也不肯让他们这么搞啊。」张林站起来走到窗口，窗口没装窗子，就一个方形的大洞。雨滴打在屋顶的塑胶瓦上，噼里啪啦的，雨丝也不断从窗口飘进来。</p><p>张林指着山顶说，看那边。</p><p>白川看过去，山顶有座信号塔。</p><p>「那边以前有座水泥厂，把山挖空了有一半。后来水泥厂没搞了，这儿的人沿着坡走出了一条路。现在那条路挺宽的，车都可以上去。这座塔就是今年移动公司把材料拉过去安上的。」</p><p>数年来难以接近的地方现在居然开着车就能到达。白川觉得不可思议。</p><p>但这个角度看不清石头在哪。</p><p>「开车就能去？」</p><p>「对噢。」</p><p>白川冒出个念头，「走，我们去把那块石头炸了。」</p><p>「啥？」</p><p>「我可以拿几根雷管出来。」</p><p>「我没喊你解释怎么炸。你也太异想天开了。」张林没下过井，也知道雷管虽然有点威力，但肯定炸不动那么大的石头。</p><p>「哈哈哈哈。」</p><p>张林听白川笑了几声，知道他是在开玩笑了，还是补充了句「而且也太危险了。」</p><p>白川沉默了一下，问张林「你知道电视里……还有电影里，都是假的吗？」</p><p>「啥？」</p><p>张林觉得白川思维太跳跃了。</p><p>这是 7 岁的时候，白川同桌问他的问题。</p><p>「你知道吗？电视里都是假的哦。」</p><p>「什么是假的？」</p><p>同桌兴奋地昂头说，「都是假的。比如那个《封神榜》，里面死的人都是假的。」</p><p>「你的意思是那些人都没死？」</p><p>「是啊，他们是假死的。」</p><p>之前，白川从来没考虑过这种问题，就像「老鹰嘴为什么叫老鹰嘴」一样。</p><p>白川感到一丝悲哀，本来有人提醒过他的，他同桌就提醒过他。可是他忘了。张林今天提起，白川才意识到自己之前也意识到过：「自己从来没想过这些问题。」白川觉得那时的自己就像是活在游戏里的 NPC，或者末日里的僵尸。有人尝试过唤起他，可他自己没有兴趣。</p><p>「带我去那边山上看看呗。」</p><p>雨停了后张林去开车，白川本来打算借口上厕所去拿几根雷管，想了想，觉得躲着张林就不能拿引爆器，到时候用石头砸的话确实有点危险，便作罢。</p><p>十多分钟，俩人就从这边下去，从那边山上爬起。这山远远看起云雾缭绕挺有意境，进去了才发觉雾气太他妈干扰视线了。</p><p>张林把车停在稍远的地方。地下有一堆压扁的大纸箱子，旁边砌了一堆泡沫，这些东西就堵在路中间。纸箱子全湿了，泡沫表面似乎涂了什么防水的涂料，表面形成了几颗水滴。前面码了一圈围墙，围着的就是他们之前看到的信号塔。那块石头应该就在塔子后面的悬崖处，白川估计着距离往前走。</p><p>沿着围墙走过去，出现在眼前的景象让白川呼了一声卧槽。张林从后面疾步走过来，「哈哈，看样子有人先你一步。」</p><p>一览无余的空旷，碎石从围墙后面开的门口处铺了一条长长的小道直到悬崖边。这显然是那块大石头被炸后的现场。白川上到窄路，有点磕脚。沿着碎石道走到悬崖边，风的触感越来越明显。</p><p>白川有种错觉，好像与青春有关的一切，性欲、精力、迷茫、还有其它未曾经历过的东西，都随着那块石头消失了。</p><p>「整他妈这些，」白川用脚尖在碎石里滑动，「花里胡哨的。」</p><p>风在山丘间奏起巨响。</p><p>「这场景有点像一部电影。」张林说。</p><p>「啥？」</p><p>「这场景有点像一部电影。」张林重复了一遍。</p><p>「啥电影？」</p><p>「我忘了。」</p><p>两人无言地望向前方。</p><hr><p>「对，就是这样，我开始对电影感兴趣。但后来我看了很多部片子都没找到这样的场景，你能帮我找找吗？」</p><p>「但说实话，我对很多事情都不确定。比如我不知道老鹰嘴之所以叫老鹰嘴是不是真的是因为有这么个传说，所以我也不确定那山上是不是真的有那么一块石头。」</p><p>白川的故事讲完了，喝了一口手里的矿泉水。现在的白川一个平头，没故事里的黄毛。白川说读书的时候，总觉得染个头发特炫酷。不过村里的流行总和大城市有一段长时间的滞后，当他成年后来大城市讨生路，发现现在的流行已经是批判以前那种流行了。作为一个出村的人，他肩负着普及家乡潮流的重任，所以剃了平头表示与过往的决裂。</p><p>我有点佩服他的志气，问他普及得咋样。白川腼腆地笑了下，说好几年没回去了，还没来得及。</p><p>那是 12 年，我在北京卖盗版碟，当时白川 20 岁左右，我们坐在马路边吹了一会牛。他是我的第一个客人。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对 Shiro 的理解与 Shiro + JWT</title>
      <link href="/2019/11/09/shiro+jwt/"/>
      <url>/2019/11/09/shiro+jwt/</url>
      
        <content type="html"><![CDATA[<h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2><p>这篇文章不会涉及 Session、Cache 等……下文是我对 Shiro 简单的理解，也许能让我这样的新手尽可能快地利用 Shiro 实现自己的需求……</p><p><a href="https://github.com/hqweay/vue-springboot-restful-blog/blob/master/blog-backend/src/main/java/cn/hqweay/blog/config/ShiroConfig.java" target="_blank" rel="noopener">样例代码仓库</a></p><p>详见 <code>config/ShiroConfig</code> 与 <code>security/</code> 下的代码。</p><h2 id="shiro"><a class="markdownIt-Anchor" href="#shiro"></a> Shiro</h2><p>搜索任何一篇关于 Shiro 的资料，几乎都会在文章前面列出 Authentication、Authorization……我们先放下这些，关注权限控制的核心。</p><h3 id="身份验证"><a class="markdownIt-Anchor" href="#身份验证"></a> 身份验证</h3><p>首先，Shiro 把<strong>身份验证</strong>抽象为 principals（身份）和 credentials（凭证）。具体下来其实就对应我们平时使用的 username 与 password。简单来讲，「身份验证」其实也就对应「登录」。</p><p>登陆（身份验证）完成后，Shiro 首先确定了你是我们系统中的人（否则，你的状态就是游客），然后 Shiro 会通过某种方式去查询该用户「能做什么事」。</p><h3 id="授权"><a class="markdownIt-Anchor" href="#授权"></a> 授权</h3><p>「某用户能做什么事」在 Shiro 中对应的是「授权」的概念。要实现「授权」，了解 Shiro 中的四个概念即可。</p><p>Subject（主体）、Resource（资源）、Permission（权限）、Role（角色）。</p><p>Subject 就是你通过 username 和 password 登录进来的用户。</p><p>Resource 就是你要操作（增删改访问）的任何东西。比如一篇文章、一首歌……</p><p>Permission 是 Shiro 中的原子单位，指我们对某个 Resource 进行增删改访的权限。比如播放周杰伦的新专辑（你不买可不能播放哦）、比如访问某篇付费文章……</p><p>Role 其实就是 Permission 的集合。我们举个例子：普通用户、VIP、管理员、超级管理员……</p><h3 id="就这些"><a class="markdownIt-Anchor" href="#就这些"></a> 就这些</h3><p>要使用 Shiro 的话，了解这俩概念就行了。一个是<strong>身份验证</strong>，需要 principals 和 credentials。对应我们通常意义上的 username 和 password。一个是<strong>授权</strong>，核心是Subject（主体）、Resource（资源）、Permission（权限）、Role（角色）。</p><p>身份验证其实就是 Authentication、授权信息则通过 Authorization 得到。</p><p>我们到配置 Shiro 的核心代码里看一下。</p><h2 id="realm-样例"><a class="markdownIt-Anchor" href="#realm-样例"></a> Realm 样例</h2><p>暂且抛开配置，Shiro 的核心只需要我们写一个自己的 Realm。</p><p>简单来说，Realm 配置的就是如何身份验证以及如何返回权限信息。虽然说的是「如何去……」，实际上我们只需要配置从哪获得用户的真实 credentials，从哪获得用户的权限信息即可。因为 Shiro 已经把身份验证抽象为「对比用户登录时输入的 username、password 和注册时存储的信息」。</p><p>也就是说，我们只需要写一个自己的 Realm，配置身份验证和授权数据的来源就行了！</p><p>看看 Realm 的模板：</p><h3 id="realm-模板"><a class="markdownIt-Anchor" href="#realm-模板"></a> Realm 模板</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 只有当需要检测用户权限的时候才会调用此方法，例如 checkRole,checkPermission 之类的</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//……</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 默认使用此方法进行用户名正确与否验证，错误抛出异常即可。</span></span><br><span class="line"><span class="comment">   * 认证信息 (身份验证)</span></span><br><span class="line"><span class="comment">   * Authentication 是用来验证用户身份</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken auth)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">   <span class="comment">//……</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如上，doGetAuthorizationInfo()、doGetAuthenticationInfo() 俩方法……</p><p>我们看看这俩方法的简单实现。</p><h3 id="realm-简单实现"><a class="markdownIt-Anchor" href="#realm-简单实现"></a> Realm 简单实现</h3><h4 id="权限验证"><a class="markdownIt-Anchor" href="#权限验证"></a> 权限验证</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken auth)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">  String token = (String) auth.getCredentials();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 解密获得 username，用于和数据库进行对比</span></span><br><span class="line">  <span class="comment">// 通过 jwt 的 token 获取 username</span></span><br><span class="line">  String email = JWTUtil.getEmailByToken(token);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (email == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> AuthenticationException(<span class="string">"token invalid"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 根据 username 看后台是否能查到</span></span><br><span class="line">  User user = userService.getUserByEmail(email);</span><br><span class="line">  <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> AuthenticationException(<span class="string">"User didn't existed!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 验证 token</span></span><br><span class="line">  <span class="keyword">if</span> (!JWTUtil.verify(token, email, user.getPassword())) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> AuthenticationException(<span class="string">"Username or password error"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(token, token, <span class="string">"my_realm"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里其实本来应该是一个简单的 username 与 password 的判断（我的 username 使用的是 email）。我的数据是保存在数据库里的，通过服务 userService 获取。</p><p>用户信息也可以不放在数据库，放内存或就保存到硬盘也是可以的嘛……</p><p>如果数据库保存的是加密后的信息（明文保存当然也行——如果你愿意），可想而知这里的判断逻辑大概就是这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 伪代码</span><br><span class="line">username &#x3D; auth.getUserName();</span><br><span class="line">pass &#x3D; Pass.Encryp(auth.getPass());&#x2F;&#x2F; 获取加密后的密码</span><br><span class="line">&#x2F;&#x2F;..</span><br><span class="line">User user &#x3D; userService.getUserByUserName(username);</span><br><span class="line">if(user.getPass() &#x3D;&#x3D; pass)&#123;</span><br><span class="line">  return true;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;……</span><br></pre></td></tr></table></figure><p>但我这里用的是 jwt 控制权限。jwt 做的事情其实可以简单归结为：把用户名和密码加密为一个 token（字符串），不过这个 token 是可以解密的。我们可以通过给定的解密方式（提供的方法）逆获取 username 和 password。</p><h4 id="授权信息"><a class="markdownIt-Anchor" href="#授权信息"></a> 授权信息</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  String email = JWTUtil.getEmailByToken(principals.toString());</span><br><span class="line"></span><br><span class="line">  User user = userService.getUserByEmail(email);</span><br><span class="line">  SimpleAuthorizationInfo simpleAuthorizationInfo = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// user 获取 role</span></span><br><span class="line">  String role = userService.getRoleByEmail(email);</span><br><span class="line">  simpleAuthorizationInfo.addRole(role);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 权限判断</span></span><br><span class="line">  <span class="comment">// 根据 role 获取 permissions</span></span><br><span class="line">  Set&lt;String&gt; permissions = <span class="keyword">new</span> HashSet&lt;&gt;(userService.getPermissionsByRole(role));</span><br><span class="line">  simpleAuthorizationInfo.addStringPermissions(permissions);</span><br><span class="line">  <span class="comment">//Set&lt;String&gt; permission = new HashSet&lt;&gt;(Arrays.asList(user.getPermission().split(",")));</span></span><br><span class="line">  <span class="comment">//simpleAuthorizationInfo.addStringPermissions(permission);</span></span><br><span class="line">  <span class="keyword">return</span> simpleAuthorizationInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如上，先通过 user 获取 role，再通过 role 获取 permission。</p><p>这就是上面授权里提到的 Subject（主体）、Permission（权限）、Role（角色）。</p><p>而授权里的 Resource（资源），具体就可以是某个 Controller 里的 API，我们可以在 API 对应的方法上通过注解配置来控制。</p><p>例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个通过 Role 控制，一个通过 Permission 控制。  </span></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/require_role"</span>)</span><br><span class="line">  <span class="meta">@RequiresRoles</span>(<span class="string">"admin"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> ResponseBean <span class="title">requireRole</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseBean(<span class="number">200</span>, <span class="string">"You are visiting require_role"</span>, <span class="keyword">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/require_permission"</span>)</span><br><span class="line">  <span class="meta">@RequiresPermissions</span>(logical = Logical.AND, value = &#123;<span class="string">"view"</span>, <span class="string">"edit"</span>&#125;)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> ResponseBean <span class="title">requirePermission</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseBean(<span class="number">200</span>, <span class="string">"You are visiting permission require edit,view"</span>, <span class="keyword">null</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>从这里看 user、role、permission，也很容易看出它们应该是多对多的关系。</p><p>一个 user 可以有多个 role，一个 role 也可以有多个 permisson。</p><h2 id="补充shiro-jwt"><a class="markdownIt-Anchor" href="#补充shiro-jwt"></a> 补充——Shiro + JWT</h2><h3 id="realm"><a class="markdownIt-Anchor" href="#realm"></a> Realm</h3><p>上面的 Realm 模板并不完整，还需要重写一个 supports() 方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(AuthenticationToken token)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> token <span class="keyword">instanceof</span> JWTToken;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 只有当需要检测用户权限的时候才会调用此方法，例如 checkRole,checkPermission 之类的</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line"><span class="comment">//……</span></span><br><span class="line"> &#125;</span><br><span class="line">  <span class="comment">//……</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JWTToken 是自己定义的一个 token 类，即便不懂我们其实也能大概猜出这里 supports() 的作用：用自己定义的 JWTToken 来进行权限验证。</p><h3 id="shiro-jwt-实现-restful-api-认证方式"><a class="markdownIt-Anchor" href="#shiro-jwt-实现-restful-api-认证方式"></a> shiro + jwt 实现 RESTful API 认证方式</h3><p>程序逻辑:</p><ol><li>POST 用户名与密码到 /login 进行登入，如果成功返回一个加密 token，失败的话直接返回 401 错误。</li><li>之后用户访问每一个需要权限的网址请求，必须在 header 中添加 Authorization 字段，例如Authorization: token，token为密钥。</li><li>后台会进行 token 的校验，如果不通过直接返回401。</li></ol><p>换种方式解释：</p><ol><li><p>用户输入 用户名、密码</p><p>PS：需要前端加密吗？前端 RSA 加密</p></li><li><p>加密后的密码 与 通过 用户名获取的密码对比</p></li><li><p>成功 返回 token，失败 返回</p></li><li><p>header 中添加 Authorization 字段。例如 Authorization: token，token 为密钥。</p></li></ol><h3 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h3><p>Shiro 怎么知道应该通过 token 来判断呢？</p><p>这个问题对应的是 Shiro 在 doGetAuthenticationInfo() 中传入的 auth 里的 Credential 为啥获取得到的是 token。（按上面的理解 Credential 不本该是密码吗……）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken auth)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">    String token = (String) auth.getCredentials();</span><br><span class="line"><span class="comment">//……</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>是通过在 Shiro 的配置里注入自己实现的 JWTFilter 实现的。配置后就会放弃普通的用户名、密码鉴权方式而使用 token，即 JWT 来鉴权了。</p><p>这也是为什么 Shiro 要用 Credential 这个概念而不直接弄个 password……</p><p>类似于 Spring MVC 里通过 DispatcherServlet 来控制请求，我们可以通过自己配置的 Filter 来进行权限控制。</p><p>具体不谈了。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>舔狗之歌</title>
      <link href="/2019/10/09/song/"/>
      <url>/2019/10/09/song/</url>
      
        <content type="html"><![CDATA[<p><s>2017-06-24</s></p><p>你不晓得吧，每次回应你的留言就感觉突然回到了那年的语文考场。因为是第一堂，整场考试我都激动地发抖。而此刻的我就像是在做一道高考语文的分析题，担心说的不好，担心说的不够动听，又担心说的话超过我们现在关系该说的词汇，还担心回你太晚你会不高兴……我怕我们的关系止步于此，又怕我们的关系不只如此。我纠结。我是个傻叉。</p><p><s>2019-03-22</s></p><p>他们说你试试吧，放下自尊心你也可以的。</p><p>可是每当我摇起尾巴，你的手就会收回去。</p><p>为什么呢？我像个沙雕一样追问。</p><p>是因为堵车、丢了钥匙、找不到厕所吗？</p><p>像梦里那样。</p><p><s>2019-07-25</s></p><p>还没开始就辩解 心里知道却</p><p>我好像因为你变得不自由了</p><p>可这又不能怪你 你啥都不知道</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 环境下如何挂载未越狱的 iOS 设备</title>
      <link href="/2019/10/02/ifuse/"/>
      <url>/2019/10/02/ifuse/</url>
      
        <content type="html"><![CDATA[<h2 id="changelog"><a class="markdownIt-Anchor" href="#changelog"></a> ChangeLog</h2><p>[2020-02-10-update] <s>在 Manjaro 上安装有点问题，还没折腾出来。</s></p><p>[2020-03-18-update] Arch 系的看文档好了： <a href="https://wiki.archlinux.org/index.php/IOS" target="_blank" rel="noopener">Arch_IOS</a></p><h2 id="tldr"><a class="markdownIt-Anchor" href="#tldr"></a> TL;DR;</h2><p>核心是两个包：libimobiledevice，用于 Linux 与 IOS 设备通信；ifuse，用于挂载 IOS 设备的文件。</p><p>至于下面提到的 ideviceinstaller，则用于查看 IOS 的 app bundleID，即 IOS 设备安装的 app 的标识码。非必要。（如果你记得或通过其它途径能找到对应软件的标志码的话……）</p><h2 id="需求"><a class="markdownIt-Anchor" href="#需求"></a> 需求</h2><p>需求：把本地的电子书、电影、音乐等放进 iOS 设备方便使用。若是在 Windows 环境，有各种助手……Linux 咋整呢？</p><p>（非越狱前提下：）</p><h2 id="限制"><a class="markdownIt-Anchor" href="#限制"></a> 限制</h2><p>挂载 <code>com.apple.Music</code> 等软件的 Documents 目录，以及尝试 <code>--container</code> 挂载时，报错 <code>ERROR: InstallationLookupFailed</code> 。</p><p>有可能是 <code>UIFileSharingEnabled</code> 的问题，但我不确定。</p><p>可能的解决方案（我没试过）：也许可以先通过助手（或者 libimobiledevice）安装 apple music 等软件的 ipa，然后尝试管理。</p><h2 id="步骤"><a class="markdownIt-Anchor" href="#步骤"></a> 步骤</h2><h3 id="一-linux-挂载-ios-设备"><a class="markdownIt-Anchor" href="#一-linux-挂载-ios-设备"></a> 一、Linux 挂载 iOS 设备</h3><p>执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install libimobiledevice-utils</span><br><span class="line"><span class="comment"># sudo pacman -Sy libimobiledevice</span></span><br></pre></td></tr></table></figure><p>装上后，Linux 的机子就可以连接 iOS 设备了。</p><p>用数据线连接电脑与 iOS 设备后，在 iOS 端点击信任。之后，<strong>（一般来说）文件管理就会自动挂载上 iOS 的存储器。</strong></p><blockquote><p>文件管理器自动挂载上也不过是把设备挂载到 <code>/media</code> 。如果没自动挂载上而有需求，可以手动挂载。</p><p>如果使用 ifuse，执行 <code>ifuse &lt;挂载点&gt;</code> 即可。例如：</p><p><code>ifuse /hqweay_phone</code></p></blockquote><p>不过，存储器里只有图片、视频、以及「<strong>通过各种助手安装的软件的文件夹</strong>」等……</p><blockquote><p>联系上面提到的 <a href="#%E9%99%90%E5%88%B6">限制</a> 。</p></blockquote><p>这样已经能读到「通过各种助手安装的软件的文件夹」了。举个例子，如果我们需要把 Linux 电脑上的一本电子书放进 iOS 上的「多看阅读」，就可以先通过「各种助手软件」安装「多看阅读」，然后执行上面步骤，再直接把电子书放进多看阅读的文件夹。</p><p>cool！不过我们能不能读取到通过 App Store 安装的软件的文件夹呢？</p><p>看下面啦。</p><h3 id="二-ifuse"><a class="markdownIt-Anchor" href="#二-ifuse"></a> 二、ifuse</h3><p>通过 ifuse 可以挂载「通过 App Store 安装的软件的文件夹」到电脑。</p><h4 id="arch-安装"><a class="markdownIt-Anchor" href="#arch-安装"></a> Arch 安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Sy ifuse</span><br></pre></td></tr></table></figure><h4 id="手动安装"><a class="markdownIt-Anchor" href="#手动安装"></a> 手动安装</h4><p>先下载并安装 ifuse。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; cd 到要安装的目标路径，然后：</span><br><span class="line"></span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;libimobiledevice&#x2F;ifuse.git</span><br></pre></td></tr></table></figure><p>编译安装。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 将源码在本机编译：</span><br><span class="line"></span><br><span class="line">.&#x2F;autogen.sh</span><br><span class="line">.&#x2F;configure</span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 执行脚本ifuse到系统终端（其实也可以不用，直接去src中运行也可以）</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>编译途中可能会报错缺少依赖，按报错缺啥安装啥即可……</p><h3 id="三-ifuse-使用"><a class="markdownIt-Anchor" href="#三-ifuse-使用"></a> 三、ifuse 使用</h3><p>各种命令详情见文档。</p><p><a href="https://github.com/libimobiledevice/ifuse" target="_blank" rel="noopener">https://github.com/libimobiledevice/ifuse</a></p><p>我们要干啥？要操作「通过 App Store 安装的软件的文件夹」。</p><p>ifuse 在这里起的作用便是把「通过 App Store 安装的软件的文件夹」挂载出来。</p><p>整个步骤分三步：一、在电脑上创个空文件夹（挂载点）；二、找到要操作的软件的唯一标识号；三、通过标识号把软件的文件夹挂载到挂载点。</p><h4 id="创建挂载点"><a class="markdownIt-Anchor" href="#创建挂载点"></a> 创建挂载点</h4><p>创个空文件夹。例如文件夹名 <code>hqweay_phone</code>。</p><h4 id="获取-app-bundleid"><a class="markdownIt-Anchor" href="#获取-app-bundleid"></a> 获取 app bundleID</h4><p>获取软件的唯一标识 app bundleID。</p><p>需安装 <code>ideviceinstaller</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yay -Sy ideviceinstaller</span><br><span class="line"><span class="comment"># sudo apt-get install ideviceinstaller</span></span><br></pre></td></tr></table></figure><p>执行 <code>ideviceinstaller -l</code>。</p><p>参数说明：</p><blockquote><p>-l, --list-apps List apps, possible options:<br>-o list_user - list user apps only (this is the default)<br>-o list_system - list system apps only<br>-o list_all - list all types of apps<br>-o xml - print full output as xml plist</p></blockquote><p>会列出 <code>com.coderforart.iOS.MWeb</code> 这类包名……这就是 app bundleID。</p><h4 id="执行挂载"><a class="markdownIt-Anchor" href="#执行挂载"></a> 执行挂载</h4><p>执行 <code>ifuse --documents [app bundleID] [空文件夹]</code>。</p><blockquote><p>–documents 挂载 Documents 目录</p><p>–container 挂载 sandbox</p></blockquote><p>例如 MWeb</p><p><code>ifuse --documents com.coderforart.iOS.MWeb hqweay_phone/</code></p><p>或多看阅读</p><p><code>ifuse --documents com.duokan.reader hqweay_phone/</code></p><p>kindle</p><p><code>ifuse --documents com.amazon.Lassen hqweay_phone/</code></p><p>挂载上就可以把操作该软件的文件夹了。</p><p>注意开发者使用文件夹的规则不同，请确保文件放入的文件夹是软件对应的本地文件存放目录……</p><h4 id="卸载"><a class="markdownIt-Anchor" href="#卸载"></a> 卸载</h4><p>使用完了记得卸载……</p><p><code>fusermount -u [空文件夹]</code></p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 配置与操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jekyll-hexo-hugo 互相迁移时关于永久链接的问题</title>
      <link href="/2019/09/23/jekyll-hexo-hugo/"/>
      <url>/2019/09/23/jekyll-hexo-hugo/</url>
      
        <content type="html"><![CDATA[<h2 id="ps"><a class="markdownIt-Anchor" href="#ps"></a> PS</h2><p>[update-2020-07-12]：我自己又读了一遍，发现前面的配置还有可取之处，但是后面的说明实在是逻辑混乱胡说八道。看到这篇文章的朋友请酌情阅读。</p><h2 id="说明"><a class="markdownIt-Anchor" href="#说明"></a> 说明</h2><p>在各个静态博客网站生成工具之间迁移文章时，可能会遇到链接不一致的问题。</p><p>比如你在 <code>jekyll</code> 配置好了，文章链接是 <code>https://leay.net/2019/09/23/new-post</code> 。迁移到 <code>hexo</code> ，文章链接又变成了 <code>https://leay.net/2019/09/23/2019-09-23-new-post</code> 。</p><p>通常，为了 SEO、使用第三方评论、或其它原因，我们总希望博客迁移后，链接保持能不变。</p><p>这里讨论一下我使用 <code>jekyll</code> 、<code>hexo</code> 、<code>hugo</code> 在迁移数据时关于链接问题的一些感想。</p><hr><p>先给一下方案，我建议文章按照 <code>year-month-day-title.md</code> ，即 <code>年-月-日-标题.md</code> 的格式命名。比如 <code>2019-09-22-new-post.md</code> 。之所以建议这样命名，是因为 <code>jekyll</code> 要求文章的文件名必须遵循这种格式。而 <code>hexo</code> 与 <code>hugo</code> 则没有这样的要求，后两者默认 <strong>文件名</strong> 作为标题。</p><p>以这种方式命名，<code>hexo</code> 与 <code>hugo</code> 仍可以通过配置获取到真正的 <code>title</code> 。而若不这样这样命名，如果想使用 <code>jekyll</code> 还得修改文件名。</p><blockquote><p>虽然我觉得接触过 hexo 和 hugo 的人恐怕不会想着回到 jekyll 了吧……</p></blockquote><p>而且通过年、月、日、标题的命名，在文件夹排列看起来比较清爽，同时还可以避免文件名冲突。</p><hr><p>而生成的链接，我建议使用 <code>/year/month/day/title</code> ，比如 <code>https://leay.net/2019/09/23/new-post</code> 。</p><p>如果只用 <code>title</code> 作为链接，比如 <code>https://leay.net/new-post</code> ，若两篇文章 <code>title</code> 一样的话，就 <strong>可能</strong> 会冲突。用年、月、日、标题确定唯一的文章，就很难冲突啦。</p><blockquote><p>这点和上面文件夹命名同理。</p></blockquote><p>其实只是为了不冲突，<code>https://leay.net/2019-09-23-new-post</code> 这样的链接也行。不过把时间区分出来观感好点……</p><hr><p>给出方式。</p><h2 id="如何配置"><a class="markdownIt-Anchor" href="#如何配置"></a> 如何配置</h2><h3 id="jekyll"><a class="markdownIt-Anchor" href="#jekyll"></a> jekyll</h3><p>文件名 ：<code>year-month-day-title.md</code></p><p>配置文件 <code>_config.yml</code> 添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink :</span> <span class="string">/:year/:month/:title</span></span><br></pre></td></tr></table></figure><h3 id="hexo"><a class="markdownIt-Anchor" href="#hexo"></a> hexo</h3><p>文件名 ：<code>year-month-day-title.md</code></p><p>配置文件 <code>config.yml</code> 添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">new_post_name:</span> <span class="string">:year-:month-:day-:title.md</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br></pre></td></tr></table></figure><h3 id="hugo"><a class="markdownIt-Anchor" href="#hugo"></a> hugo</h3><p>文件名 ：<code>year-month-day-title.md</code></p><p>配置文件 <code>config.toml</code></p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[frontmatter]</span></span><br><span class="line"><span class="attr">date</span>  = [<span class="string">":filename"</span>, <span class="string">":default"</span>]</span><br><span class="line"></span><br><span class="line"><span class="section">[permalinks]</span></span><br><span class="line"><span class="attr">post</span> = <span class="string">"/:year/:month/:day/:slug/"</span></span><br></pre></td></tr></table></figure><hr><p>这里先提一下，<code>post = &quot;/:year/:month/:slug/&quot;</code> 这条配置规则指的是 <code>hugo</code> 的 <code>content</code>文件夹下的 <code>post</code> 文件夹下的文章都用这条规则来解析。</p><p>如果 <code>content</code> 文件夹下还有其它文件夹，则其它文件夹下的文章的链接解析不受此规则影响。</p><p>比如 <code>content</code> 下有 <code>study</code> 和 <code>life</code> 两个文件夹，则两者都需要配置上。</p><p>如</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[frontmatter]</span></span><br><span class="line"><span class="attr">date</span>  = [<span class="string">":filename"</span>, <span class="string">":default"</span>]</span><br><span class="line"></span><br><span class="line"><span class="section">[permalinks]</span></span><br><span class="line"><span class="attr">study</span> = <span class="string">"/:year/:month/:slug/"</span></span><br><span class="line"><span class="attr">life</span> = <span class="string">"/:year/:month/:slug/"</span></span><br></pre></td></tr></table></figure><p>为啥呢？</p><h2 id="说明-2"><a class="markdownIt-Anchor" href="#说明-2"></a> 说明</h2><p>先提一下，现在手上没有 <code>jekyll</code> 环境，也没看过源代码，以下都是我的猜测理解……</p><p>一般的静态网页生成工具都提供文件名与链接地址的映射。</p><p>比如文件名为 <code>2019-09-23-new-post.md</code> ，若生成静态页面且部署后，访问的链接可能是这样的。</p><p><code>https://leay.net/2019-09-23-new-post</code></p><p>观察这个链接，会注意到文件名被直接解析为文章链接的后缀。</p><hr><p>静态网页生成工具通常通过 <code>permalink</code> 这个属性来配置链接的生成规则。<code>permalink</code> 是<code>Permanent Link</code> 的缩写，可译作 <strong>永久链接</strong> ，简单来讲，也就是指一个 <code>url</code> 对应一篇文章。</p><hr><p>在 <code>jekyll</code> 中，文章的命名格式是 <code>2019-09-23-new-post.md</code> ，即 <code>year-month-day-title.md</code> 。这种命名格式是 <code>jekyll</code> 的要求。</p><hr><p>在默认情况下，若配置文件中不配置 <code>permalink</code> ，或者配置 <code>permalink: date</code> ，链接就被解析为 <code>https://leay.net/2019/09/23/new-post.html</code> 。</p><p>——注意，上面这样配置，会跟上后缀 <code>.html</code> 。</p><p>若配置为 <code>permalink : /:year/:month/:title</code> ，链接则解析为 <code>https://leay.net/2019/09/23/new-post</code> 。</p><p>没有 <code>.html</code> 后缀。</p><p>具体配置方式比较多，详见官方文档。</p><h3 id="从-jekyll-迁移至-hexo"><a class="markdownIt-Anchor" href="#从-jekyll-迁移至-hexo"></a> 从 jekyll 迁移至 hexo</h3><p><code>hexo</code> 与 <code>jekyll</code> 的不同之处在于，<strong>hexo 可以取博文在 Front Matter 中定义的时间</strong> 。</p><p>写文章时常常有这样的内容。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: post</span><br><span class="line">title: 快乐星猫</span><br><span class="line">date: 2017-08-20</span><br><span class="line">categories: life</span><br><span class="line">toc: true</span><br><span class="line">tags: [充数]</span><br><span class="line">description:</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">我是一只猫，快乐的星猫～</span><br></pre></td></tr></table></figure><p><code>---</code> 中间那一坨就是 <strong>Front Matter</strong> 。</p><p><code>jekyll</code> 规定了文件名格式为 <code>year-month-day-title.md</code> ，就是为了从文件名取 <code>date</code>。</p><p>而 <code>hexo</code> 默认文件名为 <code>title</code> ，它优先从 <code>front matter</code> 里取 <code>date</code> 。</p><hr><p><code>hexo</code> 的链接和配置文件中两条属性相关。</p><p><code>permalink: :year/:month/:day/:title/</code> 链接的格式</p><p><code>new_post_name: :title.md</code> 解析标题方式</p><p>上面列出来的是默认配置。</p><p>在默认配置下，如果文件名为 <code>2019-09-23-new-post.md</code> ，解析出来的链接为 <code>http://leay.net/2019/09/23/2019-09-23-new-post/</code> 。</p><p>不对劲吧。</p><p>这就是因为在 <code>hexo</code> 的 <code>permalink</code> 里，默认的 <code>:year</code> ，<code>:month</code> 等使用的是 <strong>front matter</strong> 里的 <strong>date</strong> 。</p><hr><p>我们分析下链接 <code>http://leay.net/2019/09/23/2019-09-23-new-post/</code> 。</p><p>前面的 <code>2019/09/23</code> 对应的是 <strong>front matter</strong> 里的 date，后面的 <code>2019-09-23-new-post</code> 对应的则是文件名。</p><hr><p>为啥？</p><p>上面提到了。<code>jekyll</code> 要求的文件名格式是 <code>year-month-day-title.md</code> ，就是为了把文件名中的 <code>year</code> 、<code>month</code> 等取为 <code>date</code> 。但是 <code>hexo</code> 没这个要求，文件名格式就是 <code>title.md</code> 。即，默认文件名作为 <code>title</code>。然后，取 <code>front matter</code> 里的时间作为 <code>date</code> 。</p><hr><p>那咋整呢？如果要把博文从 <code>jekyll</code> 迁移到 <code>hexo</code> ，这不是有冲突吗。</p><p>这就需要用到上面的第二条属性了。</p><p><code>new_post_name: :title.md</code> 解析标题方式</p><p><code>new_post_name</code> 可以配置解析文件名的方式。</p><p>默认 <code>new_post_name: :title.md</code> 就是把文件名作为 title。</p><p>修改为 <code>new_post_name: :year-:month-:day-:title.md</code> 。</p><p>这时候，<code>hexo</code> 就会把文件名中定义的时间当作 <code>date</code> 使用了。</p><hr><p>回头看一下。文件名为 <code>2019-09-23-new-post.md</code> 。</p><p>配置</p><blockquote><p><code>new_post_name: :year-:month-:day-:title.md</code></p><p><code>permalink: :year/:month/:day/:title/</code></p></blockquote><p>此时，链接就为 <code>http://leay.net/2019/09/23/new-post/</code> 了。</p><h3 id="从-hexo-迁移至-hugo"><a class="markdownIt-Anchor" href="#从-hexo-迁移至-hugo"></a> 从 hexo 迁移至 hugo</h3><p><code>hugo</code> 和 <code>hexo</code> 类似，默认以文件名作为 <code>title</code> 。</p><p>即便我们没使用过 <code>hugo</code> ，也可以畅想一下，<code>hugo</code> 里有没有类似 <code>hexo</code> 这样的配置？</p><p>一：配置解析链接的规则。</p><p>二：从文件名提取真正的 <code>title</code> 。</p><p>带着疑问查看文档。</p><h4 id="permalinks"><a class="markdownIt-Anchor" href="#permalinks"></a> permalinks</h4><p>首先看到了 <code>permalinks</code> 的配置。</p><p><a href="https://gohugo.io/content-management/urls/#permalinks" target="_blank" rel="noopener">https://gohugo.io/content-management/urls/#permalinks</a></p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[permalinks]</span></span><br><span class="line"><span class="attr">posts</span> = <span class="string">"/:year/:month/:title/"</span></span><br></pre></td></tr></table></figure><blockquote><p>Only the content under <code>posts/</code> will have the new URL structure. For example, the file <code>content/posts/sample-entry.md</code> with <code>date: 2017-02-27T19:20:00-05:00</code> in its front matter will render to <code>public/2017/02/sample-entry/index.html</code> at build time and therefore be reachable at <code>https://example.com/2017/02/sample-entry/</code>.</p><p>只有 <code>/posts</code> 文件夹下的文件才会匹配这条链接解析规则。如，文件 <code>content/posts/sample-entry.md</code> ，它在 <code>front matter</code> 里配置了 <code>date: 2017-02-27T19:20:00-05:00</code> 。这个文件在 <code>build</code> 时就会被渲染为网页，放至 <code>public/2017/02/sample-entry/index.html</code> ，通过链接 <code>https://example.com/2017/02/sample-entry/</code> 访问。</p></blockquote><p>这样可以配置解析链接的规则，但同时也如文档所说，<strong>此时使用的 <code>date</code> 是 <code>front matter</code> 里定义的，而且 <code>title</code> 是文件名</strong>。</p><h4 id="瞧瞧-hugo-文件的-front-matter"><a class="markdownIt-Anchor" href="#瞧瞧-hugo-文件的-front-matter"></a> 瞧瞧 hugo 文件的 front matter</h4><p>瞧瞧 <code>front matter</code> ……</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: "快乐星猫"</span><br><span class="line">date: 2019-09-23T23:00:01+08:00</span><br><span class="line">draft: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure><blockquote><p>注意！默认生成的文章中， <code>date</code> 使用的时间格式是 <code>YYYY-MM-DD HH:MM:SS +0800</code> 。（格式不作说明了。）</p><p>没看文档，网上资料说时间格式必须这样。从 <code>hexo</code> 迁移到 <code>hugo</code> ，也需要注意这个，把时间修改一下。</p><p><s>但是我貌似没修改也渲染出来了……</s></p><p><s>不过我现在不打算折腾 hugo，这个疑问先留着吧……</s></p><p>不改也是可以的！！</p></blockquote><h4 id="frontmatter"><a class="markdownIt-Anchor" href="#frontmatter"></a> frontmatter</h4><p>那有没有解析文件名的配置呢？</p><p>这里～</p><hr><blockquote><p><a href="https://gohugo.io/getting-started/configuration/" target="_blank" rel="noopener">https://gohugo.io/getting-started/configuration/</a></p><p><code>:filename</code></p><p>Fetches the date from the content file’s filename. For example, <code>2018-02-22-mypage.md</code> will extract the date <code>2018-02-22</code>. Also, if <code>slug</code> is not set, <code>mypage</code> will be used as the value for <code>.Slug</code>.</p><p>An example:</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[frontmatter]</span></span><br><span class="line"><span class="attr">date</span>  = [<span class="string">":filename"</span>, <span class="string">":default"</span>]</span><br></pre></td></tr></table></figure><p>The above will try first to extract the value for <code>.Date</code> from the filename, then it will look in front matter parameters <code>date</code>, <code>publishDate</code> and lastly <code>lastmod</code>.</p></blockquote><hr><p>配置</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[frontmatter]</span></span><br><span class="line"><span class="attr">date</span>  = [<span class="string">":filename"</span>, <span class="string">":default"</span>]</span><br></pre></td></tr></table></figure><p>你看，这里 <code>date</code> 对应一个数组，<code>hugo</code> 会去这个数组，按照元素顺序寻找 <code>date</code> 。</p><p>在上面的配置里，<code>hugo</code> 就优先从文件名（“filename”）中获取 <code>date</code> 。</p><p>比如有篇文章命名为 <code>2018-02-22-mypage.md</code> ，那么其中的 <code>2018-02-22</code> 就会被提取为 <code>date</code>。</p><p>如果文件名没有 <code>date</code>，<code>hugo</code> 就从 <code>：default</code> 去寻找。（:default 指的啥，以及具体配置请查看文档……）</p><hr><p>同时，若 <code>slug</code> 没有设置，则 <code>mypage</code> 会设置为 <code>slug</code>。</p><p>这里的 <code>slug</code> 是个新概念。<code>slug</code> 可以在 <code>front matter</code> 配置。</p><h4 id="slug"><a class="markdownIt-Anchor" href="#slug"></a> slug</h4><p>看说明，</p><blockquote><p>slug：The token to appear in the tail of the URL</p></blockquote><p>这啥玩意……</p><blockquote><p>我的理解是：反正看样子这玩意是用来配置 <code>url</code> 的，<code>url</code> 在哪配置，在 <code>permalink</code> 嘛。那这应该是配置 <code>permalink</code> 的一个变量。</p></blockquote><p>可以先不管，反正只要我们按照 <code>year-month-day-title.md</code> 这样来命名文件，<code>slug</code> 在这里显然指的就是 <code>title</code>。（虽然 <code>slug</code> 的定义应该比这大……）</p><hr><p>然后回到 <code>permalink</code> 的配置，发现确实有个 <code>：slug</code>。</p><blockquote><p><code>:slug</code></p><p>the content’s slug (or title if no slug is provided in the front matter)</p></blockquote><p>这里的 <code>:slug</code> 就是指 title。</p><hr><p>好，配置 <code>permalinks</code> 吧。</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[permalinks]</span></span><br><span class="line"><span class="attr">post</span> = <span class="string">"/:year/:month/:day/:slug/"</span></span><br></pre></td></tr></table></figure><p>结束。</p><h4 id="那-slug-与-title-的区别是啥"><a class="markdownIt-Anchor" href="#那-slug-与-title-的区别是啥"></a> 那 :slug 与 title 的区别是啥？</h4><p>如果我们用标题作文件名，链接也只会使用标题。</p><p>比如 <code>post.md</code> 会解析为 <code>https://leay.net/post</code>。</p><p>如果文件名冲突咋办？</p><p>这时就可以在 <code>front matter</code> 里设置 <code>slug</code> 来区分。</p><hr><p>另一个问题，文件名怎么会冲突呢？</p><p>前面提到过，在保存博文文件的 <code>content</code> 文件夹下可以分文件夹保存博文，不同文件夹下就可能文件名冲突。</p><p>其实如果我们不设置 <code>permalinks</code> ，<code>content</code> 下若有两个文件夹 <code>life</code> ，<code>study</code> 。</p><blockquote><p>– /content</p><p>---- /life</p><p>------ <a href="http://post.md" target="_blank" rel="noopener">post.md</a></p><p>---- /study</p><p>------ <a href="http://post.md" target="_blank" rel="noopener">post.md</a></p></blockquote><p><code>life</code> 下有一个 <code>post.md</code> 会被渲染为 <code>https://leay.net/life/post</code>，<code>study</code> 下的 <code>post.md</code> 则会被渲染为 <code>https://leay.net/study/post</code>。</p><p>但若设置了 <code>permalinks</code> ，链接就不会像这样默认加上子文件夹 <code>life</code> 或者 <code>study</code> 了。两者都会被渲染为 <code>https://leay.net/post</code>，这时，就产生冲突啦！</p><h4 id="总结一下"><a class="markdownIt-Anchor" href="#总结一下"></a> 总结一下</h4><p>先配置</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[frontmatter]</span></span><br><span class="line"><span class="attr">date</span>  = [<span class="string">":filename"</span>, <span class="string">":default"</span>]</span><br></pre></td></tr></table></figure><p>优先从文件名获取 <code>date</code> 。然后把 <code>title</code> 解析为 <code>slug</code> 。</p><p>再通过</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[permalinks]</span></span><br><span class="line"><span class="attr">post</span> = <span class="string">"/:year/:month/:day/:slug/"</span></span><br></pre></td></tr></table></figure><p>配置链接解析规则。</p><hr><p>此时的 <code>:year</code> 、<code>:month</code> 、<code>/:day</code> 就是从文件名获取的 <code>date</code>。</p><p><code>:slug</code> 是从文件名解析出来的 <code>title</code>。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>应如雨止</title>
      <link href="/2019/09/16/rain/"/>
      <url>/2019/09/16/rain/</url>
      
        <content type="html"><![CDATA[<p>9 月 16 日晚，细雨和操场织成一张网，网眼收紧，少年们唱起歌谣。我刚吃了碗泡面，酸辣催汗，恍如又夏。</p><p>中秋团圆，团圆前后都是离别。那时候真蠢，不哭喊也不吵闹，明明是最适合干这种事的年纪，却要假装看透了一切，笨拙地模仿大人。你看啊，这些事都有时限 —— 好多事都有时限。比如过了十五岁再谈离家出走就不太合适了，比如你能和高中生谈恋爱的机会只有短短几年 —— 虽然这个时限内也不能太光明正大。但一旦过了这个时间，你再想搭讪高中生，就会被当作变态。</p><p>「变态」这个词用得太宽泛了，有时候让人恍惚以为它是不是啥时候已经成了褒义 —— 一如许多词的词性在日常中渐渐化为贬义。</p><p>「时限」这个词则暗藏着这样的意味：你应该在合适的年龄做合适的事情。</p><p>这什么意思呢？管它什么意思。深究意义太过无聊。工科生善于应用，应用以创造。</p><p>哎，所以讨厌被贴标签也是谎话。我们只是拒绝那些泯灭个性的，负面的标签。那全都是以偏概全，哗众取宠。而对于贴金的标签，要多少来多少，我相信，它们全都是客观评价。</p><p>如果你拒绝被打上标签，你在各种平台就只是个没有个性的圆圈。最好的方式当然是离开网络。短短数年前，我们还在为了逃避现实堕入网络。而现在，已经发展到了逃离网络回归现实的地步了。哎，时间过得太快了。如果现在流行杀马特，我搞不好还能在网络上混得风生水起。可惜没有如果。不是有这样的说法吗？「你有价值，别人才会友善对待你。」才不是这么回事。其实表现得越蠢越会受欢迎，因为你在别人眼里没有威胁。现在已经是不做坏事就算好人的时代了。</p><p>如果离不开网络，那就掌握主动权，自己打标签。嘛……闲话不提。</p><p>不过跳出这个限制也很简单。哪有那么复杂呢。如果你有能力不承担责任，你就可以永远当小孩 —— 至少多了这么个选项。这自然和逃避责任不同，逃避，那是巨婴所为。而若你有能力承担责任，那就更棒啦，可以开开心心地当个大人。</p><p>上面这样刻意强调年龄像是在隐藏无知。哎。常见老人开玩笑，严肃的话题被他们信手拈来。直面未知仍能作乐，似乎顺其自然，理所应当。小孩也会拿死亡开玩笑，那是一样的心情吗？年轻时也可以无牵无挂，会是一样的心情吗？秃头的我，买 A 片的老头，怎么可能一个心情。</p><p>有这样一个故事。年轻人问哲人，「我现在一无所求，以前的目标现在都实现了。是不是可以自杀了？」哲人回复，「这世界还有那么多风景，那么多的道理。你就不感到兴奋吗？」</p><p>年轻人说，「我对那些东西没有兴趣。」哲人想了一下，「那你应该承担点责任。倘若你结婚，生子。自然会有股无名的力量推你前行。」</p><p>年轻人沉思，「难道人生一定要不停地设定目标，承担责任，来推迟死亡时间吗？」哲人又说，「这不很好嘛？人生没有意义，你每多活一秒，就是多赚一秒。」</p><p>年轻人说道，「妈的，那太苦了。」</p><p>哲人又说，「你杠什么杠。你这种杠精还是自杀吧，反正你死不死管我屁事。」</p><p>哈！我有点爱上这种滑稽的结局了。它烂尾烂得很诚恳 —— 解决不了，那就碾轧过去。这种结构很像生活，你计算不了一切，但好像还是有规律可循。读万卷书不如行万里路。倘若经历过痛苦，文学里的艰难就都不算什么事了。就像故事之所以有趣，正在于「故事」这个词模糊了真实与虚构。明星的鸡毛蒜皮，普通人内心的汹涌。</p><p>然而心里总潜藏着一个声音：笨蛋，你还没见识过真正的残酷。强说愁仅仅是因为你摇起的尾巴和她收回去的手。</p><p>夏天已经过去了。细雨和呓语编织的网，随着情绪起伏收紧了网眼。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>译 - Annie Hall (1977) - The Movie Screen Scene</title>
      <link href="/2019/08/25/T-annie-hall-1977/"/>
      <url>/2019/08/25/T-annie-hall-1977/</url>
      
        <content type="html"><![CDATA[<h2 id="正文"><a class="markdownIt-Anchor" href="#正文"></a> 正文</h2><p>原文：<a href="https://themoviescreenscene.wordpress.com/2018/11/27/annie-hall-1977/" target="_blank" rel="noopener">Annie Hall (1977)</a></p><p><em>November 27, 2018</em></p><p><strong>安妮霍尔（1977）</strong></p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/study/2019-08-25-annie-hall-1977/20190825205853.jpg" alt="img"></p><p>Woody Allen（伍迪艾伦）最好的电影是哪一部？由于每个人都有自己观影的口味，而且他的片子实在太多了，这个问题真的很难回答。也许你更喜欢他早期的那些喜剧？比如 Love and Death《爱与死》，Sleeper or Bananas《傻瓜大闹科学城》。Manhattan《曼哈顿》算是伍迪艾伦最精致的电影吗？还是说你更喜欢 Hannah and Her Sisters《汉娜姐妹》这样的主流电影？或者你更喜欢折衷一点的，比如 Zelig 《西力传》，A Midsummer Night’s Sex Comedy《仲夏夜性喜剧》这样的片？</p><p>伍迪艾伦的最佳电影是哪部并没有一个定论，但至少我们可以肯定地说，Annie Hall《安妮霍尔》是他最重要的一部——虽然也有不少人觉得这部片子是他巅峰之作。一提这部电影，大量记忆犹新的镜头就会浮现在眼前——像是伍迪艾伦在厨房追逐逃跑的龙虾、一个不合时宜的喷嚏把昂贵的可卡因全都吹散。</p><blockquote><p>伍迪艾伦吸可卡因打喷嚏这场戏是个意外事件，并没有写在剧本上。在电影试映时，观众看到这段暴笑不止，导演于是决定保留这一段。为了弥补因为观众笑得太长时间而错过了接下来的几个笑话，不得不增加电影胶片的长度。</p></blockquote><p>伍迪艾伦对 Annie Hall 其实并不是很满意，他认为这部电影并没有完全展现出他希望表达的东西。然而 Annie Hall 却是他票房第四高的电影，而且这部电影还获得了第 50 届奥斯卡金像奖的最佳影片、最佳女演员、最佳导演和最佳剧本奖这四项奖项。除此以外，这也是伍迪艾伦唯一一部自己以演员的身份获得奥斯卡提名的片子。</p><blockquote><p><a href="https://ew.com/movies/2017/05/17/woody-allen-annie-hall-not-great/" target="_blank" rel="noopener">Woody Allen doesn’t think <em>Annie Hall</em> is that great Or ‘Manhattan,’ or ‘Hannah and Her Sisters’</a></p><p>伍迪艾伦凭借 Annie Hall 获得「第 50 届奥斯卡金像奖最佳男主角提名」</p><p>伍迪艾伦是好莱坞各大奖项的常客，曾 23 次获得<em>奥斯卡提名</em>，3 次获得编剧奖。</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/study/2019-08-25-annie-hall-1977/20190825205939.jpg" alt="aaaaaa"></p><p>Annie Hall 在伍迪艾伦的导演和写作生涯里起着关键作用。这部电影是伍迪艾伦从纯粹的喜剧到制作电影的一个转折点，它牺牲了一些幽默，有一个更严肃的创作意图，也更具艺术性。不过这并不是说安妮霍尔就不够有趣了，只是伍迪艾伦并不想仅仅止步于取悦观众。</p><p>这种转折是在 Annie Hall 之前开始的。Love and Death（爱与死）虽然也是一部喜剧，但它的主题是「死亡」，而且带着一种滑稽的悲观基调。 Play It Again Sam《呆头鹅》是伍迪艾伦第一次尝试以纯粹的人际关系为主题的喜剧，没有涉及罪犯、没有香蕉共和国、没有未来世界的反乌托邦也没有 19 世纪的俄罗斯人。不过从女主 Annie Hall 和一个 40 岁、满脑子都是对死亡的思考、直到现在都还没能够和别人维护一段持续的亲密关系的男人热恋这一点来看，安妮霍尔仍然是一部伤感而有趣的电影。</p><blockquote><p>这几个主题都是伍迪艾伦之前的片子里的元素。香蕉共和国出自 Bananas、未来的反乌托邦出自 Shadows and Fog、19 世纪的俄罗斯人则出自 Love And Death。</p></blockquote><p>这也反映在电影的智识框架中。伍迪艾伦早期的电影也提供了一系列令人印象深刻的文化参考，Annie Hall 则更积极地展示了他的学识。这部电影充满了对 Freud（弗洛伊德）、Wagner（瓦格纳）、Sylvia Plath（西尔维娅·普拉斯）、Fellini（费里尼）、Balzac（巴尔扎克）和其他一些人的热情。</p><blockquote><p><strong>西格蒙德·佛洛伊德</strong>（德語：Sigmund Freud，出生名：Sigismund Schlomo Freud，1856年5月6日－1939年9月23日），奥地利心理學家、精神分析學家、哲學家，犹太人。</p><p><strong>威廉·理查德·瓦格纳</strong>（德語：Wilhelm Richard Wagner，1813年5月22日－1883年2月13日），德国作曲家、劇作家，以其歌劇聞名。</p><p>伍迪艾伦说过：“I just can’t listen to any more Wagner, you know……I’m starting to get the urge to conquer Poland.”</p><p><strong>希薇亚·普拉斯</strong>（英语：Sylvia Plath，1932年10月27日－1963年2月11日），生于美国波士顿牙买加平原区，儿童作家出身的美国天才诗人、小说家及短篇故事作家。</p><p><strong><em>費德里</em>柯·費里尼</strong>（義大利語：Federico Fellini，1920年1月20日－1993年10月31日），義大利藝術電影導演，同時也是演員及作家。</p><p><strong>奥诺雷·德·巴尔扎克</strong>（法语：Honoré de Balzac，1799年5月20日－1850年8月18日），原名<strong>奥诺雷·巴尔扎克</strong>（Honoré Balzac），法国19世纪著名作家，法国现实主义文学成就最高者之一。</p></blockquote><p>没有迎合观众的打算，伍迪艾伦很乐意拍一部台词比活动占更大比重的电影。这部电影的镜头平均时长达到了 14.5 s，对于 20 世纪 70 年代来说，这可是相当长了。和现在电影里的接连不断的跳切相比，更是非常不同的风格。丰富到足以填满几部电影的内容被整合进 Annie Hall 这一部电影里，不得不说这实在是一个充满创意的制作人的作品。</p><blockquote><p>jump-cutting 跳切，电影术语。</p></blockquote><p>Annie Hall 显然属于精英主义。男主角 Alvy Singer（由伍迪艾伦自己扮演）在电影院排队等候时表达了他对一个讲话不客气的男子的厌恶。对于持以不同艺术观点的人，他表示对他们的坏品味感到遗憾。还有一些场合也会让 Alvy 皱眉，比如遇到一个粗俗、不拘礼节的人想让 Alvy 写他的笑话，或者观看用上了笑声音轨的喜剧节目。</p><blockquote><p>laughter track 笑声音轨。喜剧节目里那些提前录好的笑声。</p></blockquote><p>就连 Alvy 和 Annie 的神经质都在某种程度上被视为他们高智商的证据。在一个场景里，Alvy 询问一对年轻的夫妇为什么他们在一起那么快乐，然后那位女士回复说，「我很浅薄，空洞，没有自己的想法，也说不出什么有趣的东西。」她的男性伴侣也对此表示认同。在某种程度上，不快乐其实是知识分子的特权。</p><p>虽然电影展示了人物的博学，但也有观点表示，虽然电影里的人物都很聪明，但他们对自己的情感和需求已经没有自己的理解了。情绪被理智和药物控制，失去了真正的意义。Alvy 在和 Annie 复合时谈到了自己的成熟，但是当他和 Annie 分手时又说了同样的话。其实在这两种情况下，Alvy 都没表现得有多成熟。</p><p>这似乎是社会上普遍存在着的一种不安，就像 Alvy 的朋友 Rob（Tony Roberts 饰）对自己的性生活吹嘘不已，常搞些花里胡哨的名堂让自己看起来没那么老。Alvy 所处的 New Yrok 温暖、充满活力，与 Rob 浅薄颓废的 California 形成鲜明的对比。还有一个例子，Annie 的哥哥告诉 Alvy，说他有时候开车，会想着一头撞上其他车的前灯。这让 Alvy 之后的行车之旅很不舒服。</p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/study/2019-08-25-annie-hall-1977/20190825210009.png" alt="aaaaa"></p><p>不过影片的重心还是聚焦在 Alvy 和他分分合合的女友 Annie Hall（Diane Keaton 黛安·基顿饰）身上。在影片的开头，Alvy 用了两个笑话向观众做自我介绍。下面是第一个：</p><p><em>有两位老妇人在 Catskills mountain（卡茨基尔山）度假，其中一个说：「哎，这地方的食物可真够糟的。」另一个说：「可不是嘛，给的份量还那么少。」你瞧，我对生活的看法基本上也是如此：尽管充满了寂寞、痛苦、悲惨和不幸，但又觉得一切都逝去得太快。</em></p><p>这奠定了 Alvy 性格的基础。Annie 后来告诉他，他无法享受生活。我们可以在电影里看到，当 Alvy 还是个孩子时（仍然戴着大眼镜），他拒绝做家庭作业，因为他对宇宙终有一天会终结感到沮丧。他就是我们从众多伍迪艾伦的电影里了解到的那个人物——一位依赖药物，一生都在接受治疗却没有从中得到任何慰藉的精神病患者。</p><p>即便是非常细枝末节的事，Alvy 也完全不讲道理。由于 Annie 的迟到，电影已经开始了两分钟，Alvy 就拒绝入场看电影；因为被别人在大街上认出来而感到恼火；乐此不疲地反复观看 The Sorry and the Pity（悲哀和怜悯，原名是 Le chagrin et la pitié）这部关于大屠杀的消极电影。</p><p>事实上，Alvy 的部分不安全感与他的犹太教育有关。他有点好笑地偏执于路人对他犹太身份的「暗示」，然而这所谓的「暗示」大部分都发生在他的脑袋里。比如别人把 ‘Did you?’ 简称为 ‘D’you?’，他坚持认为别人说的是 ‘Jew?’。在和身为 WASP 的 Annie 约会时，这种偏执便导致 Alvy 产生了一些莫名其妙的念头。</p><blockquote><p>WASP：White Anglo-Saxon Protestants</p><p>有点难解释，举个例子：「近年来美国保守和宗教势力一直在扩大，很多 WASP 从原教旨主义基督教的教义出发，反对堕胎、同性婚姻甚至同性恋等自由主义者支持的事务，希望能够“恢复美国式的生活”。」</p></blockquote><p>有一个场景，Alvy 和 Annie 冷淡的家人们共进晚餐，Alvy 不安地意识到 Annie 的格莱美奶奶，这个讨厌犹太人的「霍尔奶奶」（‘Grammy Hall‘）正嫌弃地看着他。然后镜头展现出他在脑海里打扮成一个犹太教经师的场景，人物的不安就从视觉上让观众体会到了。伍迪艾伦通过使用分屏的手法展现两个不同的家庭在晚餐时的表现，以鲜明的对比强调了冷淡的 Annie 一家和 Alvy 成长的热闹犹太家庭之间的差异。</p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/study/2019-08-25-annie-hall-1977/20190825210032.jpg" alt="aaaaaaa"></p><p>在电影开头，Alvy 讲的第二个笑话是这样的：</p><p><em>另一个对我来说比较重要的笑话，一般认为它出自于格劳乔·马克斯，但是我想它最初出现在弗洛伊德的《诙谐及其与无意识的关系》一书中。是这样的，我来大致复述一下：「我永远也不想加入一个会员都是我这样的人的俱乐部。」这是我成年生活的关键笑话，它说明了我与女人之间的关系。</em></p><blockquote><p>《诙谐及其与无意识的关系》：弗洛伊德对笑话和幽默进行精神分析论述的德文书籍（原标题为 Der Witz und seine Beziehung zum Unbewußten），初版于 1905 年，1960 年被翻 译成英文。</p></blockquote><p>像 Alvy 这样充满问题的人会和女性有什么关系？和什么样的女性呢？当然了，和他一样有很多问题的女性。Alvy 在打网球时遇到了一个年轻女性，Annie Hall。Annie 她那笨拙的道歉方式，有趣的台词（“la-de-da” 是我们记忆最深的一句），还有奇特的穿着风格，和 Alvy 简直是天生一对。</p><p>Alvy 带着观众快速回顾了他之前的婚姻——为了避免和第一任妻子发生性关系，他花时间和她讨论肯尼迪的暗杀阴谋论；在第二次婚姻中，他试图使用性来表示对他妻子上层阶级朋友们的反抗。</p><p>然而，就像在电影结尾的那段蒙太奇里展示的欢乐时光一样，很显然 Annie 才是他一生中的真爱，也是他最怀念的一任女友。不幸的是，Alvy 不想加入会员都是他这种人的俱乐部。他不能接受爱而不破坏它，因此他和 Annie 的关系是注定要失败的。这一点在电影开头就有说明，所以我这并不算剧透哈。</p><p>Alvy 和 Annie 之间的关系开始得太顺畅了，以至于找不到一个明显的，能解释他们为何分开的理由。他被她的粗心与个性所吸引，她则着迷于他的风趣和才智。他鼓励她作为一个个体去成长、用自己的品味教育她、支持她想做一名歌手的尝试、并说服她去上课。</p><p>随着 Alvy 用他不正常的精神状态、猜疑和偏狭去驱赶 Annie，这段关系很快就恶化了。当他通过询问 Annie 是否在经期来驱散她的坏情绪时，也在期待她能持续关注他的感受。明明是他鼓励 Annie 去修读大学的课程的，现在 Alvy 却因为担心她会外遇，对上课这件事产生了敌意。</p><p>伍迪艾伦塑造了许多不断成长的女性角色。他帮助她们发展提高，又担心有一天她们会超越他，继续前进。比如在这些电影里：Manhattan（曼哈顿）、Hannah and Her Sisters（汉娜姐妹）、Deconstructing Harry（解构爱情狂）。女性需要一个男人来帮助她们成长，这种观点可能有点太自恋了。但在伍迪艾伦的电影里，这是一个固定的主题。</p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/study/2019-08-25-annie-hall-1977/20190825210058.jpg" alt="aaaa"></p><p>Annie Hall 多大程度上算是伍迪艾伦的自传作品？伍迪艾伦总是迅速地将自己和他作品里的人物撇清关系，然而他们的性格总是惊人地相似。虽然他作品里的主角不完全是按他自己来塑造的，但是毫无疑问，他把自己的性格和经历经过夸张，扭曲后糅入了角色。</p><blockquote><p>《安妮·霍尔》经常被认为是半自传电影，但此说法已被伍迪艾伦否认。</p></blockquote><p>想想看，Alvy 是一个喜剧作家，他的名字听起来和 Allen（艾伦）很相似，Alvy 童年时的一些事儿也发生在伍迪艾伦身上。然后是伍迪艾伦和 Diane Keaton（黛安·基顿）间并不成功的关系，而且黛安·基顿的真名也叫作 Hall（霍尔）。事实上，黛安·基顿的确表明了 Annie Hall 就是一个和蔼版本的她自己。</p><p>Annie Hall 这部电影自由、非线性的结构正体现了影片中两个中心人物混乱，无组织的思维和生活。在这种技巧下，伍迪艾伦得以打破传统的叙事方式，自由地向我们传递他想要表达的任何东西。Annie Hall 的结构如此松散，以至于我们完全感觉不到现在看到的版本其实在第一个版本上剪去了 50 分钟。</p><blockquote><p>PS：第一个版本有 140 分钟。</p></blockquote><p>这种结构下，即便伍迪艾伦频繁地展现他的叙事技巧，角色的形象仍然牢固地竖立在我们脑海里，观众似乎在切身感受角色们的焦虑与担忧。每次脱离传统的叙事手段，都加强了我们对 Alvy 和 Annie 的认识和理解。</p><p>有时候，这些手段被用于展现 Alvy 和 Annie 的不契合。他们相遇的那天，Annie 邀请 Alvy 去她家。他俩看似颇有兴致地讨论着艺术，屏幕底部的字幕却向观众们展现了他们真正在考虑的东西——担心失态、被对方当作笨蛋、以及一些与性相关的东西。</p><p>在另一个场景里，Alvy 想要和 Annie 做爱。Annie 否认自己分心了，但是我们看到的却是，Annie 的灵魂脱离了身体，坐在椅子上。Annie 的灵魂甚至对着越来越恼火的 Alvy 说道，「Alvy，你知道我把画板放哪儿了吗？我想我可以趁着你们干这事时画上两笔。」</p><p>还有一个场景，我们看到他们一起乘坐飞机，同时，他们的想法通过画外音的形式传递出来，展示了他们对相同经历的理解差异有多大。还有一次，Alvy 和 Annie 和他们的心理医生交流时，伍迪艾伦通过一个分屏镜头也向我们展示了类似的不和谐，以及思维方式间的巨大鸿沟。（顺便提一下，这里并不是真正的分屏。他们俩在一间屋子里，然后通过镜头调度制造了一种分屏的错觉。）</p><p>虽然电影制作里经常使用闪回，但许多都显得非常刻意。在 Annie Hall 这部电影里，Annie 则真的带着 Alvy 去看她年轻时和前男友们相处的情形。Alvy 倾听他们的谈话并不断地评论。作为回报，Alvy 则带着 Annie 和 Rob 回到了他家去看他小时候的样子。当 Rob 向 Alvy 的家人提问并得到回答时，这一切都在真实发生着的错觉就就从观众心里烟消云散了。</p><p>因为电影里的角色们都在讲话，所以第四面墙经常被打破。比如电影刚开始时，我们不知道 Alvy 到底在和谁讲话。也许是心理医生、又或者是摄影组、也可能是我们。在另一个场景里，Alvy 靠近，面向镜头，向一个声音洪亮、固执己见、和他有着不同艺术看法的人表达愤怒。</p><p><img data-src="https://cdn.jsdelivr.net/gh/hqweay/picbed/study/2019-08-25-annie-hall-1977/20190825210121.jpg" alt="aaa"></p><p>不仅仅是 Alvy，Alvy 批评的这个男人也站了出来维护自己的观点。作为回应，Alvy 从海报后请出了 Marshall McLuhan（马歇尔·麦克卢汉）。（Alvy 批评的这个男人一直在对麦克卢汉发表高论，麦克卢汉愤怒地告诉这个人，他完全误解了麦克卢汉的作品。）当然，这并没有真实发生。最后 Alvy 对着镜头若有所思地说道：「哎，如果生活都像这样的话！」</p><blockquote><p>这是麦克卢汉本人扮演的。</p></blockquote><p>幻想还发生在其他场景里，比如 Alvy 和 Annie 迪士尼风格的卡通形象、演员们根据 Alvy 的剧本演出 Alvy 和 Annie 最后一次会面的场景。与现实不同，剧本里有着一个美满的团聚。「啧，你想怎样？」Alvy 询问我们，「你知道，人们总是试图通过艺术来表达完美结局，毕竟这在现实生活真的很难实现。」</p><p>即使是配角也会脱离他们的位置来和我们交谈。在 Alvy 给我们展示他学生时代对性发狂的那个场景里，Alvy 思考着他的同学们现在都在做什么。有几个孩子就对着镜头告诉我们现在他们在哪工作，还谈了一些他们在未来的成人生活里一些没啥必要的细节，例如对海洛因上瘾、迷恋皮革。同样，Alvy 可以在街上随便找个人讲话，而且别人还会淡定地回复。虽然有些人的回答很奇怪。一个人就这么说：「我们用一个大振动蛋。」</p><blockquote><p>I’m into leather.</p><p>这份剧本翻译为「我经营皮货。」</p><p>这里应该表达的是喜欢的意思。</p></blockquote><p>有人可能会觉得 Annie Hall 对人际关系持以悲观态度。最终魔法失效了，他们之间的关系也随之破裂。在某种程度上确实如此，但其实这部电影也主张爱和亲密关系。即便是 Alvy，这个把所爱之人赶走的家伙，也强调了爱和亲密关系的重要性：</p><p><em>我意识到她（Annie）是一个多么好的人，能认识她就是一件多么有趣的事。我想起了那个老笑话，有个家伙去看精神病医生，他说：「大夫，我兄弟疯了，他以为他自己是一只鸡。」然后医生说：「那你怎么不把他带来？」那家伙说：「我是想带他来着， 可是我需要鸡蛋啊。」你看，我想这就是现在我对男女之间关系的感觉。它是完全非理性的、疯狂的、甚至荒谬的，但是我们还一直要经历这一切，因为我们大多数人都需要鸡蛋。</em></p><h2 id="说明"><a class="markdownIt-Anchor" href="#说明"></a> 说明</h2><p>文中涉及到影片及书籍采用豆瓣译名</p><p>台词翻译和部分注释引用自 <a href="http://subhd.com/a/336202" target="_blank" rel="noopener">http://subhd.com/a/336202</a></p><p>由于网络问题，我把原博文中的图片缓存了一份。</p><blockquote><p>这篇影评对文本（特别是片中的三个笑话），影片叙事手段的解读挺有启发性的。推荐！</p></blockquote><p>[update-2020-02-12]</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 翻译 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 看片所想 </tag>
            
            <tag> 翻译 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows 启动 Idea 报错 if you already hava a 64-bit JDK……以及 failed to create jvm……</title>
      <link href="/2019/08/23/idea-jvm/"/>
      <url>/2019/08/23/idea-jvm/</url>
      
        <content type="html"><![CDATA[<h2 id="报错"><a class="markdownIt-Anchor" href="#报错"></a> 报错</h2><p><img data-src="https://img-blog.csdnimg.cn/20190823103030974.png" alt="在这里插入图片描述"></p><h2 id="解决"><a class="markdownIt-Anchor" href="#解决"></a> 解决</h2><p>看到这个报错，第一时间搜索 jdk 的解决方案，然后重新配置了下环境变量。</p><p>无效。</p><p>回头，注意到下面的 JVM 错误。</p><p>突然想起昨天用 Idea 时设置过 JVM 的参数，然后搜索了下。</p><p>遇到网友们的一些情况。</p><h3 id="一-破解报错"><a class="markdownIt-Anchor" href="#一-破解报错"></a> 一、破解报错</h3><p>可能是破解时修改 <code>idea[64].exe.vmoptions</code> 文件，导致错误。</p><p>一般有两种情况：参数写错，或者用记事本编辑保存时，文本编码格式出错。</p><blockquote><p>Idea 启动时会加载这里的参数。那款破解插件的加载方式就是在这里配置的。</p></blockquote><p>解决方式：确保正确填写参数，保存时不要变动文本编码格式。</p><p><strong>PS：该破解插件的作者已经不建议用这种方式了（大概就是因为使用的人经常出这样的问题）……详情搜索引擎了解吧。</strong></p><h3 id="二-用户配置文件出错了"><a class="markdownIt-Anchor" href="#二-用户配置文件出错了"></a> 二、用户配置文件出错了</h3><p>我自己的问题应该是昨天点击 Help -&gt; Edit Custom VM Options，然后添加参数时出了某种问题。</p><blockquote><p>具体是啥我忘了，解决完了才来写这个的……</p></blockquote><p>解决方式 ：一刀切，删除 <code>C:\Users\用户名\.IntelliJIdea2019.2\config</code> 下的 <code>vmoption</code> 文件。</p><p><strong>PS</strong>：<strong>如果你有能力，完全可以手动排查是哪行参数导致了问题，或者也可以备份再删除。但对我来说，这个配置没啥重要的东西，所以就直接删了。</strong></p><p>注意：是删除 <strong>用户目录</strong> 而不是 Idea 安装目录下的 <code>vmoption</code> 文件！！！</p><blockquote><p>用户目录下的 <code>vmoption</code> 文件和 Idea 安装目录下的 <code>vmoption</code> 文件，它们的功能是一样的。不过用户目录的 <code>config</code> 文件夹下保存的是「用户配置」，Idea 安装目录的 <code>config</code> 下保存的是「默认配置」。</p><p>Idea 启动时会优先考虑「用户配置」，找不到「用户配置」就会去加载「默认配置」。</p><p>同理，如果你把其它的配置玩坏了，也可以删除这个「用户配置」，Idea 重新启动时就会去加载「默认配置」。</p></blockquote><p>PS：<strong>如果删了「用户配置」还出错，那就回到 <a href="#%E4%B8%80%E3%80%81%E7%A0%B4%E8%A7%A3%E6%8A%A5%E9%94%99">一、破解报错</a> 的情况了。请检查「默认配置」的编码格式以及参数是否正确配置。</strong></p><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><p>主要就是「用户配置」与「默认配置」的区别！知道了这个，按需操作就行了。</p><p>我上面写了「一刀切，直接删除『用户配置』」，是因为我的配置里没有啥重要的东西，删了也无所谓。</p><p><strong>如果你的配置比较重要</strong>，只要理解了「用户配置」与「默认配置」的区别，<strong>依次检查它们并改正</strong>就行了。</p><p>虽然问题的表现效果一样，但导致问题的原因却各有不同，不过问题的本质始终是一致的。多多注意啊！</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置与操作 </tag>
            
            <tag> Idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一片荒芜</title>
      <link href="/2019/08/16/gluckli/"/>
      <url>/2019/08/16/gluckli/</url>
      
        <content type="html"><![CDATA[<p>一下楼就开始落雨，我需要在雨落得更大之前赶往 10 分钟自行车车程外的地铁站，更甚，在乌云移向北方 20 公里的终点站前抢先走出站台，然后趁着雨滴打下来之前赶回宿舍。</p><p>这毫无疑问是场与雨点的竞速。</p><p>我突然感觉自己似乎理解了王小波的一个比喻，「眼前这世界真是一个受精场所。」我想，这世界可能更像是一根巨大的输精管，在上帝的快感里，人生不过是没有目的地的逃亡。从这样的世界观推论，雨滴更像是我们的兄弟姐妹，为什么要躲着他们呢？</p><p>不行啊，人，哪怕是最原始的形态，也会不停地给自己找对手。我们最擅长地就是把自己和身边的人作比较，把朋友当对手，在交往中斟酌。这么说起来，即便是我这样的家伙，也曾在一个男人的身体里与数亿同类竞争，还成了第一名，真是不可思议。连我自己也不禁怀疑，凭什么？</p><p>可能比起竞赛，生命更大程度上偏向于一种偶然性。</p><p>啊，多么老套的论调。对于世界的诠释，难道真的还能产生什么新鲜的观点吗？只有这个岁数的家伙会不厌其烦地重复这样浅薄的胡言乱语然后向全世界炫耀，自以为发现了什么了不起的真理吧。</p><p>人行道摆满了自行车，非机动车道无数逆行人。在潮流中，总感觉自己像是卡在城市这台机器里的沙粒，被齿轮摩擦，却还没被碾碎。虽然比起它的体型，我显得有点微不足道，但我仍把自己当作和它旗鼓相当的对手。在某种程度上，我们互相看不起对方。</p><p>我是以梦为马的堂吉诃德，正奔向现实这架风车。</p><p>第一次来这里，出站台时听到广播在放以这座城市作为歌名的歌曲。当时产生了一种很微妙的感觉。这是谁的城市呢？是本地人？还是慕名的游客？但总之，我不敢把自己代入其中。这座城市总归是不属于卒卒汗流的过客。三过而不入，连家也会变得陌生。</p><p>但这里终究还是有许多的事情发生，还有不少爱好以别人的不幸做下酒菜的人。不管怎么说，人总比事重要。事可以再做，人却不能再活。我听说有人发了疯，有人暑假骑行去了趟布达拉宫。他们的共同点在于最终都成了诗人。前者在社交平台发了许多对这个世界的深刻洞见，我只有一再提醒自己你也会被送进精神病院的才能忍住转发点赞的冲动。后者被净化后连文字也变得凉快起来，我在烈日下费劲地辨认手机屏幕上的文字，深深叹服。</p><p>我怎么能不经同意就把别人随意写进自己的文字呢。我该向他们道歉才对。他们知不知道自己不经意的行动给一个不算熟悉的人带来多大震撼？我通过解读别人的行为来构建自己的世界观，这算什么？我该被狠狠地挨一顿毒打。</p><p>你笑，全世界都陪你笑，你哭，只有你一个人哭。每个人都应该学会在解读日常中娱乐自己。而解读，通常意味着门槛。倘若你承认了这个门槛，就等于把自己置于别人的评判体系下。</p><p>上周凑热闹看了《寄生虫》，结尾有段暴力戏看得我很压抑。不知为何，我突然悲观地感到《进击的巨人》这部漫画可能得不到一个很完美的结局。</p><p>创作者指出了某种对立，这种对立可能暗喻了这个世界的某种矛盾。但是解决方式呢？</p><p>这似乎是个无解的问题。</p><p>所以《火影忍者》最后也成了所谓的嘴炮作品，通过讲道理来解决冲突。（可能连作者自己都没说服）</p><p>《寄生虫》对于矛盾的解决方式是安排一场暴力戏，不管怎么说，这虽然激荡了情绪，也能引发思考，但是对于问题的解决终究是差了点意思。</p><p>《进击的巨人》呢？它也许可以通过安排剧情的反转带来一些惊喜，但对于世界的诠释，难道真的还能产生什么新鲜的东西吗？</p><p>难道真的有什么完美的答案吗？</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>译 - Write Like You Talk - Paul Graham</title>
      <link href="/2019/08/03/T-write-like-you-talk/"/>
      <url>/2019/08/03/T-write-like-you-talk/</url>
      
        <content type="html"><![CDATA[<h2 id="正文"><a class="markdownIt-Anchor" href="#正文"></a> 正文</h2><p>原文：<a href="http://paulgraham.com/talk.html" target="_blank" rel="noopener">Write Like You Talk</a></p><p><em>October 2015</em></p><p><strong>聊天那样写作</strong></p><p>这是一个可以让你的文字吸引更多读者的小技巧——像聊天那样写作.</p><p>大多数人在开始写作时都会遇到这样的问题，他们用与平时说话时完全不同的遣词造句来写作。在英语语境中，没有人聊天时会把「pen」当作动词使用。如果你和别人吹牛时不说「写（write）什么」而是说「笔（pen）什么东西」，就会有种违和感。</p><blockquote><p>pen 在书面语中也有「写」的含义。如：He penned a letter to the local paper.</p></blockquote><p>比如前几天我就读到了一句难以忍受的句子。原文是这样的：</p><p><em><strong>The mercurial Spaniard himself declared: &quot;After Altamira, all is decadence.&quot;</strong></em></p><blockquote><p>这个变幻莫测的西班牙人自己宣称：「<a href="https://zh.wikipedia.org/wiki/%E9%98%BF%E5%B0%94%E5%A1%94%E7%B1%B3%E6%8B%89%E6%B4%9E" target="_blank" rel="noopener">阿尔塔米拉</a> 之后，一切皆是堕落。」</p></blockquote><p>这句话出自 Neil Oliver 的书籍 <em>A History of Ancient Britain</em>。恕我冒昧，其实我并不想拿这本书来举例。毕竟比起许多其它的书来说，它还不算太糟。先不说这个，请尝试想像一下，当你和朋友吹牛时，把毕加索（Picasso） 称之为「The mercurial Spaniard（变幻莫测的西班牙人）」会是怎样一个场景。聊天时，这样的话哪怕只有一句也会让人感到诧异，人们却就是用着类似这样的句子写了一本又一本的书。</p><p>确实，书面语和口语有差异。不过这种差异真的使书面语变得糟糕了吗？</p><p>如果你期待着别人去阅读并理解你写的东西，那么没错，确实如此。书面语更复杂，读起来也就更费劲。同时，书面语也更正式、陌生，这会让读者难以集中注意力。不过这些问题都还好，也许最糟糕的是：复杂花哨的句子会让你——写作者，误以为自己表达了很多东西。</p><p>并不是复杂的句子才能阐释晦涩的概念。当研究深奥问题的专家们互相讨论各自领域的研究时，氛围其实就如同在聊早上吃了啥一样简单。当然，他们会使用一些生涩的术语，但也仅限于不可避免时。在我的经验里，一个话题越难，专家们谈论起来就越不那么讲究。我认为一部分原因是源于他们的谨慎，另一部分原因则是，一个领域越复杂，能用语言表达的东西就越少。</p><p>某种程度上，通俗的表达就如同思想的小钢炮。</p><p>当然，我并不是说使用口语总能达到非常好的效果。对于诗歌，文字之于它就如音符之于音乐，你自然可以用上许多吹牛时不会使用的言辞。至于散文，也有一些作者能用华丽的文字写出及其精彩的文章。另外还有这样的情况：有时表达者并不想让读者轻易搞懂他们的真实意图——例如公司发布的一些负面信息的声明。又或者，免不了要虚伪一下时，人嘛。不过除此之外，对几乎所有人来说，口语才是更好的写作方式。</p><p>这么说下来，似乎用口语来写作对于大多数人来说有点困难。这里有个不错的方案：先按通常的方式写下初稿，然后逐句细读，一边读一边问自己，「我是这样讲话的吗？」如果你对某个句子给出了否定的答案，那么就想像一下聊天时你会怎么来表达这句话里的意思，然后用新的表达替换掉之前的句子。过一段时间后，这种替换操作就会像一个严谨的机器一样，在你写文章时一丝不苟地工作。每当你敲击键盘，正要写下一些过于书面的句子，这个机器就会「叮当」一声在你的脑海里发出警告。</p><p>发布一篇新文章前，我会大声朗读它，然后修改其中所有聊天时不会使用的表达，甚至包括那些读出来发音尴尬的部分。我也不确定这样是不是过头了，但至少反正也不费什么劲。</p><p>不过这种方式也并不总是够用。我之前没有用口语写作时，句与句之间总是不连贯。对这种情况，有个更激进的解决方案。那就是写完初稿后，试着向一个朋友解释你刚刚写下的东西，然后把草稿换成你刚刚对朋友说的话。</p><p>经常有人告诉我说读你的文章就像是在和你聊天。这展现了人们很少用口语写作这一值得讨论的事实，否则每个人所写的东西读起来都应该像是在和作者聊天。</p><p>如果你能想办法用口语去写作，那你就超过了 95% 的写作者了！这做起来也非常简单——确保你写下的每一句话都像是在和读者聊天。</p><p><strong>Thanks</strong> to Patrick Collison and Jessica Livingston for reading drafts of this.</p><h2 id="其它"><a class="markdownIt-Anchor" href="#其它"></a> 其它</h2><p>[update-2020-02-10]</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 翻译 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 翻译 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>地铁上的你</title>
      <link href="/2019/08/02/20190802/"/>
      <url>/2019/08/02/20190802/</url>
      
        <content type="html"><![CDATA[<p>「人的视线总是会被信息量大的东西吸引。平时我都盯着手机，不方便时我就看交通路线图和注意事项。比如前天，我站着研究了半个多小时地铁的部署，明明是从北到南的一整条，居然从中间断开分为三号线和七号线，啥玩意儿啊。当然也有今晚这样的时候，脚掌最好贴着地板移动，不然抬起来就连脚尖也放不下去了。我开始怀念在学校旁边的站台，大概都是青涩所以还保持着点浪费公共资源的矜持，不至于把这铁皮当作沙丁鱼罐头。这种情况下能干什么呢，看窗外吗。有时候会有亮着的屏幕从外边闪过，夸张的人像保持着端庄的仪态。之后便是长时间的黑，我们就都从另一旁的镜像世界浮出来了。人的视线不是总会被信息量大的东西吸引吗，我一时大意，视线便收不住手飞向那边的你。那后脑勺有注意到我吗？你在想些什么呢？这样的喧嚣里怎么也能轻巧地翻动书页？为什么看了一眼指示牌？会在哪一站下？揣摩着这些东西，我便躁动着弄丢了今晚的闲暇。终于，三站后，你起身了！我一心急，紧随你踏了半步出去，想要占据这个空位。没想到这个时候一位大姐远远地喊了句，诶！这里有座位。这句话仿佛是定身的咒语，我被控制着收回了自己的臀部与抬起来的脚，看着她走过来，坐下去了！然后我就单脚站立直到终点站。」</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>梦开始的地方</title>
      <link href="/2019/05/26/yo/"/>
      <url>/2019/05/26/yo/</url>
      
        <content type="html"><![CDATA[<p>在这趴着睡了一会，醒来颌关节发痛。干，太惨了。</p><p>在微博上放纵，偶尔装模作样似乎也能显得有趣，被别人搭讪了几句便觉得自己搞不好真有这样的天赋，能靠着人格魅力交些朋友。比方说觉得该讲些自己的事情了，而对方也很遵守社交规则做出了很感兴趣的样子，但是在张嘴的一刹那突然发现自己似乎丧失了倾诉的能力。</p><p>这就很奇怪。也许是不知道啥时候起了「不就这么回事嘛」的念头，于是所有的，那些自以为的孤单无助悲伤固执苦闷，一下子就成了常人都会有的情绪起伏。</p><p>问题在于，记忆总是模糊的。在大脑里，那些负责存储记忆的细胞突触不断地接触，曾发生过的一切被高明地剪辑。记忆总是被美化。虽然我在自己的记忆里从来不是什么讨喜的角色——懦弱，势利，沙雕。可这可能也是记忆的保护机制在起作用呢？它让我误以为曾经发生的一切都是不可控的，如果有遗憾，那也是没有办法的事。</p><p>有时候我也会在和别人吹牛时展现自己的牛皮，我吹嘘自己中学时曾被班上其他所有的男生围着打过。这种在全世界任何一所学校都经常发生的事，因为带了一种似乎夸张的描述，属于青春的痛感便不那么强烈了。当然这并非事实，我其实只是想尝试着在那个男孩们憧憬「一个打十个」的年纪里为自己开扩出「三十个打我一个」这样的传奇。</p><p>神奇的是我居然在很长的一段时间都以为这是真实的。我究竟挨没挨打？他妈的，有时候我还真期望有拳头落在我的身上，把我打个鼻青脸肿。然后我就做出悲剧英雄的模样，在十字架上燃烧，我在临死前一定要昂着头，我懒得向人群中张望。苟延残喘的人啊，嘲笑我吧。</p><p>只有我暗恋的女孩啊，不要悲伤，你的爱人是为了理想献身的……等等，女孩呢？他妈的，这帮狗比把女生全都赶到教室外面去了，还美其名曰这是男人之间的事。</p><p>理都被你们占了是吧？</p><p>算了算了，那时候我还太小，没学会长情。</p><p>不过，事实究竟如何呢？</p><p>无所谓了。</p><p>那个时候我确实还太小，对世界的认识不足导致我对自己本身认识过于钻牛角尖。我乐观地觉得换了新的环境我他妈就能重新做人。我从来没觉得自己与周围的差异是自己的原因。我知道为什么那些本来还能一起弹弹珠的小屁孩为什么突然就不和我玩了，有些隔壁班的崽子甚至靠着课间操的十多分钟来踢我一脚表明自己的阵营。我知道这是为什么，但我他妈就是不说。要问为什么，可能是因为我牛皮吧。</p><p>我知道我们其实都是一样的，都觉得自己是活在学校这个围栅里的牲口。那个时候我是自认为的文学青年，这些家伙只对偶像剧和黄片感兴趣，我不一样，我喜欢读书。而且我只读「故事会」、「鬼故事」这种高级读物。他们这些小屁孩只会欣赏「故事会」后面的小广告图片，我不一样啊，我读字儿。在我有限的青春狗血文学阅读历程中，早已了解到一件事：这就是青春啊！</p><p>不管我愿不愿意，这就是青春。既然青春里总有一个被忽视的家伙，为什么这个家伙就不能是我呢。</p><p>挑选一个人去针对，这就是小屁孩们在学校里自己悟出来的生存之道。当我现在以一种自作悲悯的眼光去看以前，唯一能让我感到宽慰的是，他们并不是针对你，这种操作并不是针对个人的。他们只是为了让自己的团体更加和谐而去找些事做而已。这些狗比仅仅是因为你长得帅，就忍不住要揍你。而由于我的容貌过于出众，我的脸便成了大家增强团队凝聚力的训练基地。</p><p>我没得法。</p><p>不得不说，人就是聪明。当一个人认识到自己个人的力量是有限的的时候，就会思考外界的力量。</p><p>比如我很长一段时间都曾在心里埋藏着强烈的恶意。我把积攒了一周的零花钱——虽然只有一块，扔进了在我回家的必经之路的那座山的山腰处的庙里的功德箱。</p><p>这座庙太破了，里面的神像被坏家伙们偷得只剩一两个还站在里面。</p><p>真的是，这坏家伙怎么到处都是。</p><p>但是我也来不及担心神像少了威力是不是就会减弱，我仍以最狠毒的诅咒期盼着这些家伙要是能够因为犯了什么事被开除就好了，这样我就碰不到它了。不过很久以后我才发现，寄希望于义务教育能开除学生，也就比买彩票的概率大点。</p><p>这他妈什么事儿啊，我成了一个被仇恨蒙蔽双眼的坏孩子了。</p><p>于是我只能期盼着狗日的赶快什么时候能离开这。我日，本来应该是最该享受的年纪，全他妈毁了，让我活在仇恨里还不够，我还要活在逃避里。</p><p>可是真的有什么地方会更好吗？</p><p>我有个非常优秀的启蒙老师，小学一年级时她就灌输给小朋友们在大城市不能乱扔垃圾，而且要把垃圾分类的相关知识。</p><p>后来我去了隔壁县城读高中，这是我第一次长时间进入一个城市——我一度小心翼翼地把垃圾扔进不同的回收箱。但是过了一阵子我突然发现，尼玛，根本没人分类，这他妈「可回收」、「不可回收」俩标签根本就是个摆设。有些家伙更坏，能把垃圾扔进垃圾桶就已经不错了！</p><p>我天真地认为这是因为这个县城还不够大。</p><p>后来来到省城读大学，我继续观察。尼玛，还是根本没多少人在乎扔垃圾时扔的是「可回收」还是「不可回收」。</p><p>由于我经常观察垃圾桶，有一次我他妈还发现一个垃圾桶虽然左右各一个口，分别写着「可回收」、「不可回收」，但是他们下面居然是连通的。尼玛，连通的！也就是说不管你投「可回收」还是投「不可回收」，垃圾都是堆在一起的！</p><p>卧槽。</p><p>我以为大城市里的不良少年们跟村里的不一样，他们读加缪，读塞林格。就像小说里描绘的一样。</p><p>结果全他妈假的，过时了。</p><p>他们扔垃圾还是不会分类。只是吐痰的时候不能像在村里一样吐在田里。</p><p>如果我再年轻点，我就可以靠着各种隐喻抱怨一切。可随着时间流逝，我已经从一个小屁孩长成了大孩子。</p><p>干！</p><p>回想这一阵子，看动画，读闲书，在回寝的路上发出应答谁的声音假装自己有朋友。从不考虑明天，尝试着和一些酒精过敏的家伙建立理想中酒肉朋友般牢固的情谊。聊童年和校园暴力，戏谑一切。用暧昧的言语和无聊的话题，互相探测彼此那一目了然的内心。旁若无人地在路上咆哮，争着发表自己对这个世界高深的见解。路过年轻异性时，不自觉地加强声带的震动。以一种自以为滑稽的表演方式说话，模仿老师，领导，传递指示的室长，以及一切说着正经话题的人。</p><p>真是大人模样了。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单谈谈秒杀的减库存</title>
      <link href="/2019/05/24/kill-me/"/>
      <url>/2019/05/24/kill-me/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>作为之前在 <a href="/2019/01/14/seckill/#%E4%BC%98%E5%8C%96">秒杀系统简单实现</a> 一文的补充……</p><p>本文就简，不考虑各种高级优化……仅仅立足减库存这个操作谈谈我的理解……</p><h2 id="0x01-秒杀操作"><a class="markdownIt-Anchor" href="#0x01-秒杀操作"></a> 0x01 秒杀操作</h2><p>在讨论各种优化之前，先捋一下这个操作的逻辑。</p><p>一开始，用户们从前端点击秒杀按钮，操作传入服务端处理，在 Java Web 中，最后是由一个 Servlet 来处理的。</p><p>Servlet 默认是 单例多线程。（当然也可以设置为多例）</p><p>需要注意的是，在 Java Web 开发的各种框架中，比如 Spring，不管是 Controller 层的实例还是 Service 层的实例，本质都是 Servlet。</p><p>所以说这里最后还是由 Servlet 来处理。</p><blockquote><p>单例多线程是什么意思呢？这里不多说，讲讲它的效果。</p></blockquote><p>比如在进行秒杀操作时，前端 <s>可能</s> 会有很多个用户同时进行秒杀，每一个秒杀操作都是一个 HTTP 请求，这数个 HTTP 请求（秒杀操作）到了服务端，全部由一个 Servlet 实例来处理——这就是单例。而每一个 HTTP 请求都对应一个线程——这就是多线程。</p><p>不过注意，这里的多线程并非无限制创建的。</p><p>首先要知道，Servlet 是运行在 Servlet 容器里的。</p><blockquote><p>参考 Tomcat</p></blockquote><p>实际上，Servlet 容器会通过调度线程（Dispatchaer Thread） 管理一个线程池，通过调度线程池中等待执行的线程（Worker Thread）给请求者实现多线程。</p><p>也就是说，Servlet 的多线程还是由线程池管理的，只不过一般来说，用户不可见。（因为这个线程池由 Servlet 容器管理）</p><h2 id="0x02-事务控制"><a class="markdownIt-Anchor" href="#0x02-事务控制"></a> 0x02 事务控制</h2><p>我们回到秒杀。秒杀这个操作至少包含两步：</p><ol><li>减库存</li><li>插入购买信息到订单表</li></ol><p>一般这两步会写在 Service 层。我们看下伪代码 :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> SkillService&#123;</span><br><span class="line">  Kill()&#123;</span><br><span class="line">    减库存;</span><br><span class="line">    插入信息到订单表</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意，这里有两个步骤，而上面提到 Servlet 的执行是多线程的，那么这里就可能会出现数据不一致问题。</p><blockquote><p>为什么?</p><p>因为这里多线程并发执行秒杀操作时，不能保证操作的 原子性。</p><p>比如?</p></blockquote><p>为了保证数据一致（原子性），我们可以使用事务。</p><blockquote><p>事务是啥?</p></blockquote><p>比如 Spring 中，我们可以通过使用注解为方法开启事务支持。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line">Kill()&#123;</span><br><span class="line">  减库存;</span><br><span class="line">  插入信息到订单表;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>事务具有 ACID 四大特性，而其中的 隔离性 是通过锁机制来实现的。</p><p>当进入被事务控制的这个方法时，会对数据进行加锁。</p><blockquote><p>使用了事务，就代表里面的操作是一个整体了。（原子操作）</p><p>进入这个开启了事务支持的方法体，就会获取方法体中用到的数据的锁。</p></blockquote><h2 id="0x03-锁"><a class="markdownIt-Anchor" href="#0x03-锁"></a> 0x03 锁</h2><p>并发的 HTTP 请求（反映到 Servlet 就是多线程），在进行秒杀操作时执行事务，通过竞争数据库的锁来执行秒杀操作，从而保证了数据的安全。</p><blockquote><p>什么是锁</p></blockquote><p>到这一步，不考虑超大的并发量，已经能够保证秒杀安全地执行了。</p><blockquote><p>InnoDB 默认行级锁，也支持表级锁。</p><p>MyISAM 默认 表级索，不支持行级锁 --&gt; 不支持事务</p><p>分布式事务</p><p>……</p></blockquote><p>继续优化。</p><h2 id="0x04-存储过程"><a class="markdownIt-Anchor" href="#0x04-存储过程"></a> 0x04 存储过程</h2><p>注意，上面是在 Service 层开启事务。</p><p>事务里面有两个操作，需要与数据库交互两次。</p><p>我们可以把两个操作通过一条 SQL 来执行。</p><p>怎么做呢？用存储过程。</p><blockquote><p>什么是存储过程?</p><p>怎么使用?</p></blockquote><p>打个比方，这里有两袋苹果，之前我拿上一袋回家，再过来拿另一袋回家。现在我则拿着两袋就往家里跑。</p><blockquote><p>具体怎么回事我还不是很清楚</p></blockquote><p>这里通过存储过程优化了事务行级锁持有的时间。本来在 Service 执行的操作，我们放到 SQL 层来做，在更底层执行，效率会高一点。</p><blockquote><p>数据库里，行级锁是什么？</p><p>更底层效率更高一点，为什么?</p><p>（因为封装到更抽象的层次，会加上许多为了方便用户操作但对实际执行效率没影响的行为。）</p></blockquote><p>但是不管是哪里，都并不建议大量使用存储过程。（逻辑确实很简单时，可以一用。）</p><p>阿里巴巴 Java 开发手册 甚至禁止使用 存储过程。</p><blockquote><p>为什么?</p><p>存储过程没有版本控制，版本迭代的时候要更新很麻烦。存储过程如果和外部程序结合起来用，更新的时候很难无感升级，可能需要停服。存储过程不利于将来分库分表。存储过程的功能不一定够强大，业务扩展之后可能会发现无法继续用存储过程实现了。存储过程可能无法和许多中间件、ORM库一起使用。某些特殊的兼容MySQL的实现可能根本就不支持存储过程，那就更不用说了。</p><p>……</p><p><a href="https://www.zhihu.com/question/57545650" target="_blank" rel="noopener">知乎 — 为什么阿里巴巴Java开发手册里要求禁止使用存储过程？</a></p></blockquote><h2 id="0x05-锁竞争"><a class="markdownIt-Anchor" href="#0x05-锁竞争"></a> 0x05 锁竞争</h2><p>我们现在是通过数据库层面的锁来保证秒杀的安全，但是当并发量上来后，大量的线程竞争锁，会导致数据库的吞吐量受到影响。注意，是数据库的吞吐量。也就是说，一个商品的竞争，影响了整个数据库的性能。（影响到其它的商品）</p><blockquote><p>为什么?</p><p>数据库竞争锁会导致 TPS 下降，RT 上升，数据库的吞吐量受影响。</p></blockquote><p>那么如何解决呢？</p><p>可以通过把热点数据隔离出来，使之不影响其他数据。</p><p>但这治标不治本。</p><p>我们从另一个角度思考一下。</p><hr><p>从头梳理。</p><p>大量的并发请求来了，操作时为了避免数据安全问题，我们使用了锁机制。</p><p>锁，是为了保证同一时刻只有一个线程读写数据。</p><p>而锁竞争，现在会导致严重的问题。</p><p>那我们能不能不使用锁，又能保证同一时刻只有一个线程读写数据呢？</p><hr><p>叮咚！如果能通过某种方式把并发的请求转换成串行执行就可以达到了。</p><p>如何转换？可以使用一个队列来对请求排队。</p><h2 id="0x06-排队并发转串行"><a class="markdownIt-Anchor" href="#0x06-排队并发转串行"></a> 0x06 排队——并发转串行</h2><blockquote><p>PS：Redis 就是通过把请求串行执行实现的并发。</p></blockquote><p>同样，可以在数据库层排队，也可以在服务层排队。在数据库层——这个更底层的层面排队，效率肯定更高。</p><blockquote><p>阿里的数据库团队开发了 InnoDB 的补丁程序（patch），可以在数据库层上对单行记录做到并发排队。</p></blockquote><p>另外，应用层只能单机排队，数据库层则可以全局排队。</p><blockquote><p>排队与锁竞争都需要等待，为什么排队效率就要好点?</p></blockquote><hr><p>排队当然要使用队列，回到前面，Servlet 是单例多线程，<strong>多线程环境下应该使用并发包下的队列</strong>。</p><p>比如 :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.concurrent.ConcurrentLinkedQueue</span><br></pre></td></tr></table></figure><p>搜索资料时，许多博客都说「对请求进行排队」。</p><p>一个很容易想到的操作便是使用拦截，在 HTTP 请求进入 Controller 层之前把 HttpRequest 压入队列排队。如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ConcurrentLinkedQueue&lt;HttpRequest&gt; que &#x3D; new ConcurrentLinkedQueue&lt;HttpRequest&gt;();</span><br></pre></td></tr></table></figure><p>不过， <strong>如果把 Http 请求放到队列，就会导致产生大量未释放的 HTTP 长连接。</strong></p><p>这样不太好，实际使用，是把 <strong>秒杀数据</strong> 进行排队。</p><p>在秒杀操作时，我们其实只需要 HttpRequest 提供的相关的秒杀信息，比如 商品ID，用户ID……并不需要持有整个 HTTP 请求。</p><h2 id="0x07-异步消息队列"><a class="markdownIt-Anchor" href="#0x07-异步消息队列"></a> 0x07 异步——消息队列</h2><p>不错，现在排队了，但是现在有个最重要的问题我们还没考虑。</p><p>回头看一下。</p><p>无论怎么写代码，最终的目的是给用户提供良好的体验。</p><p>但是用户在秒杀界面等待着服务端执行完秒杀后返回的秒杀结果，这一个最影响体验的操作还没有得到解决。</p><p>现在的秒杀，就相当于我去我们村里的信用社办理业务，大家都在窗口前排着队，前面的人办完业务才能轮到后面的人。</p><p>但是想象一下大城市里的银行，用户先领取一个排队号，然后坐到一旁玩手机，等到窗口呼叫用户的排队号码时，用户才上前去办理业务……</p><p>这就是 <strong>消息队列</strong> 的概念。</p><p>我们把秒杀的数据放入一个消息队列，然后直接向前端返回信息，告诉用户「我们先帮你排队执行秒杀，待会告诉你结果，你先去干其他的事吧。」</p><p>真棒。用户现在可以去干其他事了。</p><p>过一阵子，用户可以通过主动查询或者被动通知，了解到自己的秒杀结果。</p><blockquote><p>比如可以使用前端轮询</p></blockquote><p>不过这里值得注意的是，消息队列最主要的功能是提供了一个异步执行的操作。</p><p>消息队列的使用将秒杀真正的操作与这个用户的行为解耦了！</p><blockquote><p>为什么要强调主要是为了解耦，下面会提到。</p></blockquote><p>同时，消息队列也能够把秒杀数据进行排队。</p><h2 id="0x08-rabbitmq"><a class="markdownIt-Anchor" href="#0x08-rabbitmq"></a> 0x08 RabbitMQ</h2><p>再重复一下前面提到的，Servlet 是单例多线程，引入消息队列后，多线程把 秒杀数据 放入消息队列就完事了，然后告诉用户我们正在帮你排队。具体的秒杀执行逻辑则由消息队列来做。</p><p>稍微准确点，实际是消息队列提供的 <strong>消费者</strong> 按照队列的顺序，把 队列 里的秒杀数据拿出来，对秒杀数据执行秒杀的逻辑。</p><p>OK！</p><p>下面拿具体的消息队列框架 RabbitMQ 谈谈。</p><p>在 RabbitMQ 中，默认 <strong>单线程串行消费</strong> 。</p><p><strong>也就是单线程，串行来执行队列里的秒杀数据来秒杀。</strong></p><p>这样子在理论上，秒杀操作就无需加入事务控制了。</p><p>因为现在已经是串行，不会产生竞争啦！</p><blockquote><p>这里面当然还有很多细节，比如如果抛出异常、秒杀执行失败，是继续尝试执行呢？还是直接秒杀失败？</p><p>又比如既然引入了消息队列，那当请求来了时就可以直接判断队列中的秒杀数据的个数与库存比较，直接拒绝用户的秒杀操作……</p></blockquote><h2 id="0x09-消息积压"><a class="markdownIt-Anchor" href="#0x09-消息积压"></a> 0x09 消息积压</h2><p>不过引入消息队列，又有可能遇到消息队列的一些问题……</p><p>比如消息过多，造成消息积压。</p><p>一种解决方式就是引入<strong>多线程处理消息</strong>。（当然消息队列自己还有多消费者等等细节）</p><p>可是引入多线程了，那是不是又会有线程安全的问题呢?</p><p>确实如此。</p><hr><p>测试了一下，发现 消费者使用 多线程，的确会有数据不一致问题。</p><p>我用 int 和 AtomicInteger 做了个测试。</p><p>当 RabbitMQ 默认单线程时，int 数据正常计算。</p><p>当多线程时，int 数据计算不正常，但是 AtomicInteger 计算正常。</p><hr><p>所以我在前面提到消息队列只是用于解耦，并不能保证线程安全。（虽然默认 <strong>单线程串行执行</strong> 肯定是线程安全的）</p><p>如果使用多线程，那就又回到并发的问题了……</p><p>使用事务?</p><p>……</p><p>再往后就没继续思考了……</p><p>到此为止。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Projects </tag>
            
            <tag> Web 开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>强风吹拂</title>
      <link href="/2019/04/03/wind/"/>
      <url>/2019/04/03/wind/</url>
      
        <content type="html"><![CDATA[<p>那天老谭喝醉了，一直试图让我相信我其实生活在一场梦里。说实话，我倒是很愿意相信。很久以前我就隐约感觉到有什么不对劲。比如说我已经三年没有感冒过了，三年其实挺长的，长到足以读一次高中。我居然记得自己整整三年没感冒过，这就像一个正常的家庭居然没人吵架一样不可思议。我觉得搞不好其实在什么时候我已经获得了超能力。这个念头在我高超的逻辑推理能力下越来越完整——我甚至在种种可能性下大致计算出了我获得超能力的时间和地点。</p><p>但是当老谭坐在我面前，不停地向我洗脑一些莫名其妙的东西，我也开始给自己的疑惑找到了一些新的可能性。也许，我真的在梦里?</p><p>老谭双眼迷蒙，拿着杯子不断地摇。按照他的要求，杯子里本来应该还装着一定纯度的酒精。「我没醉。」他不断地重复，「喝前摇一摇……」</p><p>为了测试他是真的没醉，我给他倒了杯白开水。老谭抿了一口，精神抖擞起来，眼神也清澈了。「我说我没醉吧，这酒就白开水一样，我怎么会醉呢。」</p><p>「我给你说啊……我给你说。」</p><p>「如果在现实世界，你从楼上跳下去，因为重力的影响，身体会狠狠地砸下去……而你的灵魂会被重力从身体里拉出来。其实你的身体在物理上被摔得稀巴烂之前，你就已经死了——你的灵魂已经离开了你的身体。可是在梦里，你只有灵魂在活动，如果你从楼上跳下，你就会飞起来！」</p><p>「你从一楼跳下去，从十四楼跳下去，每次都有不同的感觉。」</p><p>「我说真的，不信你试试。」</p><p>我把老谭塞进一辆三轮，给师傅打了招呼，自己慢慢往学校走。一路上不少店家都在门外挂了个电视——最近世界杯，时有人群聚集，一边吃小吃一边看比赛。我对此没啥兴趣，只是沉迷于思考老谭说的话，差点撞到几张桌子。不时，电视机里传来欢呼声，电视外的人也放开了嗓子。我被热闹催着匆匆迈步，思来想去，觉得老谭狗日的这番理论还蛮逻辑自治的。难不成……</p><p>我在斑马线处用力跳了一下，然后沉甸甸地落在地上，重力作用导致我的小腿又麻又痛。</p><p>再后来遇见老谭就是去年 12 月份了，他没提做梦的事，我也没想起来问。我们假装是不期而遇，躺在宿舍楼外的草地上晒太阳，闲扯着些有的没的。或许是光合作用，也许仅仅是因为坐在草地上，冬天突然就没那么冷了。</p><p>回想起来，我和老谭的每次相遇都是以对话贯穿始终。但其实我俩都不喜欢说话。我询问老谭，老谭说这叫交流。说话并不是必须的，但交流是。你总得交流，要么和别人，要么和自己。我其实并不理解这两者有什么差异，不过我得出了一个结论，如果你和一个人交换了秘密，那么接下来你就会忍不住把自己曾经历的一切都告诉给它。</p><p>但是我比较牛皮，我忍住了。</p><p>很少有人会干脆地询问对方，「那么我们现在是朋友了吗？」这种话。成年人的世界里总是心照不宣着很多规则，这正是我不擅长对付的。我蹩脚地尝试着在自己的心里把遇到的人分了几个层次，而每当我想要升华和老谭的革命情谊，就会感到害怕。虽然老谭把这叫作交流，可是，你看，我们躺在这吹了这么久的牛皮却没人感到厌倦，这不就是友谊的象征吗?但问题是，我们没有做过确认，这让我感到害怕。我在生活中滚爬了二十年，最擅长的事情就是让人失望。而在我二十年的观察中，深刻理解到「失望」就是破坏一段关系的充分必要条件。</p><p>我突然想起自己似乎曾和几个人躺在这里，我们谈到了小学的班主任，有人提起去年暑假考驾照时还遇见了他。这种感觉让人迷茫，但这一切似乎都历历在目。我们讨论童年时的事，细节被不断填充，记忆就像整整一生一样。</p><p>不对啊，这里怎么会有了解我童年的人呢？</p><p>想太多了。</p><p>那次对话的结尾，老谭一本正经地对我说，「你太依赖自己的大脑了。」这句话似乎有什么隐喻在里面，可是我不喜欢猜测。</p><p>我回复他，「也许吧。」</p><p>再后来，时间线拉回现在。</p><p>现在已经是春天了，在我的记忆里，自从认识老谭，已经度过了两个春天。我们刚认识的时候，大家都是喋喋不休的青年，我们花了大把的时间探索老谭的记忆。老谭说自己以前常写日记，不过现在喜欢写小说。</p><p>其实这没什么不同，不管你写的东西是否真实，在别人眼里都只不过是故事。</p><p>有时候老谭会把写的小说拿给我看，然后向我讲一些写故事的技巧。但是很显然，我没有认真学习。老谭说一个观点不论多么地扯淡，只要放在故事里就能给人一种合理的感觉——至少在作者营造的这个环境下。所以老谭不喜欢看小说作家的论述性文字。</p><p>「那会破坏小说营造的美感。」这是他的原话。</p><p>「后者往往会自揭费心在小说里藏起来的各种暗喻。有的作家的小说读起来，思维和道德的碰撞令人愉快又震撼……但是一看他其他文章，直言『你应该如何如何』，便觉得迂腐，扭曲……」</p><p>老谭说不管你信不信，很多故事的发展其实都建立在临时起兴。</p><p>可是靠临时起兴推动的东西那还能算是故事吗？不算吧。你大可以说它是别的什么，可它不能称为故事。</p><p>我心里这样想着，也就这样说了。</p><p>老谭回应，你个狗日的歪理多，你不能光看故事，你得用心去感受你知道吗。</p><p>可是老谭已经很久没写小说了。虽然我多次吐槽他的那些狗屁小说根本称不上小说，他也总是玩世不恭地回答「我已经过了堆砌形容词的年纪了」之类的鬼话。</p><p>说起来，我也已经很久没有见到老谭了。</p><p>直到这个初春，我才再次遇见他。</p><p>其实我知道，只要遇见老谭，我肯定就是在做梦了。</p><p>记忆里，老谭说过自己不喜欢春天。他说春天有种腐朽的味道。</p><p>我们在楼顶靠着栏杆，栏杆的的交界处有隐约可见的锈斑。一栋建筑，看起来总是从栏杆开始锈蚀。老谭摇了摇——还好，挺稳的。我连忙退后，「你想死别带上我。」</p><p>老谭笑了笑，「可是，这是在梦里呀。」</p><p>其实，一栋建筑不是从细微处开始锈蚀的，大多数的建筑物的倒塌都毫无预兆。似乎春天就足够腐朽一切。</p><p>比如现在。</p><p>我点头，算是承认了老谭的话。于是，大楼开始毫无预兆地塌陷。老谭问我，「准备好了吗?」然后翻过栏杆，一跃而下。</p><p>灰尘开始蔓延，我也随着他跳了下去。</p><p>当你的身体随着重力与空气摩擦，那感觉有如强风吹拂。</p><p>好惬意啊，无与伦比的惬意。</p><p>当我注意到面前突然冒出自己的尸体，这成了我最后的念头。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue CLI3 使用 Marked 渲染 Markdown 格式数据</title>
      <link href="/2019/04/02/marked/"/>
      <url>/2019/04/02/marked/</url>
      
        <content type="html"><![CDATA[<h2 id="说明"><a class="markdownIt-Anchor" href="#说明"></a> 说明</h2><p>需求是需要把 Markdown 格式的内容解析为 HTML，于是使用 Marked.js 完成该操作。</p><p>仓库：<a href="https://github.com/markedjs/marked" target="_blank" rel="noopener">Marked.js</a> ，引入使用之类的不提。</p><p>默认解析出来的内容不大美观，所以需要再渲染一下。</p><p>下面提供了我尝试过的三种引入方式，主要是渲染样式的使用方式不同。</p><p>按渲染方式分：方式一和方式二都是使用 Marked 自己的功能实现的。而 <strong>方式三只是粗暴地用 CSS 覆盖了默认样式。</strong></p><p>方式一对每个展示的 Vue 文件都需要引入一次样式，而方式二和方式三用了 <code>main.js</code> 引入的方式实现了全局样式。但是方式二只能全局，方式三则用 CSS 覆盖实现了自定义样式。</p><p><strong>其实主要就分为方式一和方式二，分别对应单独配置与全局配置。方式只不过是在方式二全局配置的基础上，使用 CSS 为单独组件覆盖了全局配置。</strong></p><p><strong>一般来说大家都是全局统一渲染样式吧？所以我推荐使用方式二。</strong></p><p>下文以引入渲染样式 <code>github-markdown.css</code> 为例。</p><h2 id="方式一"><a class="markdownIt-Anchor" href="#方式一"></a> 方式一</h2><p>单个 Vue 文件即可实现.</p><h3 id="indexvue"><a class="markdownIt-Anchor" href="#indexvue"></a> index.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; index.vue</span><br><span class="line">&#x2F;&#x2F; 只需要这个文件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;post&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;title&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123;this.article.title&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;markdown-body&quot;&gt;</span><br><span class="line">        &lt;div v-html&#x3D;&quot;compileMarkdown&quot; v-highlight&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;ecmascript-6&quot;&gt;</span><br><span class="line">import Marked from &quot;Marked&quot;;</span><br><span class="line">&#x2F;&#x2F; 这里引入想要的样式</span><br><span class="line">import &quot;..&#x2F;..&#x2F;..&#x2F;node_modules&#x2F;github-markdown-css&#x2F;github-markdown.css&quot;;</span><br><span class="line">let renderMd &#x3D; new Marked.Renderer();</span><br><span class="line">Marked.setOptions(&#123;</span><br><span class="line">  renderer: renderMd,</span><br><span class="line">  gfm: true,</span><br><span class="line">  tables: true,</span><br><span class="line">  breaks: false,</span><br><span class="line">  pedantic: false,</span><br><span class="line">  sanitize: false,</span><br><span class="line">  smartLists: true,</span><br><span class="line">  smartypants: false,</span><br><span class="line">  &#x2F;&#x2F; 引入样式</span><br><span class="line">  highlight: function(code) &#123;</span><br><span class="line">    return require(&quot;highlight.js&quot;).highlightAuto(code).value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      article: &#123;</span><br><span class="line">        content: &quot;加载中……&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    compileMarkdown() &#123;</span><br><span class="line">      return Marked(this.article.content, &#123; sanitize: true &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created: function() &#123;</span><br><span class="line">    this.$ajax(&#123;</span><br><span class="line">      url: &quot;&#x2F;api&#x2F;article&#x2F;id&quot;,</span><br><span class="line">      method: &quot;get&quot;,</span><br><span class="line">      params: &#123;</span><br><span class="line">        id: this.$route.params.id</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">      if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        this.article &#x3D; res.data;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F;报错</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped &gt;</span><br><span class="line">.post .title &#123;</span><br><span class="line">  margin-top: 50px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 24;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><h2 id="方式二"><a class="markdownIt-Anchor" href="#方式二"></a> 方式二</h2><p>方式二、方式三都需要三个文件。</p><p>方式二是全局定义渲染样式，方式三则可以覆盖全局渲染样式。</p><h3 id="indexvue-2"><a class="markdownIt-Anchor" href="#indexvue-2"></a> index.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; index.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;post&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;title&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123;this.article.title&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;markdown-body&quot;&gt;</span><br><span class="line">        &lt;div v-html&#x3D;&quot;compileMarkdown&quot; v-highlight&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;ecmascript-6&quot;&gt;</span><br><span class="line">import Marked from &quot;Marked&quot;;</span><br><span class="line">&#x2F;&#x2F; 不用下面这种引入样式了</span><br><span class="line">&#x2F;&#x2F; import &quot;..&#x2F;..&#x2F;..&#x2F;node_modules&#x2F;github-markdown-css&#x2F;github-markdown.css&quot;;</span><br><span class="line">let renderMd &#x3D; new Marked.Renderer();</span><br><span class="line">Marked.setOptions(&#123;</span><br><span class="line">  renderer: renderMd,</span><br><span class="line">  gfm: true,</span><br><span class="line">  tables: true,</span><br><span class="line">  breaks: false,</span><br><span class="line">  pedantic: false,</span><br><span class="line">  sanitize: false,</span><br><span class="line">  smartLists: true,</span><br><span class="line">  smartypants: false,</span><br><span class="line">  &#x2F;&#x2F; 这个配置实际放到 highlight.js,然后在 main.js 引入</span><br><span class="line">  &#x2F;&#x2F;highlight: function(code) &#123;</span><br><span class="line">  &#x2F;&#x2F;  return require(&quot;highlight.js&quot;).highlightAuto(code).value;</span><br><span class="line">  &#x2F;&#x2F;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      article: &#123;</span><br><span class="line">        content: &quot;加载中……&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    compileMarkdown() &#123;</span><br><span class="line">      return Marked(this.article.content, &#123; sanitize: true &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created: function() &#123;</span><br><span class="line">    this.$ajax(&#123;</span><br><span class="line">      url: &quot;&#x2F;api&#x2F;article&#x2F;id&quot;,</span><br><span class="line">      method: &quot;get&quot;,</span><br><span class="line">      params: &#123;</span><br><span class="line">        id: this.$route.params.id</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">      if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        this.article &#x3D; res.data;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F;报错</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped &gt;</span><br><span class="line">.post .title &#123;</span><br><span class="line">  margin-top: 50px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 24;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><h3 id="highlightjs"><a class="markdownIt-Anchor" href="#highlightjs"></a> highlight.js</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; highlight.js</span><br><span class="line">import Hljs from &#39;highlight.js&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 这里引入css</span><br><span class="line">import &#39;highlight.js&#x2F;styles&#x2F;github.css&#39;</span><br><span class="line"></span><br><span class="line">let HighLight &#x3D; &#123;&#125;;</span><br><span class="line"></span><br><span class="line">HighLight.install &#x3D; function (Vue) &#123;</span><br><span class="line">     Vue.directive(&#39;highlight&#39;, function (el) &#123;</span><br><span class="line">        let blocks &#x3D; el.querySelectorAll(&#39;pre code&#39;);</span><br><span class="line">        blocks.forEach((block) &#x3D;&gt; &#123;</span><br><span class="line">            Hljs.highlightBlock(block)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default HighLight;</span><br></pre></td></tr></table></figure><h3 id="mainjs"><a class="markdownIt-Anchor" href="#mainjs"></a> main.js</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; main.js</span><br><span class="line">……</span><br><span class="line">&#x2F;&#x2F; highlight.js 路径相应更改</span><br><span class="line">import HighLight from &#39;@&#x2F;utils&#x2F;highlight.js&#39;</span><br><span class="line">Vue.use(HighLight);</span><br><span class="line">……</span><br></pre></td></tr></table></figure><h2 id="方式三"><a class="markdownIt-Anchor" href="#方式三"></a> 方式三</h2><p>在 <code>highlight.js</code> 中定义的实际上是全局的 Markdown 解析样式，如果其他地方需要自定义渲染样式，引入 Vue 就行。</p><h3 id="indexvue-3"><a class="markdownIt-Anchor" href="#indexvue-3"></a> index.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; index.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;post&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;title&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123;this.article.title&#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;markdown-body&quot;&gt;</span><br><span class="line">        &lt;div v-html&#x3D;&quot;compileMarkdown&quot; v-highlight&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;ecmascript-6&quot;&gt;</span><br><span class="line">import Marked from &quot;Marked&quot;;</span><br><span class="line">&#x2F;&#x2F; 不用下面这种引入样式了</span><br><span class="line">&#x2F;&#x2F; import &quot;..&#x2F;..&#x2F;..&#x2F;node_modules&#x2F;github-markdown-css&#x2F;github-markdown.css&quot;;</span><br><span class="line">let renderMd &#x3D; new Marked.Renderer();</span><br><span class="line">Marked.setOptions(&#123;</span><br><span class="line">  renderer: renderMd,</span><br><span class="line">  gfm: true,</span><br><span class="line">  tables: true,</span><br><span class="line">  breaks: false,</span><br><span class="line">  pedantic: false,</span><br><span class="line">  sanitize: false,</span><br><span class="line">  smartLists: true,</span><br><span class="line">  smartypants: false,</span><br><span class="line">  &#x2F;&#x2F; 这个配置实际放到 highlight.js,然后在 main.js 引入</span><br><span class="line">  &#x2F;&#x2F;highlight: function(code) &#123;</span><br><span class="line">  &#x2F;&#x2F;  return require(&quot;highlight.js&quot;).highlightAuto(code).value;</span><br><span class="line">  &#x2F;&#x2F;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      article: &#123;</span><br><span class="line">        content: &quot;加载中……&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    compileMarkdown() &#123;</span><br><span class="line">      return Marked(this.article.content, &#123; sanitize: true &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created: function() &#123;</span><br><span class="line">    this.$ajax(&#123;</span><br><span class="line">      url: &quot;&#x2F;api&#x2F;article&#x2F;id&quot;,</span><br><span class="line">      method: &quot;get&quot;,</span><br><span class="line">      params: &#123;</span><br><span class="line">        id: this.$route.params.id</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">      if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        this.article &#x3D; res.data;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F;报错</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped &gt;</span><br><span class="line">  &#x2F;&#x2F; 直接引入样式覆盖。</span><br><span class="line"> @import &quot;..&#x2F;..&#x2F;..&#x2F;node_modules&#x2F;github-markdown-css&#x2F;github-markdown.css&quot;;</span><br><span class="line">.post .title &#123;</span><br><span class="line">  margin-top: 50px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 24;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><h3 id="highlightjs-与-mainjs"><a class="markdownIt-Anchor" href="#highlightjs-与-mainjs"></a> highlight.js 与 main.js</h3><p>同方式二。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 配置与操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot 项目打包为 Docker 镜像</title>
      <link href="/2019/04/02/springboot-docker/"/>
      <url>/2019/04/02/springboot-docker/</url>
      
        <content type="html"><![CDATA[<h2 id="说明"><a class="markdownIt-Anchor" href="#说明"></a> 说明</h2><p>先提一下整个流程。</p><p>Spring Boot 项目构建 jar 包，Docker 再把 jar 包打包为 Docker image。</p><p>流程是这样，再提一下细节。</p><ul><li>jar 包可以在 java 环境直接执行 <code>java -jar appname.jar</code> 启动。而 Docker 的任务就相当于封装 jar 包，java 环境， 以及 <code>java -jar appname.jar</code> 这条指令。</li><li>Docker 打包 jar 包需要一个 Dockerfile 文件，这个文件相当于一个配置，告诉 Docker 应该如何打包，如何启动 jar 包。</li><li>本地生成了 Docker image，想要把这个镜像部署到服务器，需要把 image 导出。这属于 Docker 命令了，这里不提。</li></ul><p>既然知道流程了，怎么实现呢?</p><p>两种方式，第一种很直观，自己构建 jar 包，然后在本地手动打包镜像。</p><p>第二种，则是通过配置（这里使用 Gradle），实现整个打包的流程。</p><h2 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意</h2><p>流程大致可以分为两步，生成 jar 包，生成镜像。每一步都会遇到坑，慢慢来……</p><p>首先确保生成的 jar 包可以通过 <code>java -jar appname.jar</code> 执行。</p><blockquote><p>可能会遇到 找不到主类等错误……</p></blockquote><h2 id="方式一"><a class="markdownIt-Anchor" href="#方式一"></a> 方式一</h2><h3 id="一-构建-jar-包"><a class="markdownIt-Anchor" href="#一-构建-jar-包"></a> 一 构建 jar 包</h3><p>首先构建 jar 包，</p><p>可以 build artifacts。</p><p>建议在根目录下执行 <code>gradle build</code> 或者 <code>gradlew build</code> 。</p><p>先测试一下 jar 包能不能正常运行。</p><p><code>java -jar appname.jar</code></p><p>可能会出现找不到主类之类的问题。</p><h3 id="二-创建镜像"><a class="markdownIt-Anchor" href="#二-创建镜像"></a> 二 创建镜像</h3><p>然后把 jar 包与 Dockerfile 放在同一目录下</p><p>如</p><p>docker/blog.jar</p><p>docker/Dockerfile</p><p>执行</p><blockquote><p>docker build -t [要生成的镜像名] .</p></blockquote><p>注意哈，后面有个点「.」。</p><p>Dockerfile 是打包 docker image 所需的配置文件</p><p>比如</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## Dockerfile</span><br><span class="line">FROM aglover&#x2F;java8-pier</span><br><span class="line">VOLUME [&quot;&#x2F;tmp&quot;]</span><br><span class="line">ADD blog.jar app.jar</span><br><span class="line">## blog.jar 是目录下的 jar 包</span><br><span class="line">## app.jar 是 jar 包存放在 Docker 里的名字</span><br><span class="line">ENTRYPOINT [&quot;java&quot;, &quot;-Djava.security.egd&#x3D;file:&#x2F;dev&#x2F;.&#x2F;urandom&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]</span><br><span class="line">## 这一条就是 Docker 里执行 jar 包，相应的 后面的 app.jar 就是 Docker 内 jar 包名</span><br><span class="line">EXPOSE 8082</span><br><span class="line">## 暴露端口 无所谓吧，Docker 启动容器可以自定义</span><br></pre></td></tr></table></figure><p>这里很明显也能看出 Docker 内部还是用的 <code>java -jar appname.jar</code> 来运行。</p><h3 id="三-运行"><a class="markdownIt-Anchor" href="#三-运行"></a> 三 运行</h3><p>注意，运行需要指明 REPOSITORY TAG，</p><p><code>docker run -p 8082:8082 -t REPOSITORY:TAG</code></p><p>如</p><p><code>docker run -p 8082:8082 -t cn.hqweay/blog-backend:1.0</code></p><blockquote><p>注意啊，不这样会启动失败……这问题搞了好久。</p></blockquote><h3 id="疑问"><a class="markdownIt-Anchor" href="#疑问"></a> 疑问</h3><p>我在操作过程中去除了创建 Spring Boot 项目时自带的 Tomcat 依赖，不去不知道能不能行。</p><h2 id="方式二"><a class="markdownIt-Anchor" href="#方式二"></a> 方式二</h2><h3 id="springboot-gradle-docker-配置"><a class="markdownIt-Anchor" href="#springboot-gradle-docker-配置"></a> springboot + gradle + docker 配置</h3><h3 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h3><p><a href="https://juejin.im/post/5b27b7ac51882574c32c6588" target="_blank" rel="noopener"><a href="https://juejin.im/post/5b27b7ac51882574c32c6588" target="_blank" rel="noopener">https://juejin.im/post/5b27b7ac51882574c32c6588</a></a></p><h3 id="说明-2"><a class="markdownIt-Anchor" href="#说明-2"></a> 说明</h3><p>这里配置可以根据项目信息自动生成 Dockerfile，也可以指定本地 Dockerfile。</p><p>配置的主要目的是解决了手动把 jar 包打包为镜像。</p><h3 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h3><p>见仓库配置文件 <a href="https://github.com/hqweay/blog-backend/blob/master/build.gradle" target="_blank" rel="noopener">https://github.com/hqweay/blog-backend/blob/master/build.gradle</a></p><p>根目录执行</p><p><code>./gradlew clean build dockerBuilder --info</code></p><p>即可打包。</p><p><code>./gradlew build</code> 这条命令是构建 jar 包。</p><p>能看出，整条命令就是先打 jar 包，再执行 dockerBuilder 生成 Dockerfile 文件（或者使用指定的 Dockerfile 文件），再打包为 Docker image。</p><p>当然，本地安装了 Docker，就会使用本地 Docker 来完成打包。</p><p>如果本地没有 Docker ，idea 可能会自动引入吧。我没试过……</p><h3 id="注意-2"><a class="markdownIt-Anchor" href="#注意-2"></a> 注意</h3><p>理解打包的这个流程，配置中的各项就很清晰了……照搬配置会出很多问题的……</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置与操作 </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日记</title>
      <link href="/2018/11/28/diary/"/>
      <url>/2018/11/28/diary/</url>
      
        <content type="html"><![CDATA[<p>「虽然开玩笑说每天要说够一定量的废话，谁说不够谁不开心。其实我并不太适合靠和朋友谈天说地来缓解压力，尤其是一直以来都是靠着自己调整情绪在过活。情绪交换势必会让自己的时间向别人妥协，没得法。即便每个人都在妥协。有可能吧，因为种种原因，比如对别人不信任，死读卡耐基，精神不对等什么的……有的人就放弃了自己吐槽的权利，在一段关系中变成了一个单向垃圾桶。这种人表现得精力充沛的样子，其实维持这种样子就得消耗大量精力。成年以前，在一个封闭的环境，我还可以每天冷脸三点一线，并且享受这种效率带来的快感。可是现在刚刚成年，要忙着为未来做准备吧，要玩耍吧，要谈恋爱吧，还要建立自己的道德体系……」</p><p>「我似乎就是这样的矛盾体。刚来学校时，社团招新，我准备告别中学时的郁郁不得志，于是毫无准备就投身到各个报到点。面试的时候那个学长问我哦，说你觉得你是一个什么样的人？」</p><p>「哪有这样的问题啊！我是怎样的人，不就是你看到的这样一个人吗？可是当时我萌新嘛，于是就仔细斟酌了一下，告诉他说，我是一个挺矛盾的人吧。当时说出这个答案把我自己吓了一跳，就急忙解释，可能我这样说有点奇怪……」</p><p>「没想到那个学长说，这完全不奇怪哦！大家都是这样的。然后吧，当时我就震惊地看着他，脸都红了，尴尬地不得了。同时内心也很高兴，原来大家都是这样，真好啊，我终于不是异类了，我终于来到充满了爱和包容的大人世界了！」</p><p>「哎，我那时真是一个无可救药的傻瓜。这样的言语其实不过是骗新生交部门建设费用的安慰剂而已。当时实在太年少了，一直觉得这些大我们一两岁的年轻人比我们懂得更多一些。其实单纯的年龄增长在人格健全方面根本毫无贡献嘛！」</p><p>「那个时候的我却感动得不行，立马交了十块钱的社团经费。不过那已经不是我了哦，而是一个被情绪驱使的我，情绪这种诡异的东西占据了我的躯体，我才会做出交钱这种不含蓄的事。」</p><p>「然后他拉我进了一个叫做『XX 猫粮销售 XX 地区代理』的 QQ 群。还催促着我改群名片。我愣了一下，说我们不是『保护小动物协会』吗？他说那种事我们有空了也做，不过你难道不想在大学赚点零花钱用吗？我们去年是 XX 地区的销售冠军哦！」</p><p>「我期待中温柔的学姐照顾小兔子的场景就这样在我眼前变成泡沫。」</p><p>「这太让人失望了吧！」</p><p>「我就是这样的人啊。倾向于坦诚的关系，有效率的交流。即便是对那种在心灵鸡汤上被划分为弱关系的人。」</p><p>「这样的代价就是有可能会失望啊。对于他们来说，做人好像就是一场零和游戏，与人建立关系就是为了在这段关系能达到顶峰时抛售，然后获取利益。可是我不想这样啊，如果每个人都能坦诚的话……这当然不可能，不过为什么我都把自己的底牌亮在自己脑门上了，他们还是不愿意对我坦诚呢。甚至还觉得我已经暴露底线了，我完蛋了。」</p><p>「你听说过那个形容吗？『房子好像突然变得不高兴。』我当时情绪就是有这么低落。」</p><p>「像一条狗一样。」她加了一句。她的意思似乎是，她离开了，但是被戏弄的感觉久挥不去。</p><p>我看着她在我的面前进行情绪表演，心里产生了一种令人作呕的快意。我对她的厌恶似乎是与生俱来的。有些时候就是这样，你都不知道自己为什么会对一个人没来由的生厌。她似乎行为得体，其实也说的上是作风优良了，处事都是三好青年的风范，可我就是对她产生不了好感。她的言行在我看来都是做作——特别是言，每当她充满感情地向我喋喋不休地倾诉那些我并不感兴趣的东西，每一帧都让我感到生理上的不适。</p><p>「就是呢。」我笑着回答她。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 故事 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>科普谈起</title>
      <link href="/2018/10/06/October/"/>
      <url>/2018/10/06/October/</url>
      
        <content type="html"><![CDATA[<p>前阵子一时兴起，读了几本简单的科普书籍，特别有意思。三体里质子封锁人类基础科学研究，科学家们惊呼「物理已死」，但是现实中似乎是物理不断发展，宣判哲学的死刑。从物理上看，某些哲学的时空观是有一定道理的（对的）。惊叹怪不得好多天才后来都寄希望于上帝。</p><p>优秀的科普书籍有一点不足之处，它把那个领域的知识讲解的太过透彻明了容易理解，但是又不深入。容易让读者产生原来如此，不过，也不过尔尔嘛的心情。譬如看了一点哲学就觉得活着也就这样了，读了一点政治又认为生存就是谎言，了解到宇宙之大便认命于自己的渺小。</p><p>不过在迷茫中自己瞎几把分析正是乐趣所在。譬如一部电影，你正解读地高兴，导演突然跳出来说我这样是为了表达如此如此……兴致全无啊！</p><p>罗素在《权威与个人》中说「真理总会打败迫害」—— 这只是一个人类代代重复的善意的谎言之一。只不过总有明智的人会发现真理，而他们恰好生活在一个能接受这些真理的时代。</p><p>挺有意思的。人在面向公众发言的时候总是追求客观，所以大部分的言论下都是「人之初，性有善有恶」。我们好像「性本善」的观点传播得更广泛一些，但是有些地方却相反。有「政府的存在就是为了组织大家往尽量善的方向发展」的观点，又或者以另一种方式表达，「民主制度是仅比暴君制度好的一种制度」。</p><p>突然有点明白为核武器的诞生做出过贡献的科学家们为什么又如此讨厌它。伤害了太多的生命，更主要的是武器实在是一个反人类的东西，虽然它在无形之中促进了人类的科学发展，但是也拖延了人类的后腿。它为人类提供了生存保障，但当它转向人类自身时，就只有贪婪与猜疑。这是胡言乱语，扩展开来，监控，安检，不也是如此？</p><p>在脑海里一片空白的时候，非常容易被别人引导情绪，有了一点概念，就会好一些。<strong>比起「脑袋变成别人思想的跑马场」，更可怕的应该是嘴巴变成别人思想的扩音器。</strong></p><p>不过比起广泛地接触，还是建立自己的知识归纳体系效率更高一点。</p><p>建立自己的道德准则与审美标准大概挺重要的。不过义务教育与生存所需，这两者的交集实在太小。很多东西都是言传身教自我摸索，像我这种长期不练习抬头以至于得了颈椎病的人，面对生活，总会惊叹人类活动的复杂与无规则。但是平时观察别人做事，似乎都遵循着某种规则。这时才明白本应在幼时学得的察言观色，遵守规则，全然不会。总结起来，就是思维说服我们，或者我们说服自己的良心，以此确保自己行为的正当性。</p><p>唉。虽然表达欲无限，内容其实没什么突破，不过是一团乱麻换了一件又一件的花衣。充满恶意地揣度，大概都是这样，只不过有的在修辞上丰富一些。其实不是这样，总有人看得更透彻，观点直指核心。话说网络上热衷于吵架的这群人大概是最公正的网民朋友，他们又不针对哪个人，只是发现不和自己心意的观点，就开始狂喷。他们并不在乎别人看不看得到——这也是表达欲的体现嘛，与我现在的行为类似。（蹭热度了。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 观与感 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读所思 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于成长他唯一记得的是</title>
      <link href="/2018/08/08/grow/"/>
      <url>/2018/08/08/grow/</url>
      
        <content type="html"><![CDATA[<p>在网络时代以前，名言警句还大多来源于名著，这些隽语里，「人」这个字似乎出现得要更频繁些。如果把现在的所有名言统计下来，「人生」这个词的出现频率一定远远大于其他词汇短语。这当然是信口开河，我没有做过统计，也不打算深究，只是想当然觉得好像是这么回事。</p><p>人生的终点是时间不确定的唯一项，可路上还有许许多多其他的终点等待着我们去攀登或者路过，倒也不会寂寞。每结束一段路程，心情总是会低落一阵子。如果有一个开心测量仪，平时的开心指数会在 0 到 0.5 之间徘徊，而这段时间的开心指数会突破 -1。</p><p>时间回到一年前，我在差不多的时间开始折腾这个博客，一年不过是转眼间的事，没意外的话，校园生活也进入了倒计时，这种被时间追赶的感觉我还没适应过来，身边的一切事物就开始已不可见的震动发出声波传送至我的耳朵，内容翻译成中文的大意是「抓紧扶牢，时间它要加速了。」</p><p>我在这个博客的第一篇博文提到刚结束一门课程，今年也是如此。说出来可能有点搞笑，我的情绪低落来源于今天结束了课程，明天，终于要迎来暑假。我怀疑自己是不是过于早熟，以至于提前开始怀念自己的校园时光。大概不是这个原因。但我确实在象牙塔感受到安全感，在朝九晚五的日子感受到充实。</p><p>宫崎骏里的台词说就像一趟车，陪伴你的人会不断地下车。我不怎么讲命运这个词，但是人能够相聚到一起，确实是一个很了不起的概率。</p><p>当我下车的时候，总有一种双手无处安放的局促。好像突然从某天开始，就从一个无忧无虑的小孩坐到了宇宙管理委员会会长的座位上，每天都得签署一堆关乎宇宙命运的文件。</p><p>纠结于下车的时机，在终点间奔波。突然意识到所谓的成长，已经不再是装作很喜欢喝啤酒，而是不得不独自做出各种决定，并且承担它带来的任何后果。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开发与部署前后端分离项目（主要解决跨域问题）</title>
      <link href="/2018/07/25/web/"/>
      <url>/2018/07/25/web/</url>
      
        <content type="html"><![CDATA[<h2 id="changelog"><a class="markdownIt-Anchor" href="#changelog"></a> ChangeLog</h2><p>[2020-03-03-update]：项目使用的是 Vue CLI 3（Vue CLI 2 的配置也有提及），现在已经更新到 Vue CLI 4，部分内容可能已过时。</p><p>Spring Boot + Gradle 打包为 Docker 可以查看： <a href="/2019/04/02/springboot-docker/">Spring Boot 项目打包为 Docker 镜像</a></p><p>Tomcat 配置 HTTPS 可以看：<a href="/2018/11/25/Tomcat-SSL">Tomcat 配置 HTTPS 证书</a></p><h2 id="说明"><a class="markdownIt-Anchor" href="#说明"></a> 说明</h2><p>后端采用 Spring Boot 开发，部署在 Tomcat；前端采用 Vue CLI3 开发，部署在 nginx；</p><p>在开发过程中，前端访问后端提供的 API 会遇到跨域的问题，<strong>Vue CLI 里可以直接配置代理解决</strong>。</p><p>但是当项目部署到服务器端，比如把后端放在 Tomcat，前端放在 nginx，又会遇到跨域问题。而此时，开发环境的配置就不起作用了。</p><p>该如何解决部署时的跨域问题呢？</p><p><strong>可以通过配置 nginx 的代理，使前端正常访问后端提供的 api。</strong></p><p>所以问题大致分为三块：Tomcat 部署项目、nginx 部署项目、服务器端配置解决前端访问后端 api 出现的跨域问题。</p><p>当然，项目部署前还需要构建。本文不涉及 Vue CLI 如何 build 项目、但是提到了 Spring Boot 构建包以及部署，包括 Spring Boot 直接打 jar 包执行，Spring Boot + Gradle 如何打 war 包，部署 war 包至 Tomcat，以及通过 Docker 构建部署。</p><p>其它一些细节方面，本文没有提及 Tomcat 的安装、但是提到了 Vue CLI 在开发环境配置代理解决跨域问题。</p><p>还有<strong>腾讯云</strong>的一些问题，遇到的端口、防火墙等问题，项目如何从本地上传到服务器……</p><h2 id="为什么会跨域"><a class="markdownIt-Anchor" href="#为什么会跨域"></a> 为什么会跨域</h2><p>前后端分别开发的时候，前端使用了 Vue CLI，用 Node.js 模拟了一个服务器环境。而后端开发使用 Spring Boot，用的 Tomcat 做服务器。</p><p>这样导致一个问题 —— 前后端不在同一个服务器环境中。所以前端访问后端的 api 就会产生<strong>跨域问题</strong>。</p><p>在开发环境解决跨域问题，Vue CLI 已经提供了解决方案，进行相应配置即可。</p><p>[Vue CLI3 与 Vue CLI 2 在开发环境解决跨域问题](# Vue CLI3 与 Vue CLI 2 在开发环境解决跨域问题)</p><p>而我在部署前后端分离项目时，将后端项目放在 Tomcat，前端项目部署在 nginx……又会遇到跨域问题。而此时，之前开发环境的配置就无效了。</p><p>但也可以在 nginx 配置代理。</p><p><a href="#%E9%85%8D%E7%BD%AE%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98">nginx 配置代理解决跨域问题</a></p><p>所以解决跨域问题的大概原理就是做个代理，假装前端是在自己的服务器环境下访问后端的 API……</p><h2 id="spring-boot-后端项目的部署"><a class="markdownIt-Anchor" href="#spring-boot-后端项目的部署"></a> Spring Boot （后端）项目的部署</h2><p>Spring Boot 自带了 Tomcat 容器，所以想要部署到外部容器，需要做点改动。</p><p>改动见下文：[去 Spring Boot 自带容器](#去 Spring Boot 自带容器)</p><p>不改动就部署的话，访问会报错 404。</p><h3 id="直接-jar-包部署"><a class="markdownIt-Anchor" href="#直接-jar-包部署"></a> 直接 jar 包部署</h3><p>Idea 使用 Spring Boot 默认方式初始化项目时，在 Gradle 中的配置是默认打包为 jar 包。</p><p>也可以把 jar 包放服务器上直接运行，执行 <code>java -jar [project_name].jar</code> 就阔以了。</p><p>不过这样运行的程序，关闭终端，程序就停止了。</p><p>我们可以通过 Docker 来打包部署，也可以打 war 包部署到外部容器（通常是 Tomcat）。</p><h3 id="去-spring-boot-自带容器"><a class="markdownIt-Anchor" href="#去-spring-boot-自带容器"></a> 去 Spring Boot 自带容器</h3><p>在 Gradle 中把默认的 Tomcat 设置为仅仅在生产环境使用。</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">       providedRuntime(<span class="string">'org.springframework.boot:spring-boot-starter-tomcat'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改 Spring Boot 的入口类，实现 SpringBootServletInitializer 接口。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChatroomApplication</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(ChatroomApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实现SpringBootServletInitializer可以让spring-boot项目在web容器中运行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder builder)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> builder.sources(<span class="keyword">this</span>.getClass());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="spring-boot-gradle-打包为-docker"><a class="markdownIt-Anchor" href="#spring-boot-gradle-打包为-docker"></a> Spring Boot + Gradle 打包为 Docker</h3><p>Spring Boot + Gradle 打包为 Docker 可以查看： <a href="/2019/04/02/springboot-docker/">Spring Boot 项目打包为 Docker 镜像</a></p><h3 id="spring-boot-gradle-打-war-包部署到外部容器"><a class="markdownIt-Anchor" href="#spring-boot-gradle-打-war-包部署到外部容器"></a> Spring Boot + Gradle 打 war 包部署到外部容器</h3><p>设置打包为 war，在 Gradle 里配置：</p><p><code>apply plugin: 'war'</code></p><p>再构建包就行啦！</p><p>war 包部署至 Tomcat 见：[Tomcat 部署（后端）项目](#Tomcat 部署（后端）项目)</p><h2 id="tomcat-部署后端项目"><a class="markdownIt-Anchor" href="#tomcat-部署后端项目"></a> Tomcat 部署（后端）项目</h2><p>Tomcat 的运行没什么说的，将项目打包为 war，放在目录 <code>/webapps</code> 下，启动 Tomcat 后，会自动解压 war 包。</p><blockquote><p>Tomcat 的安装不提。</p><p><strong>Spring Boot 项目打 war 包部署到外部容器见文章末。</strong></p></blockquote><p>比如有个包 etob.war ，把它放在 <code>/webapps</code> 下，运行 Tomcat 后，<code>/webapps</code> 下会有一个 war 包解包后的 <code>etob/</code> 文件夹。</p><p>此时如果没有修改配置文件，我们就已经可以通过 <code>公网ip:8080/etob</code> 来访问我们的项目了。</p><blockquote><p>项目默认运行在 8080 端口，要用别的端口可以在 <code>conf/server.xml</code> 里修改。</p></blockquote><p>当然，想要通过 <code>ip:8080</code> 直接访问项目，而不是通过 <code>id:port/project_name</code> 来访问的话，也可以进行配置。</p><h3 id="上传项目"><a class="markdownIt-Anchor" href="#上传项目"></a> 上传项目</h3><p>可以通过 ftp 上传，也可以 ssh 直接上传。</p><p>终端下 ssh 上传本地文件服务器。</p><p>安装 scp。</p><p>执行 <code>scp 本地文件地址 用户名@ip:/服务器存放文件的文件夹</code>。</p><p>如 <code>scp /home/etob.war hqweay@192.xxx.26.21:/src/local/tomcat/webapps</code>。</p><h3 id="可能过时配置"><a class="markdownIt-Anchor" href="#可能过时配置"></a> 【可能过时】配置</h3><h4 id="方式一"><a class="markdownIt-Anchor" href="#方式一"></a> 方式（一）</h4><p>把 war 包放在 <code>/webapp</code> 下，执行 <code>./start.sh</code> 即可。</p><blockquote><p>Tomcat 会自动解压 war 包。不过这样，Tomcat 只能部署一个项目。</p></blockquote><h4 id="方式二"><a class="markdownIt-Anchor" href="#方式二"></a> 方式（二）</h4><p>删除原 <code>webapps/ROOT</code> 目录下的所有文件，修改文件 <code>conf/server.xml</code>，在 Host 节点下增加如下 Context 的内容配置：</p><pre><code>&lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt;…………&lt;Context path=&quot;&quot; docBase=&quot;C:/apache-tomcat-6.0.32/myapps/bc.war&quot;&gt;&lt;/Context&gt;&lt;/Host&gt;</code></pre><p><strong>注意</strong></p><p>[复制于网络，忘记来源了。]</p><ul><li>1）path 的值设置为空。</li><li>2）应用不要放到 Tomcat 的 webapps 目录下（如上述配置是放到自定义的文件夹 myapps 内的），否则访问时路径会有问题。</li><li>3）docBase 指定到绝对路径。</li></ul><p>这样配置后重启 Tomcat，如果 docBase 指向的是 war 文件，则会自动将 war 解压到 webapps/ROOT 目录。</p><p>如果 docBase 指向的是应用已解压好的目录，如 <code>docBase=&quot;C:/apache-tomcat-6.0.32/myapps/bc&quot;</code>，则 Tomcat 不会在 webapps/ROOT 目录下继续生成目录。（这种情况下，这样就可以不用删除 webapps/ROOT 目录，但 webapps/ROOT 目录内的内容是无法访问的），访问时将直接使用docBase指定的目录。</p><h4 id="建议使用方式三"><a class="markdownIt-Anchor" href="#建议使用方式三"></a> 【建议使用】方式（三）</h4><p>与方法二类似，但不是修改全局配置文件 <code>conf/server.xml</code>，而是在 <code>conf/Catalina/localhost</code> 目录下增加新的文件 <code>ROOT.xml</code> （注意大小写），文件内容如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/"</span> <span class="attr">docBase</span>=<span class="string">"/usr/local/src/java/tomcat/apache-tomcat-8.0.48/test"</span> <span class="attr">debug</span>=<span class="string">"0"</span> <span class="attr">privileged</span>=<span class="string">"true"</span> <span class="attr">reloadable</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="nginx-部署前端项目"><a class="markdownIt-Anchor" href="#nginx-部署前端项目"></a> nginx 部署（前端）项目</h2><p>安装与使用不提。</p><h3 id="配置解决跨域问题"><a class="markdownIt-Anchor" href="#配置解决跨域问题"></a> 配置解决跨域问题</h3><p><strong>使用前需要配置防火墙，以开放端口。</strong></p><p>nginx 进行相关配置，需要修改 <code>/nginx/conf/nginx.conf</code> 文件（<strong>版本：nginx-1.15.2</strong>，不同版本配置文件路径不同 ）。</p><p>我这样配置的，先看配置，再解释。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">## （省略其他）</span><br><span class="line">http&#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        location / &#123;</span><br><span class="line">          root /home/hqweay/etob/dist;</span><br><span class="line">          index index.html;</span><br><span class="line">        &#125;</span><br><span class="line">        location /api &#123;</span><br><span class="line">                add_header 'Access-Control-Allow-Origin' '*';</span><br><span class="line">                proxy_pass http://localhost:89/etob/api;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意下面的 <code>location /api</code> 这一项是配置代理的后端接口。</p><h3 id="配置说明"><a class="markdownIt-Anchor" href="#配置说明"></a> 配置说明</h3><h4 id="路径重写"><a class="markdownIt-Anchor" href="#路径重写"></a> 路径重写</h4><p>我的后端项目为 <code>api.war</code> ，项目内的 <code>api</code> 又是 <code>api/getXXX</code> 这样的格式。所以后端项目部署后，访问的项目根目录是 <code>ip:port/api</code>。（当然可以用 ip 直接当根，不过我没配置……）</p><p>而访问 <code>api</code> 则需要用 <code>ip:端口/api/api/xxxx</code> ……</p><p>所以在 nginx 配置中有这么一行:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_pass http:&#x2F;&#x2F;localhost:89&#x2F;api&#x2F;api;</span><br></pre></td></tr></table></figure><p>就是用 <code>/api</code> 替换了 <a href="http://localhost:89/api/api" target="_blank" rel="noopener">http://localhost:89/api/api</a> 。（部署在 tomcat 的后端项目）</p><h4 id="请求头"><a class="markdownIt-Anchor" href="#请求头"></a> 请求头</h4><p>至于上面的 <code>add_header 'Access-Control-Allow-Origin' '*';</code> ，是据说 Vue 项目必须的配置。我按照别人说的加了，没有测试过不加会是什么情况。（也许不影响）</p><h4 id="项目路径"><a class="markdownIt-Anchor" href="#项目路径"></a> 项目路径</h4><p>其他没什么说的了，再解释下下面这个。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F; &#123;</span><br><span class="line">          root &#x2F;home&#x2F;hqweay&#x2F;etob&#x2F;dist;</span><br><span class="line">          index index.html;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>root 后面是前端代码所在的文件夹（随便放在服务器的哪里都可以，因为是绝对路径嘛……）。index 就是根文件（访问时默认打开的文件）。</p><h2 id="vue-cli3-与-vue-cli-2-在开发环境解决跨域问题"><a class="markdownIt-Anchor" href="#vue-cli3-与-vue-cli-2-在开发环境解决跨域问题"></a> Vue CLI3 与 Vue CLI 2 在开发环境解决跨域问题</h2><p>后端环境：<a href="http://localhost:8089" target="_blank" rel="noopener">http://localhost:8089</a></p><p>后端接口：<a href="http://localhost:8089/api/xxxx" target="_blank" rel="noopener">http://localhost:8089/api/xxxx</a></p><p>前端环境：<a href="http://localhost:80" target="_blank" rel="noopener">http://localhost:80</a></p><p>在 <strong>vue.config.js</strong> 中配置：</p><p>PS：Vue CLI 2 是修改 <code>config/index.js</code> 的配置项 dev（开发环境）中的 ProxyTable（代理）。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">proxyTable: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;  <span class="comment">//使用"/api"来代替"http://localhost:8089" </span></span><br><span class="line">        target: <span class="string">'http://localhost:8089'</span>, <span class="comment">//源地址 </span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>, <span class="comment">//改变源 </span></span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">'/api'</span></span><br><span class="line">           <span class="comment">// 路径重写。因为原来的 api 路径含有 /api</span></span><br><span class="line">          <span class="comment">// 如 http://localhost:8089/api/chatRoom/addMessage</span></span><br><span class="line">           <span class="comment">// 若不重写，因为使用了 "/api" 来代替 "http://localhost:8089"</span></span><br><span class="line">          <span class="comment">// 前端使用的 api 就类似：/api/api/chatRoom/addMEssage</span></span><br><span class="line">          <span class="comment">// 重写后，路径就类似这样：/api/chatRoom/addMEssage</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置后，前端就可以直接用 <code>api/xxxxx</code> 作为接口访问。</p><p><strong>但是，这样只是解决了开发环境的问题。</strong></p><p><strong>前端项目部署到服务器环境（线上），开发环境的配置就失效了嘛。</strong></p><p>所以需要在 nginx 上配置一下代理！而配置，就是上面那样啦！</p><blockquote><p><s>阔不阔以把前后端都放在 Tomcat ？</s></p></blockquote><h2 id="过时关于端口的一些沙雕问题"><a class="markdownIt-Anchor" href="#过时关于端口的一些沙雕问题"></a> 【过时】关于端口的一些沙雕问题</h2><h3 id="0x01-腾讯云"><a class="markdownIt-Anchor" href="#0x01-腾讯云"></a> 0x01 腾讯云</h3><p><strong>腾讯云要开启端口，首先需要到官网控制台修改权限组！！</strong>（没注意到这个问题折腾了很久）</p><p>然后设置开启端口就好了。</p><h3 id="0x02-防火墙"><a class="markdownIt-Anchor" href="#0x02-防火墙"></a> 0x02 防火墙</h3><p>处理中遇到一个特别诡异的问题，只有 8080 端口可以在公网访问……</p><p>但是其他端口可以在内网访问，比如设置 nginx 在 89 端口，在服务器内用<code>curl localhost:89</code>，可以收到返回信息。</p><p>扫描公网 ip，发现只开放了 8080、22（ssh）端口。</p><p>因为安全组再三确认已经搞了，怀疑是防火墙问题，但是自认为已经把防火墙关了，还是不行。</p><p>防火墙，安全组……翻来覆去地确认，不知问题在哪。</p><p>最后执行 <code>iptables -F</code> （清空防火墙规则），其他端口就能用了……现在还是不知所以然。</p><blockquote><p>PS: <strong>firewalld</strong> 服务与 <strong>iptables</strong> 服务都不是真正的防火墙，它们都只是用来定义防火墙规则功能的防火墙管理工具。将定义好的规则交由内核中的 <strong>netfilter</strong> 即<strong>网络过滤器</strong>来读取，从而真正实现防火墙功能，所以其实在配置规则的思路上是完全一致的。</p><p>来源： <a href="https://blog.csdn.net/sinat_32079337/article/details/70239713" target="_blank" rel="noopener">Centos 7禁用firewalld安装iptables防火墙</a></p></blockquote><h4 id="猜测原因"><a class="markdownIt-Anchor" href="#猜测原因"></a> 猜测原因</h4><p>我发现自己上装了 <code>firewalld</code> ，<code>iptables</code> 两个服务，猜测是不是这个原因造成了上面的问题，总之先关闭一个。决定关闭 <code>iptables</code> 。</p><p><a href="https://blog.csdn.net/osfipin/article/details/54405445" target="_blank" rel="noopener">怎么关闭和卸载iptables？小心了！！</a></p><p>不要用 <code>remove</code> 命令，用停用。</p><p>停用 <code>chkconfig iptables off</code></p><p>开启 <code>chkconfig iptables on</code></p><p>**我怀疑是百度 「端口操作」 时，网上的文章没有区分 iptables，firewalld 两种不同环境，直接给出命令，然后我就面向搜索引擎编程（copy，paste），把两个服务都搞上了……**然后关闭了这个防火墙那边仍开着，关闭了那个，这边又开启了，辗转反复，所以一直没能成功……</p><h3 id="firewalld-与-iptables"><a class="markdownIt-Anchor" href="#firewalld-与-iptables"></a> firewalld 与 iptables</h3><p>注意区分 firewalld 与 iptables。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置与操作 </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6 月 9 日</title>
      <link href="/2018/06/09/nothing/"/>
      <url>/2018/06/09/nothing/</url>
      
        <content type="html"><![CDATA[<p>前几日正值高考，可惜我的人际范围里已经没有高三党了，满腹祝福无人可倾，只好修改下遣词造句以备将来。</p><p>其实当时还是有不少遗憾的，有时候甚至还会把自己现在的不如意甩锅给从前。不过毕竟是个过来人了，似乎已经领取到了讨论这件全国性的大事件的资格证。而常言道，拥有的东西总是不过尔尔。千言万语也就化为无法免俗的客套。</p><p>六月总体来说是个伤感的月份，虽然比起六月的炎热，情绪的变化有些微不足道。有时候想些莫名其妙的东西，常怀疑身处其间时的感情和之后的回忆是两回事。看着过去在社交软件留下的动态，觉得当时过得似乎挺开心的，但不知为何，这些年回想起来，总是几件不那么愉快的事情占据脑海。以前看到一个说法，青春就是回忆过滤掉愁苦与纠结。可能我太幼稚了，有那么一段时间心智还停留在童年。只有小孩会为不值得的事浪费时间。</p><p>父打电话说旁边的高中因为高考放假了，问我放了没。母上周周末和我对话，埋怨我放假怎么都不往家里打电话。我安慰自己不要把假期当做思念的借口，把与家人联系当做一件很正常很普通的事 —— 我对人与人之间关系的定义大多如此，即真正的感情不需要刻意的维护。但是仪式感还是很重要的。很重要。</p><p>上周在图书馆外面遇到拍毕业照的青年，和别人谈起来都觉得时间真是越来越快，似乎花了中学时的一学期就过完了两年。谈起两年后，又都是玩笑。就像关于离别的话题本该这样。</p><p>我有时在操场上排泄盐分，回想人类的情绪表演，便展现出惊人的共情天分，表情像是可以随时替他们流泪。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>真相不重要</title>
      <link href="/2018/05/27/truth/"/>
      <url>/2018/05/27/truth/</url>
      
        <content type="html"><![CDATA[<p>直觉大部分的争论在于对话双方对自己结论的深信不疑，不过也有人是对自己结论的来源深信不疑。</p><p>交流是建立在对自己的想法存疑这个前提上的。否则就会陷入「没有一张嘴能说服谁的耳朵」的状态。或者一方以退让作为回应，而另一方还沾沾自喜。</p><p>就我自己经验，很多事情都没有一个是非黑白，所以便觉得真相不重要了。</p><p>情绪被媒体左右，随着新闻不断反转而不断打自己的脸——慢慢觉得自己离真相其实很遥远。毕竟是信息时代了，现在有爆炸的资讯。以前人家通过创造信息来忽悠，现在人家通过筛选信息来忽悠。</p><p>不管是没有确定的事实，还是难以抵达真相。不如把这些东西当做细枝末节抛开，比起是什么，专心于为什么。</p><p>对事件本身没有想法，几千字的论证只记住了最后的结论。面对墙外的广阔天空，不加辨别的全篇接受。都不好。</p><p>不过这都是作为吃瓜群众来讲。作为当事人（特别是新闻里的），那这就是事实，没什么说的。当事人最好还得尽力发声并维护使事实不跑偏——「跑偏的事实」太可怕了。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我理解的预测与推荐</title>
      <link href="/2018/05/27/recommendation/"/>
      <url>/2018/05/27/recommendation/</url>
      
        <content type="html"><![CDATA[<h2 id="推荐"><a class="markdownIt-Anchor" href="#推荐"></a> 推荐</h2><p>怎么做推荐呢？实际开发过程中，我们一边学习推荐相关的知识，一边先按直觉做了几个 demo。</p><p>在第一个版本中，用模糊查询实现。根据用户的相关信息到数据查询。大概是因为逻辑判断太多了，速度非常慢。</p><p>第二个版本，尝试优化查询语句，建立索引。</p><p>第三个版本。因为前面已经通过多元回归计算出了用户的工资区间（虽然很不准确就是了），我们拍脑袋觉得对于一份工作来说，工资是很重要的，于是直接按工资区间到数据库查询…</p><p>前两个版本，模糊查询的推荐结果还不错，至少能一眼看出与用户的信息有关。但是速度实在太慢了。</p><p>第三个版本，因为前面做的预测结果本来就不准，所以效果更差劲…而且这个思路太想当然了。</p><p>但至少现在已经有这样一个功能模块了!!于是接着尝试真正的推荐。</p><h2 id="我理解的推荐"><a class="markdownIt-Anchor" href="#我理解的推荐"></a> 我理解的推荐</h2><p>因为水平不到位，不能从比较宏观的角度解释，下面都只是我在这个项目中的感受。所以，推荐以「推荐 Job」为例…</p><p>我理解的推荐，就是为用户建立一个模型——「我最喜欢的 Job」。系统不断优化这个模型，试图找到用户心中最中意的那个 Job。（这只是个理想化的模型，实际的系统当中可能并不存在）然后从系统中找出与这个模型最匹配的 Job，推荐给用户。</p><p>那么问题来了，计算机怎么判断用户是不是中意某个 Job 呢？</p><p>我们看看协同过滤算法中的基于用户的推荐算法。</p><h3 id="基于用户的推荐算法"><a class="markdownIt-Anchor" href="#基于用户的推荐算法"></a> 基于用户的推荐算法</h3><p>最简单的一种，如下:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">小明 喜欢 A、B、C。</span><br><span class="line">小红 喜欢 A、B、C、D。</span><br></pre></td></tr></table></figure><p>我们发现小红的喜欢和小明的喜欢重叠度很高，小明可能也会喜欢 D，所以把 D 推荐给他。</p><p>但是这种判断的粒度太大了，再细一点可以这样:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">小明 非常喜欢 A</span><br><span class="line">小明 有点喜欢 B</span><br><span class="line"></span><br><span class="line">小红 非常喜欢 B</span><br><span class="line">小红 有点喜欢 A</span><br></pre></td></tr></table></figure><p>在计算机中，可以简化为这样的三元组 <code>&lt; 用户 ID， 物品 ID， 用户偏好 &gt;</code> 表示:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">用户   JobID   偏好值(权重)</span><br><span class="line">小明    001    15</span><br><span class="line">小明    002     0</span><br><span class="line"></span><br><span class="line">小红    001     0</span><br><span class="line">小红    002     15</span><br></pre></td></tr></table></figure><p>那么这个偏好值怎么来呢？</p><p>肯定需要严格的算法…</p><p>我们可以粗略举个例子来理解，比如用户点击一次某个职位，我们假定他是被这个职位所吸引，把他与这个职位的权重相应增加。</p><p>这样在计算机内部就得到用户与 Job 的关系。</p><p>用这样的数值来量化之后，我们就可以通过做一些矩阵运算，根据用户自己的列表和别的用户的列表，把口味相似的用户关注的职位推荐给用户。</p><p>好了！暂且到这一步。</p><p>我们回过头来看，基于用户的推荐算法，需要满足两项。</p><ol><li>用户（使用推荐功能的用户）的喜好</li><li>别的用户的喜好</li></ol><p><strong>这就是冷启动需要解决的问题。</strong></p><p>它不仅需要用户自己有信息，还需要别的用户有信息…</p><p>考虑到我们做的这个小项目根本不可能有那么多用户，测试起来也麻烦，看来这个方式不合适…</p><h3 id="基于内容的推荐算法"><a class="markdownIt-Anchor" href="#基于内容的推荐算法"></a> 基于内容的推荐算法</h3><p>基于用户的推荐算法，是通过比较各个用户的喜好，把别的用户关注的东西推荐给有共同喜好的用户。</p><p>而基于内容的推荐算法，就是把用户的喜好直接与 Job （物品）比较。</p><p>还是看个最简单的:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">小红       喜欢 哲学书籍</span><br><span class="line">《大问题》  是   哲学书籍</span><br></pre></td></tr></table></figure><p>所以把《大问题》推荐给小红。</p><p>同样，我们可以更细粒度一点:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">小红       非常喜欢   哲学书籍</span><br><span class="line">小红       有点喜欢   小说</span><br><span class="line"></span><br><span class="line">《大问题》   是       哲学书籍</span><br><span class="line">《爱的教育》 是       小说</span><br></pre></td></tr></table></figure><p>我们优先推荐《大问题》给小红…</p><p>而在计算机内，可能是这样表示的:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">用户标签权重</span><br><span class="line">小红Java 10</span><br><span class="line">小红Web  9</span><br><span class="line"></span><br><span class="line">Job标签权重</span><br><span class="line">001Java 0</span><br><span class="line">001Web10</span><br><span class="line">002Java10</span><br><span class="line">002Web9</span><br></pre></td></tr></table></figure><p>通过计算向量距离，得出用户和 Job 的相似度，生成推荐。</p><p>基于内容的推荐需要解决两个问题。</p><p>第一个仍然是<strong>冷启动</strong>，用户需要打上标签。我们考虑过根据用户的行为——历史记录，点击记录等来生成用户标签。</p><p><strong>不过都没时间做…</strong>（太真实了）</p><p>其实提到这个场景，我想到的是各种信息流 app，注册时让用户选择一堆感兴趣的话题，相当于打上标签。于是我也模仿这样做了个…</p><p>我们只做到了用户和某个标签产生联系，如标签 <code>Hadoop</code> ， <code>Java</code> …</p><p>存在数据库里 :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">用户 ID标签Id有无 // 标志用户有没有选择某个标签。。。</span><br><span class="line">0010010</span><br><span class="line">0010021</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>第二个问题就是提取出 Job 的标签，并且提取权重。</p><p>这个是重点也是难点…</p><p>从抽象的角度来看，Job 其实也只是一串文本描述的一样物品。</p><p>粗略地做，我们可以进行简单的词频统计…</p><p><strong>常用的更标准的方式是使用 TF-IDF。</strong></p><h3 id="比较"><a class="markdownIt-Anchor" href="#比较"></a> 比较</h3><p>SQL 模糊查询是基于元数据的推荐。比如推荐书，紧紧按出版年份来推荐是不太合适的。(大多数情况下)</p><p>而协同过滤，是基于标签，更合理些(理论上)。</p><p>我们做出来的效果，感觉模糊查询似乎看起来科学点…至少能在推荐的结果找到我们的输入的信息。</p><p>通过后面的方式得到的推荐结果（因为我们技术不到位的原因）看起来有点没头没脑…</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 自己浅见 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Project </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>褛衣夜行</title>
      <link href="/2018/05/25/one-night-in-blog/"/>
      <url>/2018/05/25/one-night-in-blog/</url>
      
        <content type="html"><![CDATA[<p>之前和伙伴整天对着电脑造玩具，总担心落下了基础，最近啃书又怕耽搁实践。不由觉得那些贩卖焦虑的网络写手真是精通心理的学家。本来没什么感觉，被这些爆文一忽悠，就突然意识到「焦虑」这种情绪的存在了，并且觉得到处都是这玩意，难以摆脱。</p><p>究其原因大概是因为在一个大部分都还皆有可能的环境下，我仍抱有能把这些麻烦事一件件处理完的期待。</p><p>叹气着「麻烦呀真麻烦」，但当别人说「麻烦的话，不做不就好了。」又觉得别人多嘴。</p><p>这是宫崎骏在某个采访里说的话，印象很深。</p><p>毕竟「重要的事情总是很麻烦。」</p><p>这类金句还挺常见的，《电脑线圈》的最后一句台词是「能感觉到疼痛的地方一定会有出口。」</p><p>这种口头禅式的抱怨只是情感宣泄的一种方式。就像网上流传的聊天达人的技巧，当别人抱怨时，你顺着对方的话说就行了。要是当真了一本正经的解释，反倒无趣。</p><p>这种交流方式太累人了，我没尝试过。不过想来应该没差。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>性格</title>
      <link href="/2018/03/26/character/"/>
      <url>/2018/03/26/character/</url>
      
        <content type="html"><![CDATA[<p>一个人突然性情大变是可能的。</p><p>前几天吹牛，波波老师说他年长我好几岁，因为当初经常转学，留了几次级。我打趣说大家都是这样，前二十多年的人生，不断地和一群熟悉的人分开，奔向另一个地方重新开始。</p><p>我用了「重新开始」这个词，因为当时想到了上面的那个问题。到了一个新的地方，换个性格重新开始。</p><p>我觉得性格就是一套与人相处培养出来的行为准则。我不改变是因为处于这种舒适区并且觉得改变带不来什么好处（好处的定义由三观决定）。要是有人改变了性格并且不断地从中获取正反馈，不就一直这样下去咯。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git 的简单使用</title>
      <link href="/2018/02/01/git/"/>
      <url>/2018/02/01/git/</url>
      
        <content type="html"><![CDATA[<h2 id="前戏"><a class="markdownIt-Anchor" href="#前戏"></a> 前戏</h2><p>下载安装 Git。</p><p>PS：Gitee、Github、Coding 这类 Git 协作管理工具原理都一样。</p><h2 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h2><h3 id="全局配置"><a class="markdownIt-Anchor" href="#全局配置"></a> 全局配置</h3><p>该配置是全局配置，对于不同的管理工具，只要用的一套邮箱和密码，都可以使用。</p><blockquote><p><code>git config --global user.name &quot;在 Github 等站的名字或昵称&quot;</code><br><code>git config --global user.email &quot;在 Github 等站注册使用的邮箱&quot;</code></p></blockquote><h3 id="针对项目配置"><a class="markdownIt-Anchor" href="#针对项目配置"></a> 针对项目配置</h3><p>需要在项目根目录下进行配置。</p><blockquote><p><code>git config user.name &quot;Your Name&quot;</code></p><p><code>git config user.email &quot;Your email&quot;</code></p></blockquote><p>注意：如果你配置了全局的用户名和邮箱，仍可以针对项目进行配置，Git 会优先考虑针对项目的配置，找不到才会去使用全局的配置。</p><h3 id="查看当前配置"><a class="markdownIt-Anchor" href="#查看当前配置"></a> 查看当前配置</h3><blockquote><p><code>git config --list</code> 查看当前配置</p></blockquote><h2 id="本地生成-ssh-公钥并在-github-等站配置"><a class="markdownIt-Anchor" href="#本地生成-ssh-公钥并在-github-等站配置"></a> 本地生成 SSH 公钥，并在 Github 等站配置</h2><p>在配置好用户名和密码后，可以进行生成公钥。</p><h3 id="为什么要配置-ssh-公钥"><a class="markdownIt-Anchor" href="#为什么要配置-ssh-公钥"></a> 为什么要配置 SSH 公钥</h3><p>配置 SSH 公钥后，本地仓库与远程仓库可以通过 SSH 链接进行交互（pull，push 等操作）。</p><blockquote><p>SSH 链接示例： <code>git@github.com:hqweay/MarkAll.git</code></p></blockquote><p>反过来说，如果你通过 SSH 链接关联远程仓库与本地仓库，就必须配置 SSH 公钥，才能进行 Git 操作。</p><p>另一方面，如果你通过 HTTPS 链接进行关联，你就无需配置 SSH 公钥。</p><blockquote><p>HTTPS 链接示例：<code>https://github.com/hqweay/MarkAll.git</code></p></blockquote><p>若你通过 HTTPS 链接对本地仓库和远程仓库进行关联，在进行 push 操作时，Git 将会提示你手动输入密码以验证权限。</p><p>所以通过 SSH 与 HTTPS 链接关联远程仓库库与本地仓库的区别就显而易见了，通过 SSH 链接，一次配置后以后就无须重复输入密码，同时，不必输入密码，也在一定程度上保证了安全。</p><h3 id="生成公钥"><a class="markdownIt-Anchor" href="#生成公钥"></a> 生成公钥</h3><blockquote><p><code>ssh-keygen -t rsa -C &quot;xxxxx@xxxxx.com（你的邮箱）&quot;</code></p><p>连续按三次回车，使用默认配置即可</p></blockquote><h3 id="查询公钥"><a class="markdownIt-Anchor" href="#查询公钥"></a> 查询公钥</h3><blockquote><p><code>cat ~/.ssh/id_rsa.pub</code></p></blockquote><p>这一步是查询公钥，把显示的东西全复制下来即可。</p><p>如果操作系统是 Windows，可以打开 <code>C:\用户\Users\.ssh\id_rsa.pub</code> 文件查看公钥。</p><h3 id="配置-2"><a class="markdownIt-Anchor" href="#配置-2"></a> 配置</h3><p>然后把公钥粘贴到 Github 这类网站配置 SSH 公钥的的对应位置即可。</p><h2 id="基本操作"><a class="markdownIt-Anchor" href="#基本操作"></a> 基本操作</h2><ul><li><p>git clone</p><p>git clone <a href="mailto:git@github.com">git@github.com</a>:hqweay/MarkAll.git&lt;仓库链接&gt;</p></li><li><p>git pull</p><p>git pull orign<remote>master<branchname></branchname></remote></p></li><li><p>git push</p><p>git push origin<remote>heng<branchname></branchname></remote></p></li></ul><p><strong>PS：了解下 rmeote 概念就行了。</strong></p><ul><li><p>git merge</p><p>git merge &lt;想要合并到当前分支的分支名&gt;</p></li></ul><h3 id="其它"><a class="markdownIt-Anchor" href="#其它"></a> 其它</h3><ul><li>git init</li><li>git remote</li><li>git branch</li></ul><h3 id="提交"><a class="markdownIt-Anchor" href="#提交"></a> 提交</h3><ul><li>git add .</li><li>git commit -m&quot;&quot;</li><li>git push</li></ul><h2 id="常用命令"><a class="markdownIt-Anchor" href="#常用命令"></a> 常用命令</h2><h3 id="将本地库与远程库关联"><a class="markdownIt-Anchor" href="#将本地库与远程库关联"></a> 将本地库与远程库关联</h3><p><code>git remote add origin git@github.com:hqweay/MarkAll.git</code></p><p>origin 为本地库的关联名</p><p>一个本地库关联多个远程库，就是通过更改 origin 这一项的名字实现的。</p><p>比如：</p><p><code>git remote add One git@github.com:hqweay/MarkAll.git</code></p><p><code>git remote add Two git@github.com:hqweay/MarkAll.git</code></p><p>就实现了一个本地库关联两个远程项目，需要进行操作时便分别通过名称One，Two来操作。</p><h3 id="关联其它操作"><a class="markdownIt-Anchor" href="#关联其它操作"></a> 关联其它操作</h3><p>删除关联 <code>git remote rm origin</code></p><p>查询关联 <code>git remote -v</code></p><h3 id="clone-某分支"><a class="markdownIt-Anchor" href="#clone-某分支"></a> clone 某分支</h3><p>默认克隆 master 到本地：<code>git clone git@github.com:hqweay/MarkAll.git</code></p><h3 id="回退到某版本"><a class="markdownIt-Anchor" href="#回退到某版本"></a> 回退到某版本</h3><ol><li>使用 <code>git log</code> 命令查看所有的历史版本，获取某个历史版本的 id，假设查到历史版本的 id 是 139dcfaa558e3276b30b6b2e5cbbb9c00bbdca96。</li><li><code>git reset –hard 139dcfaa558e3276b30b6b2e5cbbb9c00bbdca96</code></li><li>把修改（强制）推到远程服务器<code>git push -f origin master</code></li></ol><h3 id="强制-push"><a class="markdownIt-Anchor" href="#强制-push"></a> 强制 push</h3><blockquote><p><code>git push -f origin master</code></p></blockquote><h3 id="设置默认仓库"><a class="markdownIt-Anchor" href="#设置默认仓库"></a> 设置默认仓库</h3><p>以命令 <code>git push -f -u origin master</code> 为例。</p><p>其中 <code>-f</code> 是命令 <code>--force</code> 的缩写，意味着忽略冲突，将本地的内容强制推送，覆盖远程仓库。</p><p><code>-u</code> 的意思是把当前使用的仓库 <code>origin master</code> 设置为默认仓库。</p><p>设为默认仓库后，下次就只需要操作 <code>git push</code> 而无需输入全部命令 <code>git push origin master</code> 达到推送的效果。</p><h3 id="同步云端代码至本地"><a class="markdownIt-Anchor" href="#同步云端代码至本地"></a> 同步云端代码至本地</h3><blockquote><p><code>git pull origin 分支名</code></p></blockquote><h3 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h3><ul><li>删除本地某次 commit(比如最近一次不小心把 密码 add 了)</li><li>删除线上某次 commit</li><li>…</li></ul><h2 id="merge-操作"><a class="markdownIt-Anchor" href="#merge-操作"></a> Merge 操作</h2><h3 id="场景"><a class="markdownIt-Anchor" href="#场景"></a> 场景</h3><p>假如本地仓库有一个分支 master 对应远程仓库的一个分支 master。</p><p>现在需要将远程仓库的另一个名为 master-new 的分支 merge 到本地分支 master。</p><h3 id="操作"><a class="markdownIt-Anchor" href="#操作"></a> 操作</h3><p>// 新建分支</p><p><code>git branch add master-new</code></p><p>// 切换到该分支</p><p><code>git checkout master-new</code></p><p>// 此时新建的分支还未与远程分支关联</p><p>// 把远程分支 pull 回来 默认就关联了</p><p><code>git pull origin&lt;remote&gt; master-new&lt;远程仓库名&gt;</code></p><p>// 切回原分支</p><p><code>git checkout master</code></p><p>// 把新分支的内容 merge 回来</p><p><code>git merge master-new</code></p><p>// 然后按照冲突进行解决即可</p><h3 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意</h3><p>如果要将远程仓库的一个分支 merge 到本地，需要保证远程分支的 commit 是较新的版本。</p><p>新到那种程度？</p><p>新于本地分支和被 merge 的分支的主干分支。</p><h3 id="其他命令"><a class="markdownIt-Anchor" href="#其他命令"></a> 其他命令</h3><p>查看项目的分支们(包括本地和远程)<br><code>命令行 : $ git branch -a</code></p><p>删除本地分支</p><p><code>$ git branch -d &lt;BranchName&gt;</code></p><h2 id="fetch"><a class="markdownIt-Anchor" href="#fetch"></a> fetch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin master:temp</span><br><span class="line">$ git diff temp</span><br><span class="line">$ git merge temp</span><br><span class="line">$ git branch -d temp</span><br><span class="line"></span><br><span class="line">$ git fetch origin master</span><br><span class="line">$ git <span class="built_in">log</span> -p master..origin/master</span><br><span class="line">$ git merge origin/master</span><br></pre></td></tr></table></figure><h2 id="submodule"><a class="markdownIt-Anchor" href="#submodule"></a> submodule</h2><h3 id="添加"><a class="markdownIt-Anchor" href="#添加"></a> 添加</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add &lt;url&gt; &lt;path&gt;</span><br></pre></td></tr></table></figure><h3 id="使用"><a class="markdownIt-Anchor" href="#使用"></a> 使用</h3><p>克隆父项目后，默认子模块目录下无任何内容。需要在项目根目录执行如下命令完成子模块的下载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git submodule init</span><br><span class="line">git submodule update</span><br></pre></td></tr></table></figure><p>或：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure><h3 id="更新"><a class="markdownIt-Anchor" href="#更新"></a> 更新</h3><p>进入子模块的目录下 <code>git pull</code>。</p><h3 id="删除"><a class="markdownIt-Anchor" href="#删除"></a> 删除</h3><p>有时子模块的项目维护地址发生了变化，或者需要替换子模块，就需要删除原有的子模块。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm -rf 子模块目录 <span class="comment"># 删除子模块目录及源码</span></span><br><span class="line">vi .gitmodules <span class="comment"># 删除项目目录下.gitmodules文件中子模块相关条目</span></span><br><span class="line">vi .git/config <span class="comment"># 删除配置项中子模块相关条目</span></span><br><span class="line">rm .git/module/* <span class="comment"># 删除模块下的子模块目录，每个子模块对应一个目录，注意只删除对应的子模块目录即可</span></span><br></pre></td></tr></table></figure><p>执行完成后，再执行添加子模块命令即可，如果仍然报错，执行如下：</p><blockquote><p>操作完在执行git rm --cached 子模块名称 前，需要先提交一下更新。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached 子模块名称</span><br></pre></td></tr></table></figure><h2 id="使用-github-的网络问题"><a class="markdownIt-Anchor" href="#使用-github-的网络问题"></a> 使用 GIthub 的网络问题</h2><h3 id="科学上网"><a class="markdownIt-Anchor" href="#科学上网"></a> 科学上网</h3><h3 id="使用镜像"><a class="markdownIt-Anchor" href="#使用镜像"></a> 使用镜像</h3><ul><li><p><a href="https://github.com.cnpmjs.org/" target="_blank" rel="noopener">https://github.com.cnpmjs.org/</a></p><p>如命令 <code>git clone https://github.com/hqweay/MarkAll.git</code> 可以用 <code>git clone https://github.com.cnpmjs.org/hqweay/MarkAll.git</code> 代替。</p></li></ul><h3 id="改-dns"><a class="markdownIt-Anchor" href="#改-dns"></a> 改 DNS</h3><h3 id="骚操作"><a class="markdownIt-Anchor" href="#骚操作"></a> 骚操作</h3><p>使用 Gitee 等将 Github 的仓库同步过来，然后通过 Gitee 等提供的链接 clone 仓库。</p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 配置与操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置与操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《来自新世界》</title>
      <link href="/2018/01/17/lai-zi-xin-shi-jie/"/>
      <url>/2018/01/17/lai-zi-xin-shi-jie/</url>
      
        <content type="html"><![CDATA[<p>本来想看动画来着，觉得读原著可能更节约时间，所以找来小说阅读。说起来之前一直以为这是部轻小说 —— 没想到居然是正经的严肃文学（如果可以这么称呼的话）。</p><p>三口气读完，非常畅快，在这里写下自己的一点感想。</p><p>提示：以下可能包含剧透。</p><h2 id="反乌邦托"><a class="markdownIt-Anchor" href="#反乌邦托"></a> 反乌邦托</h2><p>至此时我仍然不能好好地理解「乌邦托」这个词，因为我想像不出这个词描绘的是怎样一个世界，或者说怎样维持这样一个理想世界……就像想像不出宇宙的边界那样……太费脑子了，我就不多说了……</p><p>在我看过的为数不多的科幻作品里有两部通过设定「生物之间的相互信任」来搭建故事。比如《三体》中三体人通过特殊方式交流，思想对同类是透明。而《来自新世界》设定了「愧死机制」和「攻击抑制」避免同类间相互伤害。所以三体人表示「不能理解」什么是「欺骗」。这部书的主角在听说古人类（相对于他们来说）会说谎时惊叹「不可能！」。</p><p>几千年后的新人类拥有着超能力（念力），但是却发展出了一个限制使用念力的社会。这点非常有趣，第一，如今的人类都拥有念力，是因为淘汰了那些没有念力的人，而淘汰的方式 —— 异常血腥。第二，反过来又要限制念力（对同类的使用）。</p><p>发展到现在这个社会是很不容易的，管理层想要维持，而主角一行人受好奇心的驱使，不断探索，便展开了这个世界的原貌。</p><p>原貌自然是黑到发紫。</p><p>我觉得这里出现了一个问题，这群新人类这样表示：你知道真相了吧，真相就是这么黑暗。我们好不容易才发展出了现在的社会体系……所以我们一起维持现状吧！</p><p>可是……地球终究有一天是会毁灭的……你们应该考虑地球外面的星辰大海啊！</p><blockquote><p>超能力漫画作品《我的英雄学院》也有类似的观点，大意是：「如果没有超能力，我们现在应该已经住在太空了吧。」</p></blockquote><h2 id="主角"><a class="markdownIt-Anchor" href="#主角"></a> 主角</h2><p>在我看来，主角并不是很讨喜。</p><p>在结局打 Boss 时，主角团的觉准备与 Boss 同归于尽拯救世界，但是女主同情心爆发阻止了觉，于是最好的机会浪费了……然后女主「想出了一个办法」，让旁边的化鼠奇郎丸去送死激发 Boss 的愧死机制……</p><p>很干脆地说，我对女主的反感大部分都来源于这家伙让奇郎丸送死……</p><p>我还以为会有什么不会牺牲的完美解决方案……没想到还是会有牺牲啊……虽然是牺牲化鼠……</p><p>在这部小说的世界观里，化鼠类似于现实里的蚂蚁……可是即便是蚂蚁，你们好歹是同行战斗过的伙伴（日漫之类的不是最讲究伙伴什么的吗）啊！女主至始至终都觉得「化鼠嘛，死了就死了。」。虽然在小说的描写屠杀化鼠的文字里也产生过同情心，但是还是认为「化鼠嘛，死了就死了……」。</p><p>我对女主另外的反感就来源于此——因为这种行为像极了我自己，或者说人类自己也不为过。即便我们接受的教育是爱护动物之类的，偶尔会产生怜悯，但是在面对蚂蚁死了，猪被杀了这类事时还是会觉得「死了就死了」。</p><p>小说的高潮在化鼠的真实身份揭露时产生了一个高潮。其实化鼠是之前没有超能力的人被超能力拥有者转化的……</p><p>女主在了解到这一点后杀掉了化鼠斯奎拉（应该说给他一个解脱） —— 之前 Boss 小真里亚的死已经证明愧死机制的发动是针对执行者所认同的同类来讲，而女主却没事，这说明即便女主知道了化鼠其实就是人类，但是已经并不认为他们是人类了。</p><p>毕竟从很久以前开始就只有能使用念力的人才算是人类。</p><h2 id="化鼠"><a class="markdownIt-Anchor" href="#化鼠"></a> 化鼠</h2><p>即便化鼠不是人类，这场战争在化鼠的立场也没什么错，为了自由而战嘛。化鼠想要存活必得看人类心情，这多糟糕。新人类的立场认为，我们拥有秒秒钟毁灭你们的能力，但是我们没有，我们只杀了你们当中那些不听话的化鼠，这真是太善良了！但是在化鼠看来：「……」</p><p>斯奎齐很厉害。</p><p>奇郎丸只是忠于女王罢了。</p><p>想想，几位主角，村子的管理层，大家在各自的立场都挺「正义」的。</p><h2 id="其它"><a class="markdownIt-Anchor" href="#其它"></a> 其它</h2><p>一部小说要吸引人，重要的是让读者对角色产生同情，之前读者随着几位主角探索，描绘的世界缓缓展开。知道了真相后可能会对化鼠产生同情，觉得化鼠失败了很可惜。可是之前超能力者刚被发现的时候，超能力者也属于弱势群体，被研究啊什么的都会有，而且有的人类认为超能力会影响社会稳定甚至准备了各种武器想要消灭掉所有的超能力者。（想起了《亚人》的故事情节，拥有不死能力的亚人作为弱势群体……本作大概就相当于亚人故事里反抗派最后统治了世界并且把普通人类灭绝了……）</p><p>所以成王败寇啊成王败寇……只不过超能力者在当初那场战争中赢了而已……</p><p>不过超能力会影响社会稳定这点在本作中确实没错，在这个故事中超能力者掌管世界后经历了好几个时代（黑的不行），最后才发展出故事发生的这个社会（通过限制使用超能力，进行愚民教育等维持稳定）。</p><p>我对化鼠的同情来源于想到自己如果在这种社会下一定是化鼠阶级……要是我能在这样的世界里当一个普通人，那还不错。不过村子会对念力掌控不合格的小孩进行排除……想要安稳成年当个普通人也不容易啊。</p><h2 id="最后"><a class="markdownIt-Anchor" href="#最后"></a> 最后</h2><p>想起之前读的一个短篇，一个人发现自己生活的地方有点不对劲，然后尝试逃离这里……说到这里就能想到很多的类似作品了，楚门的世界，黑客帝国，异次元骇客……这个小说让我记忆深刻之处在于主人公从这个不太对劲的世界逃离出去后，发现自己其实在末世，靠营养液和休眠过活——也就是靠着技术手段做白日梦。真实的世界并不是那么有趣，主角反到希望自己能够再次进入休眠状态。可是这时如果清除主角记忆让他再次进入催眠状态，太危险了……谁知道主角会不会又对这个世界产生怀疑，然后为了逃离这个虚拟世界大肆破坏一番……但是让他不清除记忆再次休眠……已经知道了真相，还能沉浸于虚拟的世界吗？</p><blockquote><p>2019-09-28</p><p>剧透，剧透注意！！今年的动画《爱，死亡和机器人 第一季 Love, Death &amp; Robots Season 1》里就有一个这种结构的故事。</p><p>PS：虽然这种故事结构的内核并不新鲜，主角探索真相，真相揭露后觉得还不如不知道……</p></blockquote><p>即便如此我还是觉得人应该追求真相……这样的世界下面，死亡就其实也不过如此了，或者说正是因为死亡也不过如此，追求真相更显得可贵，并且……有意思些。</p><p>以上，至于对现实的警示什么的就不多提了。</p><p>PS：有个脑洞……未来的世界人类已经进化成可以随时更换身体活下去了，对于他们来说，换身体就像和现在换衣服一样方便……其实未来世界已经被机器人统治了，不过普通的机器人都认为自己是人类。所谓的换身体不过是给储存器换一个机器身体而已……</p><p>友人觉得可以这样：未来的人类已经能与机器结合了……</p><p>但是我觉得机器人统治世界，真正意义上的人类已经灭绝了这种设定更能让人绝望……</p><p>不过仅限于故事啊，我还是希望生活中能多点充满希望的事……</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 观与感 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读所思 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>波波老师</title>
      <link href="/2017/12/30/xiao-bo/"/>
      <url>/2017/12/30/xiao-bo/</url>
      
        <content type="html"><![CDATA[<p>「我现在软件写得出神入化，大概 8088 上能做到的一切，我都做到了。自己觉得该告一段落，去写小说了。」</p><p>你说，世上怎么有这么可爱的人？</p><p>这阵子沉迷于王小波无法自拔，读杂文时了解到他为了写小说，自己编了一个码字软件。这让我在满篇的共鸣中又对他添加了一心脏的好感。「今天要是不把那段 C++ 程序调通，老子就不睡了……」类似的句子总让我脑补出他坐在一台老式 PC 前抓耳挠腮的画面，似乎下一步就要开始挠挠脚趾头。</p><p>这家伙对电影极其热爱，观影量 1000+，而且大部分都是留学时看的原声。有篇杂文他提到了 3D 动画电影，大概内容说可惜现在做一部3d动画需要很多人，以及很高性能的电脑，他是一个喜欢编故事的人，要是以后技术更好了就可以考虑自己做部出来。当时读到这有点难过，想到他如果还在的话，现在说不定会就有个互联网大佬王小波，或者搞独立动画的王小波之类的。</p><p>王小波的文章里多次提到伍迪艾伦，我觉得他要是拍电影一定也会和后者的片子一样有趣。他经常借伍迪艾伦来批评美国的商业片——读到这些，我感叹，「好莱坞的套路这么多年都没变过嘛。」</p><p>他写过不少关于影视的文章，其中像是「电视上全是『太君好』……」这类的又让人忍俊不禁起来。真想告诉他，二十多年来，这种情况都没啥改变。</p><p>很喜欢他的杂文。读起来有一种「卧槽这个念头以前也有人想过」的感觉，要是共鸣就意味着高潮，那我简直是在他的文字里高潮不断。</p><p>不过他自己也提到，比起杂文，更喜欢编故事。</p><p>「我觉得自己是个忠厚的人，但是不知道为什么，满脑子都是尖酸刻薄的想法。」我想这就是他幽默的笔触下的故事却几乎都是悲剧的原因吧。</p><p>王小波的人生信条是追求有趣，「有趣」这个词倒是经常在日剧里看到。日剧有很多片子都是讲成年人的婚姻，据说这是因为日本社会结婚率越来越低，所以放些电视剧试图潜移默化来鼓励大家结婚。经常看到这样的台词，找对象的条件，温柔就好，有趣就好。要是像是王小波这种有趣，确实很好。</p><p>据说——唉，又是据说，我写文章真是没有一点考据求实的精神。据说「咪蒙」在写毒鸡汤之前也是个以「有趣」为人生信条的青年，在韩寒那部只发了一期的《独唱团》等刊物写过确实有趣的文章，据说——又是据说，据说那篇文章和现在的风格迥乎不同。</p><p>我想说「有趣又不能当饭吃」这种话来着，可是转念一想还真有不少人拿有趣来赚钱。果然这些话还是自己偷偷想想就好了，别说出来，免得挨打。</p><p>我恰好是个无趣至极的人，倒也正好，可以追求有趣嘛。</p><p>不过要是成天把「有趣」这个词放在嘴里的话，不仅对我起不到半点好处，反而与我另一人生信条相违背了。我还是做一个无趣的人好了，这样，我就是一直在追求有趣的路上。</p><p>2017-12-30-0:50</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 观与感 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读所思 </tag>
            
            <tag> 人物 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>只是为了生存 —— 《荒野间谍》</title>
      <link href="/2017/10/28/just-for-survival/"/>
      <url>/2017/10/28/just-for-survival/</url>
      
        <content type="html"><![CDATA[<p>前阵子在某公众号遇到的推荐，在截图里看着里面动物挺萌的，就起了看一眼的念头。值得一提的是当时已经是半夜，我开着流量打开一集，结果欲罢不能，看完第一集后强制压抑住自己打开第二集的冲动。然而第二天早上还是……囧</p><p>这部纪录片的精彩之处在于主创团队使用了很多个逼真的动物机器人来接近动物们，以此拍下他们在毫无防备的时候的普通生活。</p><p>我的第一感觉首先是有趣。因为这种独特的拍摄手法，片子里面有许许多多有趣的镜头，展现了许多我以前未曾想象过的动物们的行为。这种有趣也来自于动物和人的对比。我惊讶地发现，爱，同情，怜悯，伤心，甚至是自私，嫉妒，这些情绪动物们都有！</p><p>第一集里有一个猩猩和一只年幼的小奶猫一起玩耍的镜头，当另外的猩猩粗暴地对待这只小奶猫时，这只猩猩甚至会去阻止，并且带小奶猫去更安全的地方。</p><p><img data-src="http://wx3.sinaimg.cn/mw690/a9a29bb9gy1fkyaiw7ex2j21hc0u0npd.jpg" alt="猩猩"></p><p>我最有感触的是一只雄性企鹅。雄性企鹅们上岸后会在岸边争夺占领干燥的的土地，并捡石子来筑巢，以等待雌性企鹅前来进行交配繁衍。有一只雄性企鹅因为来晚了，已经没有一块干燥的地方可以筑巢了，只好找了一块潮湿的地方 —— 潮湿的甚至可以说是个小水池。但是无妨，只要能捡到足够多的石子，也能把这里做成一个好巢。于是这只企鹅就去捡石子。可是周围的石子已经被捡完了，企鹅只好到很远的地方捡。在这只企鹅走远后，发生了震惊的一幕！一只小偷企鹅在这只企鹅走远后，偷偷地把他之前捡的石子偷走了！！这让我感到好震惊！好气愤！</p><p>过了一阵子，雌性企鹅们来了，有一只雌企鹅在这只老实企鹅那打量了好一阵子。可她怎么可能会选择他呢？他的巢甚至还没做好。更尴尬地是，这只雌企鹅选择了之前的小偷企鹅，因为小偷企鹅偷了很多石子的关系，巢又大又温暖。旁白说，也许小偷企鹅没有羞耻心，但他有豪宅啊。</p><p>老实企鹅决定与小偷企鹅打一架，为了尊严，也为了最后挽回一下雌企鹅。然而最后的结果是老实企鹅在一旁看着这两只企鹅交配。</p><p><img data-src="http://wx3.sinaimg.cn/mw690/a9a29bb9gy1fkyaiq7n9bj21hc0u0hdt.jpg" alt="企鹅"></p><p>这是老实企鹅站在一旁的镜头，心都碎了！！！</p><p>但是即便如此，这只老实企鹅并没有放弃，他选择继续去捡石子，把自己的巢搭建好。</p><p>也是从这一个片段开始，我重新审视这部片子。很多镜头确实有趣，可是有趣之下呢，动物们只不过是在生存而已。</p><p>看这类纪录片如果带入个人情感，就会变得很奇怪。这一刻，豹捕食野狗，我们替野狗感到担心，为野狗的友情，亲情感叹。下一刻，我们又伤心于没有食物的豹子。但当看到豹子攻击人类等镜头时，又会抱怨这些动物的残忍。</p><p>眼见为实，人类总是基于自己看见的东西做判断。</p><p>这部纪录片拍了猩猩照顾小奶猫这样的镜头，也拍下了猩猩生食狒狒这样的镜头。要是简简单单地评价，这样做好坏呀，这个谁好可怜啊，也太偏见了。</p><p>动物有着与人类类似的情绪，猴子会以为机器人猴子死了而像对待真猴子死了那样对待他（而此时机器人猴子对他们来说只是个陌生人）。动物也有极高的智力，猩猩能使用人类的锯子，有种鸟能自己制造钓虫子的工具……</p><p>在《人类简史》中写到人类与动物的一个巨大不同点在于动物可能很聪明，甚至会生活在一起，有非常严格的等级制度，但他们不能聚集成一个巨大的组织（人类社会这种成亿成员计算）。</p><p>人类不断进化，在社会下的各种规则中，把生存变成生活。因此和其它动物区别开来。</p><p>主创团队花了很长的时间，极大的精力，甚至冒着生命危险才拍下这部纪录片。第五集是对各种机器动物的揭秘，展示了他们的制作以及主创团队是如何把他们安放到真正的动物旁边的。其中有一幕是两个人在拍一只豹子时，豹子向他们袭击了过来，还好其中一人是拥有丰富经验的动物学家，通过扔帽子吸引豹子的注意力躲过这生死一劫。</p><p>还有团队人员亲自下水到有大量鳄鱼的河流里安放机器动物等行为面临的种种危险。在拍摄过程中的存在的各种困难，特别是各种不可预料的意外 —— 机器动物不可能每个都达到预想的效果，各种安排也不可能一帆风顺……很多决定甚至都只能凭借团队人员的经验甚至是直觉来做……</p><p>啊，感谢这群人带来这么优秀的一部纪录片！</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 观与感 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 看片所想 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《流星 蝴蝶 剑》简记</title>
      <link href="/2017/09/29/wuxia/"/>
      <url>/2017/09/29/wuxia/</url>
      
        <content type="html"><![CDATA[<p>上午去图书馆找 TP- 类书籍，顺便在小说区逛了好一阵子，最后借了本古龙的《流星 蝴蝶 剑》。午睡完开始偷闲阅读，一下子就沉迷其中，掩卷时天已漆黑，时针指向 8 点。</p><p>看完这本，突然觉得武侠不是种分类，而是一种载体。作者通过武侠这个载体可以表达的东西有很多很多。本来看过的武侠小说就不多，再加上看过的武侠电视剧，电影也有限，所以之前就狭义地认为武侠只是打打杀杀快意恩仇。这本书则打破了我这种被禁锢的思维，让我感到新奇。</p><p>一，故事充满反转，情节紧张，让我有种在读悬疑小说的错觉，十分刺激。</p><p>二，反转总是伴随着背叛，这让人防不胜防。不断的背叛，让人感到非常致郁。</p><p>三，写故事，也写情绪。说起来，小说从头到尾都带着一股悲伤。看这部小说，我觉得似乎在看王家卫的片子，脑补时总不禁想给孟星魂加上墨镜王那独特的镜头。虽然这样想，但哪有时间。阅读时沉浸其中，总感觉压抑的很，难受的很，而故事又发展的那么紧凑，催着人不停翻页。</p><p>故事结束了，读者却还没走出那个江湖。仿佛自己就是那男主角，忧伤又寂寞。</p><p>唉，想什么呢。现实也不比书中好过多少，还是要继续学习呀。</p><blockquote><p>「很静，静得几乎听得见花瓣开放的声音。」</p><p>「蝴蝶永远只活在春天里。」</p><p>「她是宁可忍受寂寞？还是来独自享受寂寞？」</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 观与感 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读所思 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>与格式化相关</title>
      <link href="/2017/09/16/about-format/"/>
      <url>/2017/09/16/about-format/</url>
      
        <content type="html"><![CDATA[<p>今天看的 CS50 课程里简要说明了硬盘的运作，并且讲到了硬盘的格式化。有同学提到一个问题，当我点击格式化的时候，发生了什么？</p><p>略去电流传输，把信号送达到硬盘等流程，我们仅仅关注硬盘是怎么进行格式化的。当硬盘进行格式化操作的时候，它实际上只是修改了开头的分区表上的几千个字节的信息。这些信息起着一个目录的作用，让你的电脑知道文件和文件夹被储存在哪里。所以当你格式化你的硬盘，所做的只是在为新数据的储存做准备。这种格式化可能并没有除去你的旧数据。</p><p>既然说的是可能，那自然有会除去你的数据的情况。</p><p>其实这里提到的格式化只是比较常见的一种，也是普通用户会用到的一种。硬盘的格式化分为高级格式化和低级格式化。每块硬盘在出厂时，已由硬盘生产商进行低级格式化，因此通常使用者无需再进行低级格式化操作。（你当然可以自己进行低级格式化操作，但这种操作并不被建议——即便现在硬件的发展程度已经足够高了，但过多地进行低级格式化操作仍然会损害你的硬盘。）</p><p>而高级格式化则可以分为快速格式化和普通格式化，前文中所提到就是快速格式化。</p><p>快速格式化并没有完全清除你的旧数据。同时，如果知道了硬盘中0和1的排列规则，你甚至能恢复大量的数据。（前提是你还没有写入的数据覆盖掉它们所储存的区域）这也是所有的数据恢复软件的工作原理。</p><p>值得一提的是，快速格式化虽然带来了巨大方便，特别是对那些误删文件的人群来说。但同时也会有隐私安全的问题。你删除了某些私密文件，别人又给你恢复了，那多可怕呀。好在对于这种情形，我们还有普通格式化。</p><p>普通格式化会将硬盘上的所有磁道扫描一遍，清除掉硬盘上的所有内容。这种操作下的数据会完全删除，不可恢复。当然，因为要从头到尾扫描硬盘，所以时间花费会长一点。但是更长的时间消耗带来的不仅是完全删除数据，还可以检测出硬盘上的坏道。所以如果你怀疑自己的硬盘有坏道，那么也可以尝试普通格式化。</p><h4 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h4><ul><li>快速格式化，可恢复文件。只是删除了硬盘上的分配表文件，耗时短，一般建议使用该操作。</li><li>普通格式化，不可恢复文件。如果你需要完全删除硬盘上的文件或者怀疑硬盘有坏道，可以进行该操作。</li><li>低级格式化，不建议使用。</li></ul><h4 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h4><p><a href="http://blog.sina.com.cn/s/blog_59a245dc0100idh7.html" target="_blank" rel="noopener">快速格式化与普通格式化与低级格式化，及恢复</a></p><p><a href="https://www.zhihu.com/question/38408332" target="_blank" rel="noopener">电脑硬盘格式化数据能恢复吗？</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习折腾 </category>
          
          <category> 简单总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《卡罗尔》 —— 像是夏天碰撞的手肘</title>
      <link href="/2017/08/22/Carol-like-the-beer-in-spring/"/>
      <url>/2017/08/22/Carol-like-the-beer-in-spring/</url>
      
        <content type="html"><![CDATA[<p>2017-08-22-22:55</p><p>村上春树用过一个比喻，春天里的熊。抛开我糟糕的文笔，来形容一下观看这部片子的感觉，也许可以用「夏天碰撞的手肘」来描述。这个句子缘起室长的一次经历。在回家的客车上，他和一位女孩坐在一起，一路上，两人的手肘隐约挨着，若即若离。而当时尚值酷暑，于是短袖触碰薄纱。也许都没有在意，也许谁都心知肚明。总之谁都没有主动撤开。室长回到家后和我们谈起这件事，玩笑又带着当时怂的惋惜。</p><p>我第一次见人把咸猪手解释的如此清新脱俗，但同时突然想起某个年级的夏天，也曾和同桌手肘相靠，电风扇哗哗地吹，声音特别大，甚至盖过了老师讲课的声音。我心猿意马，心里起了无数个念头，当想到最后一个时，老脸一红，悄悄撤开。虽然现在想来，似乎当年的每位同桌都是男生。唉，没想到夏季才最容易陷入春梦。</p><p>《卡罗尔》，近两个小时的故事，婉婉叙来，节奏缓却畅快。看这部片子的时候，感觉非常舒适，像有一只猫住进了心脏。电影有哀，有温暖。心情也随着起伏。</p><p>我个人非常非常喜欢特瑞斯这个人物。也许是演员太有魅力了，总感觉她的每个眼神里都蕴含着无数的言语。</p><p>片子表达情绪十分克制，我对这几个镜头印象还挺深的，特瑞斯从克罗尔家回去时坐在火车上哭泣，接电话时的小心翼翼，偷拍卡罗尔时的小表情……总让人感到心疼，又在心里默默为她加油打气。</p><p>特瑞斯在片子中说「<strong>我从来不会拒绝。我什么都可以接受，又怎么知道自己想要什么呢。</strong>」。但我并不觉得特瑞斯是个没有主见的人。老实说，在片中似乎一直是卡罗尔在两人的关系中占主导地位，但是踏出的每一步特瑞斯都没有犹豫过，也从未对做过的任何事感到后悔。她在感情里表现得勇敢又坚定。</p><p>也许这就是特瑞斯吸引人的地方，脆弱与勇敢并存。</p><p>配乐也特别到位，随着情绪起伏。配乐和电影大概也是互相成全。有些电影配乐虽然本身素质就很好，但是经历过电影的这一层解读，观众在电影之外再次听到后，就会有更强烈的感受。</p><p>我把这段感受用在了《影视音乐鉴赏》课的作业，说大概这就是时至今日，有那么多的几分钟帮你看完一部电影的节目，而我们仍愿意花几个小时在屏幕前的原因 —— 我们可以几分钟就了解一部电影的剧情，却难以在听到一段熟悉的配乐时产生惊人的共鸣。</p><p>值得回味好一阵子了。</p><p>00:50</p><p>// ps：感觉鲁妮玛拉的眼睛会说话，真厉害。</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 观与感 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 看片所想 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谈到过往</title>
      <link href="/2017/08/19/past-time/"/>
      <url>/2017/08/19/past-time/</url>
      
        <content type="html"><![CDATA[<p>2017-08-19-22:00</p><p>逛到新浪博客，兴起，寻来许嵩十年前的文字开始阅读。页卷不停，时间跑了起来，思绪也回到从前。年幼的时候总是满怀憧憬，却又觉得日子还长，不肯把心思放在未来。如今又总是念旧，念在旧时有梦。虽然现在看来都是遗憾。</p><p>回忆是作家的灵感库。每个人都有独特的经历，收获的感悟也不尽相同，写出来更是花样百出。曾经的日子不总是美好的，但我偏向于认为它更好。时常节约一段安静的时光出来细数从前，用无数个表示假定的词汇畅想自己本该拥有的无数个未来。直到有一天，我突然对这种强加的美好感到厌倦。我知道自己并不是个想象力丰富的人，这样做，只不过是借此宣泄对现状的不满。</p><p>我没能活成自己曾期望的样子，这个念头让我感到无奈又悲伤。</p><p>日剧《求婚大作战》讲述了一个男人不停穿越，尝试挽回年少时的遗憾的故事。我作为一个旁观者，无力看着已经成人的主角一次次地穿越，又一次次地犯着和以前一样的的错误。主角改变不了自己。「<strong>自己的心意，考虑问题的方式等，在短时间内是不会改变的。</strong>」</p><p>即便再来一次，也还是会做出一样的决定。</p><p>那些选择，都是我当时认为的最优解啊。</p><p>「做决定前，想想自己以后会不会后悔。」这句话像是一句鸡汤似的废话，毕竟对部分人来说，不管做了什么决定，只要不顺利，都会后悔。但是有些后悔我们是能提前预知的，不是吗？常有人开玩笑说自己现在流的泪，都是当初做决定时脑子里进的水。也偶有人像我一般把希望寄托于自己别的可能性这种虚无缥缈的东西之上。也许不管我们做了什么决定，都会变成现在这种样子呢？唉，这种事情也无人可知。</p><p>北岛说，<strong>那时我们有梦，关于文学，关于爱情，关于穿越世界的旅行</strong>。我尝试回忆自己的「那时」，「那时」的我是怎样的样子呢？我能记起一堆做过的事，像是夜里窝在被子下打开手电筒看小说，像是放学后总要在路上玩一阵子才回家，但我却只能以第三人称的视角观望，难以回忆起当时的心情。遗忘是怎样一回事呢？大概像是我在路上留下的脚印，后来那条路被填上沙浆和水泥，铺上了柏油。我找不到自己的脚印，甚至难以想象曾在那里走过。</p><p>不过敢肯定的是，我在以前绝对没有思考过以后会怎么看待那时候的自己。仔细回想，身边确实不断地有人提醒我，你应该如何如何做，这样做对你的未来没有好处。但当时的我乐在其中，着实难以听进别人的意见。充满向往的少年，一心只想往未来跑。而大家都知道，奔跑是一件特别费时费力的事，我正全力以赴呢，哪还能挤出时间和精力用来思考？</p><p>00:35</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的好友说他要卸载QQ</title>
      <link href="/2017/08/14/Inner-activity/"/>
      <url>/2017/08/14/Inner-activity/</url>
      
        <content type="html"><![CDATA[<p>2017-08-14-22:55</p><p>打开一个网站，在访问某些内容的时候被告知：您必须注册账号。于是我不得不开始进行繁杂的操作 —— 填写一大堆资料，最后再做一个验证确保自己不是机器人。做完上述步骤后，点击确定，又被告知：抱歉，您的邮箱已被注册。我恍然大悟，返回尝试登录，却发现自己常用的密码根本登录不上。我紧张地点向旁边的「忘记密码」，还好，可以修改。输入了两遍我的新密码，点下最后一个确认键。正准备要松一口气，却再次被警告：修改的密码不能和以前一样。</p><p>什么鬼！</p><p>这是刚刚我在访问一个网站时面临的糟糕情形。</p><p>密码越来越多，秘密却越来越少。这总让我回想起以前网络还没普及到如此完善的日子。那阵子总希望自己能在网上拥有一席之地。感谢祖国的飞速发展，如今的我拥有了一堆账号密码，甚至不得不准备好几种密码来应对不同的保密机制。</p><p>一次又一次的注册，在网络的世界里便有了一个又一个不同的身份。「密码越来越多，秘密却越来越少」——我在一些社交平台上的好友要是听到这句歌词，一定会有所触动。</p><p>前些天，QQ 上的一个好友在空间说到：我要卸载 QQ 了，有事电话联系。</p><p>我从内心欣赏那些真的能从网络社交中脱身而出的人，他们一定有着常人不能及的毅力。我以前也做过这样的事。但是在我卸载后，事情却有点不一样。我发现一个问题——并没有人会电话联系我。所以我又决定清理一次手机上的联系人。之后没过多久我就把 QQ 又安装上了。很奇怪，明明在 QQ 上几个月也不会和谁联系一句，但当我卸载了它，心中还是空落落的。内心隐隐期待，患得患失。</p><p>装上 QQ 后，迫不及待地发表说说：自从卸载了 QQ，才发现手机原来还有打电话的功能。</p><p>我试图用这种暧昧的言语假装自己已经卸载了一段时间。然后等着别人来点赞，获得极大满足。</p><p>唉，有些事情明明大家都心知肚明，但就是心照不宣。</p><p>00:15</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>观关动物</title>
      <link href="/2017/08/13/watch-animals/"/>
      <url>/2017/08/13/watch-animals/</url>
      
        <content type="html"><![CDATA[<p>2017-08-13-22:30</p><p>前些天和班上的小伙伴被院里安排去参加一个「增加团队凝聚力」的活动，地点位于一个很洋气的基地。</p><p>午饭后，负责人告诉我们，还有两个小时才开始下午的活动，大家自由活动一下吧。然后用手指向门外说，顺着这条路往上走能看到不少动物，有孔雀哦。我和几个小伙伴顺着他的手指向外望去，只见密集的竹子夹着一条小路延向远处。大家没有犹豫，怀着期待开始行动。</p><p>顺着小道走了半天也没有发现任何孔雀的踪迹。我是最容易半途而废的那个人，呼吁着大家别找孔雀了，去找个有空调的地方坐一下吧。没空调，找个阴凉的地方一坐，休息休息也好哇。我虽然一路劝慰大家，不知不觉中却也走到了终点。远远地就闻到一股臭味，顺着这略刺鼻的味道来到一个不大的铁笼子。靠近看，里面原来关着两只鸵鸟。那浓厚的味道大概就是这俩家伙的排泄物发出的了。其中一只靠着笼子，似乎想把头伸出来。有人就开始对着鸟头拍照。友人介绍说北京有的人家四合院里就养着鸵鸟。我突然想起一个场景 —— 一只大鸵鸟在马路上狂奔。这是电影《老炮儿》里的场景，地点就在北京。冯小刚把圈养在四合院的鸵鸟放出来，然后喊道「撒丫子跑吧您内！」</p><p>记得鸵鸟害怕的时候，会把头埋在地上的沙子里。这只大鸟面对着我们，昂扬着头，丝毫没有害怕的意思。大概是知道有一个笼子把这群人围着，它安全的很，也自由的很。</p><p>看完大鸵鸟，满足了不少。但有人还想找孔雀，我们便随意走。</p><p>一路上自然又看见一些动物。</p><p>有两条狗也被关在笼子里，笼子只有不到三平方米。笼子外挂着牌子，写着狗的简介。狗狗是外国的品种，它的名字里有它的国籍。看着这个名字我眼前就浮现出了以前看的那些视频里狗狗奔跑的样子。我盯着它看了好一阵子，它没打算理我。只是自顾自地躺在笼子里。天热的紧，我心里也一紧。我想看它接飞盘的样子，可惜在这个圈里打个盹都费劲。</p><p>三只雪狐被锁在一个稍微凉快点的地方。铭牌上同样是简单的介绍，其中一句说雪狐能耐零下几十度的低温。我们一行人里有人便开始笑，我也苦涩地笑。这几只雪狐这辈子怕是没有用武之地了。</p><p>再走了段路，发现一个供人休息的地方，摆着好几把椅子。我找了一把，坐上去就不想再起来。</p><p>「还没看到孔雀呢。」</p><p>可是我一点也不想看到孔雀了。心里甚至还有点期望这里根本没有孔雀。</p><p>23:40</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从写什么开始写起</title>
      <link href="/2017/08/11/start-with-what-i-write/"/>
      <url>/2017/08/11/start-with-what-i-write/</url>
      
        <content type="html"><![CDATA[<p>2017-08-11-22:20</p><h2 id="一"><a class="markdownIt-Anchor" href="#一"></a> 一</h2><p>虽然标题给人一种随性的感觉，但它也不是我拍脑袋想出来的。我打算为自己的学习生涯开个好头，所以前晚设好了闹钟，今天也很到位地早早醒来。躺在床上，费了九牛二虎之力，我终于想到这个超级厉害的标题。但是当我起床并敲下这行字准备作文一番时，我的大脑很没有志气地开始短路了。从这写起 —— 好像也没什么写的嘛。</p><p>看来坚持写博客这件事对我来说，最难的不是「坚持」，而是无话可说。</p><h2 id="二"><a class="markdownIt-Anchor" href="#二"></a> 二</h2><p>刚开始的话，就随性写吧。像我这样的人，保持热枕是最重要的事情。很多像我一样的新手常常询问大神们怎样才能保证每天写一篇博客。大神们表示菜鸟还是慢慢打好基础吧，花一个月写三十篇口水话不如花一星期写一篇有水平的东西。</p><p>大神们的建议自然有其价值。我甚至可以体会大神们的心情。刚开始的时候因为水平不够花费了很多时间，走了很多弯路。后来水平提上去了就会觉得，要是当初把那些走弯路的时间都用在正确的方向就好了。虽然时光无法回头，但是他们可以把这些经验传授给后来人。部分热心的人会有这样的念头，我不会骗你，这条路是错的，我走过，你回去吧。但是对于很多如我愚昧的菜鸟来说，不自己踩一遍坑，而仅仅是听别人的言语，绝对不会信邪。</p><p>另外，我觉得不管在哪方面，学习的初期，保持练习是非常有效的手段。好也罢，坏也罢，至少我写下去了。坚持做这件事，把它做成一种习惯（当然，得排除自我感动，欺骗自己的大脑那种。），慢慢从这段不适应阶段度过去。很多时候，作文并不是一件有趣的事。不过令我高兴的是，我正在尝试把它做的有趣。</p><h2 id="三"><a class="markdownIt-Anchor" href="#三"></a> 三</h2><p>写什么呢？</p><p>内容尽量写一个主题，这一点我一定要坚持。曾翻到过以前写的文章，都是随心写，想到哪写到哪。老实说今天写这篇博客时，几次我都想把话题带歪……在这一点上，宁可少写，也得做到。</p><p>再写点自己的点子吧。</p><ul><li>多学习别人的文章。看书不要再流于故事，多学习写作技巧，多感受别人的作品。</li><li>尝试写书评，影评。写写自己喜欢的人物。</li><li>尝试写编程中的经验，浅薄见解。</li><li>尝试不同的风格。</li><li>偶尔也可以试试随心写作。</li><li>坚持下去。学习是件孤单的事。</li></ul><p>23:17</p>]]></content>
      
      
      <categories>
          
          <category> 生活志 </category>
          
          <category> 杂文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客记录 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
